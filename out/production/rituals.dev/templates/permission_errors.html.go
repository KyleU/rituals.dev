// Code generated by hero.
// source: github.com/kyleu/rituals.dev/web/templates/permission/errors.html
// DO NOT EDIT!
package templates

import (
	"io"

	"github.com/kyleu/rituals.dev/app/auth"
	"github.com/kyleu/rituals.dev/app/permission"
	"github.com/kyleu/rituals.dev/app/util"
	"github.com/kyleu/rituals.dev/app/web"
	"github.com/shiyanhui/hero"
)

func PermissionErrors(svc util.Service, errors permission.Errors, auths auth.Records, ctx web.RequestContext, w io.Writer) (int, error) {
	_buffer := hero.GetBuffer()
	defer hero.PutBuffer(_buffer)
	_buffer.WriteString(`<!DOCTYPE html>
<html lang="en">
`)
	Head(ctx, _buffer)
	_buffer.WriteString(`
<body style="visibility: hidden;">
`)
	Navbar(ctx, _buffer)
	_buffer.WriteString(`
<div id="`)
	hero.EscapeHTML(util.KeyContent, _buffer)
	_buffer.WriteString(`" data-uk-height-viewport="expand: true">
`)
	for _, flash := range ctx.Flashes {
		cls, content := web.ParseFlash(flash)
		_buffer.WriteString(`
  <div class="alert-top `)
		hero.EscapeHTML(cls, _buffer)
		_buffer.WriteString(`" data-uk-alert>
    <a class="uk-alert-close" href="#" data-uk-close=""></a>
    <p>`)
		hero.EscapeHTML(content, _buffer)
		_buffer.WriteString(`</p>
  </div>
`)
	}
	_buffer.WriteString(`
<div class="uk-section uk-section-small">
  <div class="uk-container">
    <div class="uk-card uk-card-body">
      <h3 class="uk-card-title">
        <span class="h3-icon" data-uk-icon="icon: lock;"></span>
        Authorization Error`)
	if len(errors) > 1 {
		_buffer.WriteString(`s`)
	}
	_buffer.WriteString(`
      </h3>
      `)
	if len(errors) > 0 {
		_buffer.WriteString(`
        <ul class="uk-list uk-list-divider">
          `)
		PermissionTeamError(svc, errors.FindByProvider(util.SvcTeam.Key), ctx, _buffer)
		PermissionSprintError(svc, errors.FindByProvider(util.SvcSprint.Key), ctx, _buffer)
		for _, p := range auth.AllProviders {
			PermissionProviderError(svc, p, errors.FindByProvider(p.Key), auths.FindByProvider(p.Key), ctx, _buffer)
		}
		_buffer.WriteString(`
        </ul>
      `)
	}
	_buffer.WriteString(`
    </div>
    <!--
    <div class="uk-card uk-card-body uk-margin-top">
      <h3 class="uk-card-title">Details</h3>
      <pre>`)
	hero.EscapeHTML(util.ToJSON(errors), _buffer)
	_buffer.WriteString(`</pre>
    </div>
    -->
  </div>
</div>
`)

	_buffer.WriteString(`
</div>
<script>window.addEventListener("load", function() { dom.initDom('`)
	hero.EscapeHTML(ctx.Profile.Theme.String(), _buffer)
	_buffer.WriteString(`'); }, false)</script>
</body>
</html>
`)
	return w.Write(_buffer.Bytes())

}
