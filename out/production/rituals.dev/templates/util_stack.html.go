// Code generated by hero.
// source: github.com/kyleu/rituals.dev/web/templates/util/stack.html
// DO NOT EDIT!
package templates

import (
	"bytes"
	"strings"

	"github.com/kyleu/rituals.dev/app/util"
	"github.com/kyleu/rituals.dev/app/web"
	"github.com/shiyanhui/hero"
)

func ErrorStack(ed *util.ErrorDetail, ctx web.RequestContext, buffer *bytes.Buffer) {
	if ed.StackTrace != nil {
		buffer.WriteString(`
  <div class="uk-margin-top">
    <div class="uk-card uk-card-body">
      <table class="uk-table uk-table-divider">
        <tbody>
        `)
		for _, f := range util.TraceDetail(ed.StackTrace) {
			buffer.WriteString(`
        <tr>
          <td>
            `)
			if strings.Contains(f.Key, util.AppName) {
				buffer.WriteString(`
            <div class="error-key error-owned">`)
				hero.EscapeHTML(f.Key, buffer)
				buffer.WriteString(`</div>
            `)
			} else {
				buffer.WriteString(`
            <div class="error-key">`)
				hero.EscapeHTML(f.Key, buffer)
				buffer.WriteString(`</div>
            `)
			}
			buffer.WriteString(`
            <div class="error-location">`)
			hero.EscapeHTML(f.Loc, buffer)
			buffer.WriteString(`</div>
          </td>
        </tr>
        `)
		}
		buffer.WriteString(`
        </tbody>
      </table>
    </div>
  </div>
`)
	}

}
