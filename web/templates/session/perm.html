<%: func ComponentSessionPerm(svc util.Service, showTeam bool, showSprint bool, auths auth.Records, ctx web.RequestContext, buffer *bytes.Buffer) %>
<div class="uk-margin">
  <label class="uk-form-label" for="model-perm-form">Permissions</label>
  <div id="model-perm-form">
    <ul class="uk-list">
      <% if showTeam { %>
        <li id="perm-team-section">
          <label>
            <input id="perm-team-checkbox" class="uk-checkbox uk-margin-small-right" type="checkbox" />Must be a member of this <%= svc.Key %>'s <%= util.SvcTeam.Key %>
          </label>
        </li>
      <% } %>
      <% if showSprint { %>
        <li id="perm-sprint-section">
          <label>
            <input id="perm-sprint-checkbox" class="uk-checkbox uk-margin-small-right" type="checkbox" />Must be a member of this <%= svc.Key %>'s <%= util.SvcSprint.Key %>
          </label>
        </li>
      <% } %>
      <% if ctx.App.Auth.Enabled { %>
        <% for _, p := range ctx.App.Auth.EnabledProviders { %>
          <%
            cls := "uk-checkbox uk-margin-small-right perm-" + p.Key + "-email"
            oc := "permission.onChanged('email', '" + p.Key + "', this.checked)"
            a := auths.FindByProvider(p.Key)

            style := "display: none;"
            if len(a) > 0 {
              style = "display: block;"
            }
          %>
          <li id="perm-<%= p.Key %>-section" style="<%= style %>">
            <label>
              <input id="perm-<%= p.Key %>-checkbox" class="uk-checkbox uk-margin-small-right" onchange="permission.onChanged('provider', '<%= p.Key %>', this.checked)" type="checkbox" />Must sign in with <%= p.Title %>
            </label>
            <div id="perm-<%= p.Key %>-email-container">
              <ul>
                <% for _, e := range a.Emails() { %>
                  <% domain := util.GetDomain(e) %>
                  <li>
                    <label>
                      <input class="<%= cls %>" type="checkbox" value="<%= domain %>" onchange="<%= oc %>" />
                      Using email address <%= domain %>
                    </label>
                  </li>
                <% } %>
              </ul>
            </div>
          </li>
        <% } %>
      <% } %>
    </ul>
  </div>
</div>
