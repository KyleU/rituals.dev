var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(b){return b.raw=b};$jscomp.createTemplateTagFirstArgWithRaw=function(b,e){b.raw=e;return b};$jscomp.arrayIteratorImpl=function(b){var e=0;return function(){return e<b.length?{done:!1,value:b[e++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var e="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return e?e.call(b):$jscomp.arrayIterator(b)};
$jscomp.arrayFromIterator=function(b){for(var e,a=[];!(e=b.next()).done;)a.push(e.value);return a};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};$jscomp.findInternal=function(b,e,a){b instanceof String&&(b=String(b));for(var c=b.length,d=0;d<c;d++){var f=b[d];if(e.call(a,f,d,b))return{i:d,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,a){b!=Array.prototype&&b!=Object.prototype&&(b[e]=a.value)};$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,b];for(var e=0;e<b.length;++e){var a=b[e];if(a&&a.Math==Math)return a}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,e,a,c){if(e){a=$jscomp.global;b=b.split(".");for(c=0;c<b.length-1;c++){var d=b[c];d in a||(a[d]={});a=a[d]}b=b[b.length-1];c=a[b];e=e(c);e!=c&&null!=e&&$jscomp.defineProperty(a,b,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6","es3");
$jscomp.checkStringArgs=function(b,e,a){if(null==b)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(b,a){var c=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===a&&(a=c.length);a=Math.max(0,Math.min(a|0,c.length));for(var d=b.length;0<d&&0<a;)if(c[--a]!=b[--d])return!1;return 0>=d}},"es6","es3");var action;
(function(b){b.loadActions=function(){socket.send({svc:services.system.key,cmd:command.client.getActions,param:null})};b.viewActions=function(e){dom.setContent("#action-list",b.renderActions(e))}})(action||(action={}));var auth;(function(b){b.allProviders=[{key:"github",title:"GitHub"},{key:"google",title:"Google"},{key:"slack",title:"Slack"},{key:"facebook",title:"Facebook"},{key:"amazon",title:"Amazon"},{key:"microsoft",title:"Microsoft"}]})(auth||(auth={}));var collection;
(function(b){var e=function(a){this.members=[];this.key=a};b.Group=e;b.groupBy=function(a,c){var d=[],b;a&&a.forEach(function(a){var f=c(a);b||(b=new e(f));f!=b.key&&(d.push(b),b=new e(f));b.members.push(a)});b&&d.push(b);return d};b.findGroup=function(a,c){a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())if(d=d.value,d.key===c)return d.members;return[]};b.flatten=function(a){var c=[];a.forEach(function(d){return c.push.apply(c,$jscomp.arrayFromIterable(d))});return c}})(collection||
(collection={}));var command;
(function(b){b.client={error:"error",ping:"ping",connect:"connect",updateSession:"update-session",getActions:"get-actions",getTeams:"get-teams",getSprints:"get-sprints",updateProfile:"update-profile",removeMember:"remove-member",addStory:"add-story",updateStory:"update-story",removeStory:"remove-story",setStoryStatus:"set-story-status",submitVote:"submit-vote",addReport:"add-report",updateReport:"update-report",removeReport:"remove-report",addFeedback:"add-feedback",updateFeedback:"update-feedback",removeFeedback:"remove-feedback"};
b.server={error:"error",pong:"pong",sessionJoined:"session-joined",sessionUpdate:"session-update",permissionsUpdate:"permissions-update",teamUpdate:"team-update",sprintUpdate:"sprint-update",contentUpdate:"content-update",actions:"actions",teams:"teams",sprints:"sprints",memberUpdate:"member-update",onlineUpdate:"online-update",storyUpdate:"story-update",storyRemove:"story-remove",storyStatusChange:"story-status-change",voteUpdate:"vote-update",reportUpdate:"report-update",reportRemove:"report-remove",
feedbackUpdate:"feedback-update",feedbackRemove:"feedback-remove"}})(command||(command={}));var contents;(function(b){b.onContentDisplay=function(b,a,c,d){dom.setDisplay("#modal-"+b+" .content-edit",a);dom.setDisplay("#modal-"+b+" .buttons-edit",a);dom.setHTML(dom.setDisplay("#modal-"+b+" .content-view",!a),a?d:"");dom.setDisplay("#modal-"+b+" .buttons-view",!a);b=dom.req("#"+b+"-edit-content");dom.setValue(b,a?c:"");a&&dom.wireTextarea(b)}})(contents||(contents={}));var date;
(function(b){function e(d){return d.toLocaleDateString()}function a(d){return d.toLocaleTimeString().slice(0,8)}b.dateToYMD=function(d){var a=d.getDate(),c=d.getMonth()+1;return d.getFullYear()+"-"+(9>=c?"0"+c:c)+"-"+(9>=a?"0"+a:a)};b.dateFromYMD=function(d){d=new Date(d);return new Date(d.getTime()+6E4*d.getTimezoneOffset())};b.dow=function(d){switch(d){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return"???"}};
b.toDateString=e;b.toTimeString=a;b.toDateTimeString=function(d){return e(d)+" "+a(d)};var c=6E4*(new Date).getTimezoneOffset();b.utcDate=function(d){return new Date(Date.parse(d)+c)}})(date||(date={}));var dom;
(function(b){function e(d,a){return UIkit.util.$$(d,a)}function a(d,a){return e(d,a).shift()}function c(d,c){(c=a(d,c))||console.warn("no element found for selector ["+d+"]");return c}b.initDom=function(d){style.setTheme(d);document.body.style.visibility="visible"};b.els=e;b.opt=a;b.req=c;b.setHTML=function(d,a){"string"===typeof d&&(d=c(d));d.innerHTML=a;return d};b.setDisplay=function(d,a,b){b=void 0===b?"block":b;"string"===typeof d&&(d=c(d));d.style.display=a?b:"none";return d};b.setContent=function(a,
b){"string"===typeof a&&(a=c(a));a.innerHTML="";a.appendChild(b);return a};b.setText=function(a,b){"string"===typeof a&&(a=c(a));a.innerText=b;return a};b.setValue=function(a,b){"string"===typeof a&&(a=c(a));a.value=b;return a};b.wireTextarea=function(a){function b(){a.style.height="auto";a.style.height=(64>a.scrollHeight?64:a.scrollHeight+6)+"px"}function c(){window.setTimeout(b,0)}a.dataset.autoresize||(a.dataset.autoresize="true",a.addEventListener("change",b,!1),a.addEventListener("cut",c,!1),
a.addEventListener("paste",c,!1),a.addEventListener("drop",c,!1),a.addEventListener("keydown",c,!1),a.focus(),a.select());b()};b.setOptions=function(a,b){"string"===typeof a&&(a=c(a));a.innerHTML="";b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next()){d=d.value;var f=document.createElement("option");f.value=d;f.innerText=d;a.appendChild(f)}};b.setSelectOption=function(a,b){"string"===typeof a&&(a=c(a));for(var d=0;d<a.children.length;d++){var f=a.children.item(d);f.selected=f.value===
b}}})(dom||(dom={}));var estimate;
(function(b){function e(a){b.cache.detail=a;dom.setValue("#model-choices-input",a.choices.join(", "));story.viewActiveStory();rituals.setDetail(a)}function a(a){var c=d(a.id);c.push(a);a.id===b.cache.activeStory&&dom.setText("#story-title",a.title);story.setStories(c)}function c(a){var c=d(a);story.setStories(c);a===b.cache.activeStory&&UIkit.modal("#modal-story").hide();UIkit.notification("story has been deleted",{status:"success",pos:"top-right"})}function d(a){return b.cache.stories.filter(function(b){return b.id!==a})}
var f=function(){this.stories=[];this.votes=[]};f.prototype.activeVotes=function(){var a=this;return this.activeStory?this.votes.filter(function(b){return b.storyID===a.activeStory}):[]};b.cache=new f;b.onEstimateMessage=function(d,f){switch(d){case command.server.error:rituals.onError(services.estimate.key,f);break;case command.server.sessionJoined:rituals.onSessionJoin(f);rituals.setTeam(f.team);rituals.setSprint(f.sprint);e(f.session);story.setStories(f.stories);vote.setVotes(f.votes);rituals.showWelcomeMessage(f.members.length);
break;case command.server.sessionUpdate:e(f);break;case command.server.permissionsUpdate:system.setPermissions(f);break;case command.server.teamUpdate:b.cache.detail&&(b.cache.detail.teamID=null===f||void 0===f?void 0:f.id);rituals.setTeam(f);break;case command.server.sprintUpdate:b.cache.detail&&(b.cache.detail.sprintID=null===f||void 0===f?void 0:f.id);rituals.setSprint(f);break;case command.server.storyUpdate:a(f);break;case command.server.storyRemove:c(f);break;case command.server.storyStatusChange:story.onStoryStatusChange(f);
break;case command.server.voteUpdate:vote.onVoteUpdate(f);break;default:console.warn("unhandled command ["+d+"] for estimate")}};b.onSubmitEstimateSession=function(){var a=dom.req("#model-title-input").value,b=dom.req("#model-choices-input").value,c=dom.req("#model-team-select select").value,d=dom.req("#model-sprint-select select").value,f=permission.readPermissions();socket.send({svc:services.estimate.key,cmd:command.client.updateSession,param:{title:a,choices:b,teamID:c,sprintID:d,permissions:f}})};
b.onStoryUpdate=a;b.onStoryRemove=c})(estimate||(estimate={}));var events;
(function(b){b.openModal=function(b,a){switch(b){case "session":var c=dom.setValue("#model-title-input",dom.req("#model-title").innerText);setTimeout(function(){return c.focus()},250);team.refreshTeams();sprint.refreshSprints();break;case "self":var d=dom.setValue("#self-name-input",dom.req("#member-self .member-name").innerText);setTimeout(function(){return d.focus()},250);break;case "invitation":break;case "member":system.cache.activeMember=a;member.viewActiveMember();break;case "welcome":break;
case "actions":action.loadActions();break;case "add-story":var f=dom.setValue("#story-title-input","");setTimeout(function(){return f.focus()},250);break;case "story":estimate.cache.activeStory=a;story.viewActiveStory();break;case "add-report":dom.setValue("#report-date",date.dateToYMD(new Date));var e=dom.setValue("#report-content","");dom.wireTextarea(e);setTimeout(function(){return e.focus()},250);break;case "report":standup.cache.activeReport=a;report.viewActiveReport();var k=dom.req("#report-edit-content");
setTimeout(function(){dom.wireTextarea(k);k.focus()},250);break;case "add-feedback":dom.setSelectOption("#feedback-category",a);var h=dom.setValue("#feedback-content","");dom.wireTextarea(h);setTimeout(function(){return h.focus()},250);break;case "feedback":retro.cache.activeFeedback=a;feedback.viewActiveFeedback();var l=dom.req("#feedback-edit-content");setTimeout(function(){dom.wireTextarea(l);l.focus()},250);break;default:console.warn("unhandled modal ["+b+"]")}UIkit.modal("#modal-"+b).show();
return!1};b.hideModal=function(b){UIkit.modal("#modal-"+b).hide()}})(events||(events={}));var feedback;
(function(b){function e(){if(retro.cache.activeFeedback){var a=retro.cache.feedback.filter(function(a){return a.id===retro.cache.activeFeedback}).shift();a||console.warn("cannot load active Feedback ["+retro.cache.activeFeedback+"]");return a}}function a(a){return retro.cache.feedback.filter(function(b){return b.id!==a})}function c(a,b){feedback.setFeedback(a);b===retro.cache.activeFeedback&&UIkit.modal("#modal-feedback").hide()}b.setFeedback=function(a){retro.cache.feedback=a;dom.setContent("#feedback-detail",
b.renderFeedbackArray(a));UIkit.modal("#modal-add-feedback").hide()};b.onSubmitFeedback=function(){var a=dom.req("#feedback-category").value,b=dom.req("#feedback-content").value;socket.send({svc:services.retro.key,cmd:command.client.addFeedback,param:{category:a,content:b}});return!1};b.onEditFeedback=function(){var a=retro.cache.activeFeedback,b=dom.req("#feedback-edit-category").value,c=dom.req("#feedback-edit-content").value;socket.send({svc:services.retro.key,cmd:command.client.updateFeedback,
param:{id:a,category:b,content:c}});return!1};b.onRemoveFeedback=function(){var a=retro.cache.activeFeedback;a&&UIkit.modal.confirm("Delete this feedback?").then(function(){socket.send({svc:services.retro.key,cmd:command.client.removeFeedback,param:a});UIkit.modal("#modal-feedback").hide()});return!1};b.getActiveFeedback=e;b.viewActiveFeedback=function(){var a=system.cache.getProfile(),b=e();b?(a=b.authorID===a.userID,dom.setText("#feedback-title",b.category+" / "+system.getMemberName(b.authorID)),
dom.setSelectOption("#feedback-edit-category",a?b.category:void 0),contents.onContentDisplay("feedback",a,b.content,b.html)):console.warn("no active feedback")};b.onFeedbackUpdate=function(b){var d=a(b.id);d.push(b);c(d,b.id)};b.onFeedbackRemoved=function(b){var d=a(b);c(d,b);UIkit.notification("feedback has been deleted",{status:"success",pos:"top-right"})};b.getFeedbackCategories=function(a,b){var c=b.map(function(b){var c=a.filter(function(a){return a.category===b}).sort(function(a,b){return a.created>
b.created?-1:1});return{category:b,feedback:c}}),d=a.filter(function(a){return!b.find(function(b){return b===a.category})});0<d.length&&c.push({category:"unknown",feedback:d});return c}})(feedback||(feedback={}));
function JSX(b,e){var a=document.createElement(b),c;for(c in e)if(c&&e.hasOwnProperty(c)){var d=e[c];!0===d?a.setAttribute(c,c):!1!==d&&null!==d&&void 0!==d&&a.setAttribute(c,d.toString())}for(c=2;c<arguments.length;c++)d=arguments[c],Array.isArray(d)?d.forEach(function(b){a.appendChild(b)}):(d.nodeType||(d=document.createTextNode(d.toString())),a.appendChild(d));return a}var member;
(function(b){function e(a){var b;return a.userID===(null===(b=system.cache.profile)||void 0===b?void 0:b.userID)}function a(){var a=system.cache.members.filter(e).shift();a&&(dom.setText("#member-self .member-name",a.name),dom.setValue("#self-name-input",a.name),dom.setText("#member-self .member-role",a.role));a=system.cache.members.filter(function(a){return!e(a)});dom.setContent("#member-detail",b.renderMembers(a));c()}function c(){for(var a={},b=$jscomp.makeIterator(system.cache.members),c=b.next();!c.done;a=
{$jscomp$loop$prop$member$6$10:a.$jscomp$loop$prop$member$6$10},c=b.next())a.$jscomp$loop$prop$member$6$10=c.value,(c=dom.opt("#member-"+a.$jscomp$loop$prop$member$6$10.userID+" .online-indicator"))&&(system.cache.online.find(function(a){return function(b){return b===a.$jscomp$loop$prop$member$6$10.userID}}(a))?c.classList.remove("offline"):c.classList.add("offline"))}function d(){if(system.cache.activeMember){var a=system.cache.members.filter(function(a){return a.userID===system.cache.activeMember}).shift();
a&&console.warn("cannot load active member ["+system.cache.activeMember+"]");return a}console.warn("no active member")}b.setMembers=a;b.onMemberUpdate=function(b){var c;e(b)&&UIkit.modal("#modal-self").hide();var d=system.cache.members,f=d.filter(function(a){return a.userID===b.userID}).shift();f=(null===f||void 0===f?void 0:f.name)!==b.name;d=d.filter(function(a){return a.userID!==b.userID});d.length===system.cache.members.length&&UIkit.notification(b.name+" has joined",{status:"success",pos:"top-right"});
"::delete"===b.name?b.userID===(null===(c=system.cache.profile)||void 0===c?void 0:c.userID)?(UIkit.modal("#modal-self").hide(),UIkit.notification("you have left this "+system.cache.currentService,{status:"success",pos:"top-right"}),document.location.href="/"):UIkit.modal("#modal-member").hide():d.push(b);d.sort(function(a,b){return a.name>b.name?1:-1});system.cache.members=d;a();if(f)switch(system.cache.currentService){case services.estimate.key:estimate.cache.activeStory&&vote.viewVotes();break;
case services.standup.key:dom.setContent("#report-detail",report.renderReports(standup.cache.reports));standup.cache.activeReport&&report.viewActiveReport();break;case services.retro.key:dom.setContent("#feedback-detail",feedback.renderFeedbackArray(retro.cache.feedback)),retro.cache.activeFeedback&&feedback.viewActiveFeedback()}};b.onOnlineUpdate=function(a){a.connected?system.cache.online.find(function(b){return b===a.userID})||system.cache.online.push(a.userID):system.cache.online=system.cache.online.filter(function(b){return b!==
a.userID});c()};b.onSubmitSelf=function(){var a=dom.req("#self-name-input").value,b=dom.req("#self-name-choice-global").checked?"global":"local";socket.send({svc:services.system.key,cmd:command.client.updateProfile,param:{name:a,choice:b}})};b.viewActiveMember=function(){var a=d();a&&(dom.setText("#member-modal-name",a.name),dom.setText("#member-modal-role",a.role))};b.removeMember=function(a){a=void 0===a?system.cache.activeMember:a;var b;a||console.warn("cannot load active member ["+system.cache.activeMember+
"]");"self"==a&&(a=null===(b=system.cache.profile)||void 0===b?void 0:b.userID);confirm("Are you sure you wish to leave this "+system.cache.currentService+"?")&&socket.send({svc:system.cache.currentService,cmd:command.client.removeMember,param:a})}})(member||(member={}));var permission;
(function(b){function e(a){var b=dom.opt("#model-"+a+"-select select");if(b){var c=collection.findGroup(system.cache.permissions,a),d=dom.opt("#perm-"+a+"-section");d&&(dom.req("#perm-"+a+"-checkbox").checked=0<c.length,dom.setDisplay(d,""!=b.value));collection.findGroup(system.cache.permissions,a)}}function a(a,b){dom.els(".perm-"+a+"-email").forEach(function(a){a.disabled=!b;b||(a.checked=!1)})}function c(a){var c=collection.findGroup(system.cache.permissions,a.key),d=system.cache.auths.filter(function(b){return b.provider==
a.key});if(dom.opt("#perm-"+a.key+"-section")){dom.req("#perm-"+a.key+"-checkbox").checked=0<c.length;var e=dom.req("#perm-"+a.key+"-email-container"),h=collection.flatten(c.map(function(a){return a.v.split(",").filter(function(a){return 0<a.length})})).map(function(a){return{matched:!0,domain:a}});c=d.filter(function(a){return 0==h.filter(function(b){return a.email.endsWith(b.domain)}).length}).map(function(a){a=a.email;var b=a.lastIndexOf("@");a=-1==b?a:a.substr(b);return{matched:!1,domain:a}});
h.push.apply(h,$jscomp.arrayFromIterable(c));h.sort();dom.setDisplay(e,0<h.length);dom.setContent(e,0==h.length?document.createElement("span"):b.renderEmails(a.key,h))}}b.setPerms=function(){["team","sprint"].forEach(e);null!=system.cache.auths&&auth.allProviders.forEach(c)};b.setModelPerms=e;b.onChanged=function(b,c,e){switch(b){case "email":(b=dom.opt("#perm-"+c+"-checkbox"))&&e&&!b.checked&&(b.checked=!0);break;case "provider":return a(c,e)}}})(permission||(permission={}));var profile;
(function(b){b.setNavColor=function(b,a){dom.setValue("#nav-color",a);dom.req("#navbar").className=a+"-bg uk-navbar-container uk-navbar";document.querySelectorAll(".nav_swatch").forEach(function(a){a.classList.remove("active")});b.classList.add("active")};b.setLinkColor=function(b,a){dom.setValue("#link-color",a);dom.els(".profile-link").forEach(function(b){b.classList.forEach(function(c){-1<c.indexOf("-fg")&&b.classList.remove(c);b.classList.add(a+"-fg")})});document.querySelectorAll(".link_swatch").forEach(function(a){a.classList.remove("active")});
b.classList.add("active")}})(profile||(profile={}));var report;
(function(b){function e(){if(standup.cache.activeReport){var a=standup.cache.reports.filter(function(a){return a.id===standup.cache.activeReport}).shift();a||console.warn("cannot load active report ["+standup.cache.activeReport+"]");return a}console.warn("no active report")}b.onSubmitReport=function(){var a=dom.req("#report-date").value,b=dom.req("#report-content").value;socket.send({svc:services.standup.key,cmd:command.client.addReport,param:{d:a,content:b}});return!1};b.onEditReport=function(){var a=
dom.req("#report-edit-date").value,b=dom.req("#report-edit-content").value;socket.send({svc:services.standup.key,cmd:command.client.updateReport,param:{id:standup.cache.activeReport,d:a,content:b}});return!1};b.onRemoveReport=function(){var a=standup.cache.activeReport;a&&UIkit.modal.confirm("Delete this report?").then(function(){socket.send({svc:services.standup.key,cmd:command.client.removeReport,param:a});UIkit.modal("#modal-report").hide()});return!1};b.viewActiveReport=function(){var a=system.cache.getProfile(),
b=e();b?(dom.setText("#report-title",b.d+" / "+system.getMemberName(b.authorID)),a=b.authorID===a.userID,contents.onContentDisplay("report",a,b.content,b.html),dom.setValue(dom.req("#report-edit-date"),a?b.d:"")):console.warn("no active report")};b.setReports=function(a){standup.cache.reports=a;dom.setContent("#report-detail",b.renderReports(a));UIkit.modal("#modal-add-report").hide()};b.getReportDates=function(a){return a.map(function(a){return a.d}).filter(function(a,b,e){return e.indexOf(a)===
b}).sort().reverse().map(function(b){var c=a.filter(function(a){return a.d===b}).sort(function(a,b){return a.created>b.created?-1:1});return{d:b,reports:c}})}})(report||(report={}));var retro;
(function(b){function e(a){b.cache.detail=a;dom.setValue("#model-categories-input",a.categories.join(", "));dom.setOptions("#feedback-category",a.categories);dom.setOptions("#feedback-edit-category",a.categories);feedback.setFeedback(b.cache.feedback);rituals.setDetail(a)}b.cache=new function(){this.feedback=[]};b.onRetroMessage=function(a,c){switch(a){case command.server.error:rituals.onError(services.retro.key,c);break;case command.server.sessionJoined:rituals.onSessionJoin(c);rituals.setTeam(c.team);
rituals.setSprint(c.sprint);e(c.session);feedback.setFeedback(c.feedback);rituals.showWelcomeMessage(c.members.length);break;case command.server.sessionUpdate:e(c);break;case command.server.permissionsUpdate:system.setPermissions(c);break;case command.server.teamUpdate:b.cache.detail&&(b.cache.detail.teamID=null===c||void 0===c?void 0:c.id);rituals.setTeam(c);break;case command.server.sprintUpdate:b.cache.detail&&(b.cache.detail.sprintID=null===c||void 0===c?void 0:c.id);rituals.setSprint(c);break;
case command.server.feedbackUpdate:feedback.onFeedbackUpdate(c);break;case command.server.feedbackRemove:feedback.onFeedbackRemoved(c);break;default:console.warn("unhandled command ["+a+"] for retro")}};b.onSubmitRetroSession=function(){var a=dom.req("#model-title-input").value,b=dom.req("#model-categories-input").value,d=dom.req("#model-team-select select").value,e=dom.req("#model-sprint-select select").value,g=permission.readPermissions();socket.send({svc:services.retro.key,cmd:command.client.updateSession,
param:{title:a,categories:b,teamID:d,sprintID:e,permissions:g}})}})(retro||(retro={}));var rituals;
(function(b){function e(a,b){console.warn(a+": "+b);var c=b.lastIndexOf(":");-1<c&&(b=b.substr(c+1));UIkit.notification(a+" error: "+b,{status:"danger",pos:"top-right"})}b.onSocketMessage=function(a){debug&&(console.debug("message received"),console.debug(a));switch(a.svc){case services.system.key:var b=a.cmd;a=a.param;switch(b){case command.server.error:e("system",a);break;case command.server.actions:action.viewActions(a);break;case command.server.teams:team.viewTeams(a);break;case command.server.sprints:sprint.viewSprints(a);
break;case command.server.memberUpdate:member.onMemberUpdate(a);break;case command.server.onlineUpdate:member.onOnlineUpdate(a);break;default:console.warn("unhandled system message for command ["+b+"]")}break;case services.team.key:team.onTeamMessage(a.cmd,a.param);break;case services.sprint.key:sprint.onSprintMessage(a.cmd,a.param);break;case services.estimate.key:estimate.onEstimateMessage(a.cmd,a.param);break;case services.standup.key:standup.onStandupMessage(a.cmd,a.param);break;case services.retro.key:retro.onRetroMessage(a.cmd,
a.param);break;default:console.warn("unhandled message for service ["+a.svc+"]")}};b.setDetail=function(a){system.cache.session=a;document.title=a.title;dom.setText("#model-title",a.title);dom.setValue("#model-title-input",a.title);var b=dom.els("#navbar .uk-navbar-item");0<b.length&&(b[b.length-1].innerText=a.title);UIkit.modal("#modal-session").hide()};b.onError=e;b.onSessionJoin=function(a){system.cache.session=a.session;system.cache.profile=a.profile;system.cache.auths=a.auths;permission.applyPermissions(a.permissions);
permission.setPerms();system.cache.members=a.members;system.cache.online=a.online;member.setMembers()};b.init=function(a,b){window.onbeforeunload=function(){socket.setAppUnloading()};socket.socketConnect(a,b)};b.setSprint=function(a){UIkit.modal("#modal-session").hide();var b=dom.req("#sprint-link-container");b.innerHTML="";a&&(b.appendChild(sprint.renderSprintLink(a)),dom.req("#sprint-warning-name").innerText=a.title)};b.setTeam=function(a){UIkit.modal("#modal-session").hide();var b=dom.req("#team-link-container");
b.innerHTML="";a&&b.appendChild(team.renderTeamLink(a))};b.showWelcomeMessage=function(a){1===a&&setTimeout(function(){return events.openModal("welcome")},300)}})(rituals||(rituals={}));var services;
(function(b){b.system={key:"system",title:"System",plural:"systems",icon:"close"};b.team={key:"team",title:"Team",plural:"teams",icon:"users"};b.sprint={key:"sprint",title:"Sprint",plural:"sprints",icon:"git-fork"};b.estimate={key:"estimate",title:"Estimate Session",plural:"estimates",icon:"settings"};b.standup={key:"standup",title:"Daily Standup",plural:"standups",icon:"future"};b.retro={key:"retro",title:"Retrospective",plural:"retros",icon:"history"}})(services||(services={}));var socket;
(function(b){function e(){var a=document.location,b="ws";"https:"===a.protocol&&(b="wss");return b+("://"+a.host+"/s")}function a(a,b){system.cache.currentService=a;system.cache.currentID=b;system.cache.connectTime=Date.now();f=new WebSocket(e());f.onopen=function(){debug&&console.debug("socket connected");c({svc:a,cmd:command.client.connect,param:b})};f.onmessage=function(a){a=JSON.parse(a.data);rituals.onSocketMessage(a)};f.onerror=function(a){rituals.onError("socket",a.type)};f.onclose=function(){d()}}
function c(a){debug&&(console.debug("sending message"),console.debug(a));f.send(JSON.stringify(a))}function d(){function b(b){debug&&console.info("socket closed, reconnecting in "+b+" seconds");setTimeout(function(){a(system.cache.currentService,system.cache.currentID)},1E3*b)}g||b(10)}var f,g=!1;b.setAppUnloading=function(){g=!0};b.socketConnect=a;b.send=c})(socket||(socket={}));var sprint;
(function(b){function e(a){b.cache.detail=a;var c=a.startDate?date.utcDate(a.startDate):void 0,d=a.endDate?date.utcDate(a.endDate):void 0;dom.setContent("#sprint-date-display",b.renderSprintDates(c,d));dom.setValue("#sprint-start-date-input",c?date.dateToYMD(c):"");dom.setValue("#sprint-end-date-input",d?date.dateToYMD(d):"");rituals.setDetail(a)}b.cache=new function(){};b.onSprintMessage=function(a,c){switch(a){case command.server.error:rituals.onError(services.sprint.key,c);break;case command.server.sessionJoined:rituals.onSessionJoin(c);
e(c.session);rituals.setTeam(c.team);dom.setContent("#sprint-estimate-list",contents.renderContents(services.sprint,services.estimate,c.estimates));dom.setContent("#sprint-standup-list",contents.renderContents(services.sprint,services.standup,c.standups));dom.setContent("#sprint-retro-list",contents.renderContents(services.sprint,services.retro,c.retros));rituals.showWelcomeMessage(c.members.length);break;case command.server.teamUpdate:b.cache.detail&&(b.cache.detail.teamID=null===c||void 0===c?void 0:
c.id);rituals.setTeam(c);break;case command.server.sessionUpdate:e(c);break;case command.server.permissionsUpdate:system.setPermissions(c);break;case command.server.contentUpdate:socket.socketConnect(system.cache.currentService,system.cache.currentID);break;default:console.warn("unhandled command ["+a+"] for sprint")}};b.onSubmitSprintSession=function(){var a,b,d=dom.req("#model-title-input").value,e=dom.req("#model-team-select select").value,g=null===(a=dom.opt("#sprint-start-date-input"))||void 0===
a?void 0:a.value;a=null===(b=dom.opt("#sprint-end-date-input"))||void 0===b?void 0:b.value;b=permission.readPermissions();socket.send({svc:services.sprint.key,cmd:command.client.updateSession,param:{title:d,startDate:g,endDate:a,teamID:e,permissions:b}})};b.refreshSprints=function(){dom.opt("#model-sprint-select")&&socket.send({svc:services.system.key,cmd:command.client.getSprints,param:null})};b.viewSprints=function(a){var c,d=dom.opt("#model-sprint-container");d&&(dom.setDisplay(d,0<a.length),dom.setContent("#model-sprint-select",
b.renderSprintSelect(a,null===(c=system.cache.session)||void 0===c?void 0:c.sprintID)),permission.setModelPerms("sprint"))}})(sprint||(sprint={}));var standup;
(function(b){function e(a){return b.cache.reports.filter(function(b){return b.id!==a})}function a(a,d){report.setReports(a);d===b.cache.activeReport&&UIkit.modal("#modal-report").hide()}b.cache=new function(){this.reports=[]};b.onStandupMessage=function(c,d){switch(c){case command.server.error:rituals.onError(services.standup.key,d);break;case command.server.sessionJoined:rituals.onSessionJoin(d);rituals.setTeam(d.team);rituals.setSprint(d.sprint);c=d.session;b.cache.detail=c;rituals.setDetail(c);
report.setReports(d.reports);rituals.showWelcomeMessage(d.members.length);break;case command.server.sessionUpdate:b.cache.detail=d;rituals.setDetail(d);break;case command.server.permissionsUpdate:system.setPermissions(d);break;case command.server.teamUpdate:b.cache.detail&&(b.cache.detail.teamID=null===d||void 0===d?void 0:d.id);rituals.setTeam(d);break;case command.server.sprintUpdate:b.cache.detail&&(b.cache.detail.sprintID=null===d||void 0===d?void 0:d.id);rituals.setSprint(d);break;case command.server.reportUpdate:c=
e(d.id);c.push(d);a(c,d.id);break;case command.server.reportRemove:c=e(d);a(c,d);UIkit.notification("report has been deleted",{status:"success",pos:"top-right"});break;default:console.warn("unhandled command ["+c+"] for standup")}};b.onSubmitStandupSession=function(){var a=dom.req("#model-title-input").value,b=dom.req("#model-team-select select").value,e=dom.req("#model-sprint-select select").value,g=permission.readPermissions();socket.send({svc:services.standup.key,cmd:command.client.updateSession,
param:{title:a,teamID:b,sprintID:e,permissions:g}})}})(standup||(standup={}));var story;
(function(b){function e(a){function b(a,b){a.id.substr(a.id.lastIndexOf("-")+1)===b?a.classList.add("active"):a.classList.remove("active")}for(var c=$jscomp.makeIterator(dom.els(".story-status-body")),e=c.next();!e.done;e=c.next())b(e.value,a);c=$jscomp.makeIterator(dom.els(".story-status-actions"));for(e=c.next();!e.done;e=c.next())b(e.value,a);e="";switch(a){case "pending":e="Story";break;case "active":e="Voting";break;case "complete":e="Results"}dom.setText("#story-status",e);vote.viewVotes()}
function a(a,d,e,g){e&&"complete"===e.status&&0<e.finalVote.length&&(d=e.finalVote);dom.setContent("#story-"+a+" .story-status",b.renderStatus(d));g&&b.showTotalIfNeeded()}b.viewStoryStatus=e;b.requestStoryStatus=function(a){var c=b.getActiveStory();c&&socket.send({svc:services.estimate.key,cmd:command.client.setStoryStatus,param:{storyID:c.id,status:a}})};b.setStoryStatus=a;b.onStoryStatusChange=function(b){var c;estimate.cache.stories.forEach(function(a){a.id===b.storyID&&(c=a,a.finalVote=b.finalVote,
a.status=b.status)});a(b.storyID,b.status,c,!0);b.storyID===estimate.cache.activeStory&&e(b.status)}})(story||(story={}));
(function(b){function e(){if(estimate.cache.activeStory){var a=estimate.cache.stories.filter(function(a){return a.id===estimate.cache.activeStory}).shift();a&&console.warn("cannot load active story ["+estimate.cache.activeStory+"]");return a}}function a(){var a=0;estimate.cache.stories.filter(function(a){return"complete"===a.status}).map(function(a){return a.finalVote}).filter(function(a){return 0<a.length}).map(function(a){return parseFloat(a)}).filter(function(a){return!isNaN(a)}).forEach(function(b){return a+=
b});var d=dom.opt("#story-total"),e=dom.req("#story-list");void 0!==d&&e.removeChild(d);0<a&&e.appendChild(b.renderTotal(a))}b.setStories=function(c){estimate.cache.stories=c;dom.setContent("#story-detail",b.renderStories(c));c.forEach(function(a){return b.setStoryStatus(a.id,a.status,a,!1)});a();UIkit.modal("#modal-add-story").hide()};b.onSubmitStory=function(){var a=dom.req("#story-title-input").value;socket.send({svc:services.estimate.key,cmd:command.client.addStory,param:{title:a}});return!1};
b.beginEditStory=function(){var a=e(),b=prompt("Edit your story",a.title);b&&b!==a.title&&socket.send({svc:services.estimate.key,cmd:command.client.updateStory,param:{id:a.id,title:b}});return!1};b.onRemoveStory=function(){var a=estimate.cache.activeStory;a&&UIkit.modal.confirm("Delete this story?").then(function(){socket.send({svc:services.estimate.key,cmd:command.client.removeStory,param:a});UIkit.modal("#modal-story").hide()});return!1};b.getActiveStory=e;b.viewActiveStory=function(){var a=e();
a&&(dom.setText("#story-title",a.title),b.viewStoryStatus(a.status))};b.showTotalIfNeeded=a})(story||(story={}));var debug=!0,system;
(function(b){var e=function(){this.currentID=this.currentService="";this.connectTime=0;this.permissions=[];this.auths=[];this.members=[];this.online=[]};e.prototype.getProfile=function(){if(!this.profile)throw"no active profile";return this.profile};b.getMemberName=function(a){var c=b.cache.members.filter(function(b){return b.userID===a}).shift();return c?c.name:"{former member}"};b.cache=new e;b.setPermissions=function(a){permission.applyPermissions(a);permission.setPerms()};b.setAuths=function(a){b.cache.auths=
a;permission.setPerms()}})(system||(system={}));var team;
(function(b){b.cache=new function(){};b.onTeamMessage=function(e,a){switch(e){case command.server.error:rituals.onError(services.team.key,a);break;case command.server.sessionJoined:rituals.onSessionJoin(a);e=a.session;b.cache.detail=e;rituals.setDetail(e);dom.setContent("#team-sprint-list",contents.renderContents(services.team,services.sprint,a.sprints));dom.setContent("#team-estimate-list",contents.renderContents(services.team,services.estimate,a.estimates));dom.setContent("#team-standup-list",contents.renderContents(services.team,
services.standup,a.standups));dom.setContent("#team-retro-list",contents.renderContents(services.team,services.retro,a.retros));rituals.showWelcomeMessage(a.members.length);break;case command.server.sessionUpdate:b.cache.detail=a;rituals.setDetail(a);break;case command.server.permissionsUpdate:system.setPermissions(a);break;case command.server.contentUpdate:socket.socketConnect(system.cache.currentService,system.cache.currentID);break;default:console.warn("unhandled command ["+e+"] for team")}};b.onSubmitTeamSession=
function(){var b=dom.req("#model-title-input").value,a=permission.readPermissions();socket.send({svc:services.team.key,cmd:command.client.updateSession,param:{title:b,permissions:a}})};b.refreshTeams=function(){dom.opt("#model-team-select")&&socket.send({svc:services.system.key,cmd:command.client.getTeams,param:null})};b.viewTeams=function(e){var a,c=dom.opt("#model-team-container");c&&(dom.setDisplay(c,0<e.length),dom.setContent("#model-team-select",b.renderTeamSelect(e,null===(a=system.cache.session)||
void 0===a?void 0:a.teamID)),permission.setModelPerms("team"))}})(team||(team={}));var style;
(function(b){function e(a){var b=dom.els(".uk-card");switch(a){case "default":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):e("light");break;case "light":document.documentElement.classList.remove("uk-light");document.body.classList.remove("uk-light");document.documentElement.classList.add("uk-dark");document.body.classList.add("uk-dark");b.forEach(function(a){a.classList.add("uk-card-default");a.classList.remove("uk-card-secondary")});break;case "dark":document.documentElement.classList.add("uk-light");
document.body.classList.add("uk-light");document.documentElement.classList.remove("uk-dark");document.body.classList.remove("uk-dark");b.forEach(function(a){a.classList.remove("uk-card-default");a.classList.add("uk-card-secondary")});break;default:console.warn("invalid theme")}}b.setTheme=e})(style||(style={}));var vote;
(function(b){function e(){var a,c=story.getActiveStory();if(c){var d=estimate.cache.activeVotes(),e=d.filter(function(a){return a.userID===system.cache.getProfile().userID}).pop();switch(c.status){case "pending":c=(null===(a=system.cache.profile)||void 0===a?void 0:a.userID)===c.authorID;dom.setDisplay("#story-edit-section",c);dom.setDisplay("#story-view-section",!c);break;case "active":dom.setContent("#story-vote-members",b.renderVoteMembers(system.cache.members,d));dom.setContent("#story-vote-choices",
b.renderVoteChoices(estimate.cache.detail.choices,null===e||void 0===e?void 0:e.choice));break;case "complete":dom.setContent("#story-vote-results",b.renderVoteResults(system.cache.members,d));dom.setContent("#story-vote-summary",b.renderVoteSummary(d));break;default:console.warn("invalid story status ["+c.status+"]")}}}b.setVotes=function(a){estimate.cache.votes=a;e()};b.onVoteUpdate=function(a){var b=estimate.cache.votes;b=b.filter(function(a){return a.userID!==a.userID||a.storyID!==a.storyID});
b.push(a);estimate.cache.votes=b;a.storyID===estimate.cache.activeStory&&e()};b.viewVotes=e;b.onSubmitVote=function(a){socket.send({svc:services.estimate.key,cmd:command.client.submitVote,param:{storyID:estimate.cache.activeStory,choice:a}})};b.getVoteResults=function(a){a=a.map(function(a){a=parseFloat(a.choice);return isNaN(a)?-1:a}).filter(function(a){return-1!==a}).sort();var b=a.length,d=Math.min.apply(Math,$jscomp.arrayFromIterable(a)),e=Math.max.apply(Math,$jscomp.arrayFromIterable(a)),g=a.reduce(function(a,
b){return a+b},0),k=a.reduce(function(a,b){var c=a.numMapping[b]=(a.numMapping[b]||0)+1;c>a.greatestFreq&&(a.greatestFreq=c,a.mode=b);return a},{mode:null,greatestFreq:-Infinity,numMapping:{}}).mode;return{count:b,min:d,max:e,sum:g,mean:0===b?0:g/b,median:0===b?0:a[Math.floor(a.length/2)],mode:0===b?0:k}}})(vote||(vote={}));
(function(b){b.renderActions=function(b){return 0===b.length?JSX("div",null,"No actions available"):JSX("table",{class:"uk-table uk-table-divider uk-text-left"},JSX("thead",null,JSX("tr",null,JSX("th",null,"Author"),JSX("th",null,"Act"),JSX("th",null,"Content"),JSX("th",null,"Note"),JSX("th",null,"Created"))),JSX("tbody",null,b.map(function(a){var b=JSON.stringify(a.content,null,2);return JSX("tr",null,JSX("td",null,system.getMemberName(a.authorID)),JSX("td",null,a.act),JSX("td",null,"null"===b?"":
JSX("pre",null,b)),JSX("td",null,a.note),JSX("td",{class:"uk-table-shrink uk-text-nowrap"},date.toDateTimeString(new Date(a.created))))})))}})(action||(action={}));
(function(b){function e(a,b){return b.map(function(b){return{svc:a,session:b}})}b.renderContents=function(a,b,d){d=e(b,d);d.sort(function(a,b){return a.session.created>b.session.created?-1:1});return 0===d.length?JSX("div",null,"No "+b.plural+" in this "+a.key):JSX("table",{class:"uk-table uk-table-divider uk-text-left"},JSX("tbody",null,d.map(function(a){var b=a.svc;a=a.session;var c=system.cache.getProfile();return JSX("tr",null,JSX("td",null,JSX("a",{class:c.linkColor+"-fg",href:"/"+b.key+"/"+
a.slug},a.title)),JSX("td",{class:"uk-table-shrink uk-text-nowrap"},system.getMemberName(a.owner)),JSX("td",{class:"uk-table-shrink uk-text-nowrap"},date.toDateTimeString(new Date(a.created))))})))}})(contents||(contents={}));
(function(b){b.renderFeedbackArray=function(e){var a;if(0===e.length)return JSX("div",null,JSX("button",{class:"uk-button uk-button-default",onclick:"events.openModal('add-feedback');",type:"button"},"Add Feedback"));e=b.getFeedbackCategories(e,(null===(a=retro.cache.detail)||void 0===a?void 0:a.categories)||[]);var c=system.cache.getProfile();return JSX("div",{class:"uk-grid-small uk-grid-match uk-child-width-expand@m uk-grid-divider","data-uk-grid":!0},e.map(function(a){return JSX("div",{class:"feedback-list uk-transition-toggle"},
JSX("div",{class:"feedback-category-header"},JSX("span",{class:"right"},JSX("a",{class:c.linkColor+"-fg uk-icon-button uk-transition-fade","data-uk-icon":"plus",onclick:"events.openModal('add-feedback', '"+a.category+"');",title:"edit feedback"})),JSX("span",{class:"feedback-category-title",onclick:"events.openModal('add-feedback', '"+a.category+"');"},a.category)),JSX("div",null,a.feedback.map(function(a){var b=system.cache.getProfile();b=JSX("div",{id:"feedback-"+a.id,class:"feedback-detail uk-border-rounded section",
onclick:"events.openModal('feedback', '"+a.id+"');"},JSX("a",{class:b.linkColor+"-fg section-link"},system.getMemberName(a.authorID)),JSX("div",{class:"feedback-content"},"loading..."));0<a.html.length&&(dom.setHTML(dom.req(".feedback-content",b),a.html).style.display="block");return JSX("div",null,b)})))}))}})(feedback||(feedback={}));
(function(b){b.renderMembers=function(b){return 0===b.length?JSX("div",null,JSX("button",{class:"uk-button uk-button-default",onclick:"events.openModal('invitation');",type:"button"},"Invite Members")):JSX("ul",{class:"uk-list uk-list-divider"},b.map(function(a){var b={id:"member-"+a.userID},d=system.cache.getProfile();a=JSX("div",{class:"section",onclick:"events.openModal('member', '"+a.userID+"');"},JSX("div",{title:"user is offline",class:"right uk-article-meta online-indicator"},"offline"),JSX("div",
{class:d.linkColor+"-fg section-link"},a.name));return JSX("li",b,a)}))}})(member||(member={}));
(function(b){function e(a){var b=dom.opt("#perm-"+a+"-checkbox");if(!b||!b.checked)return[];b=dom.els(".perm-"+a+"-email").filter(function(a){return a.checked}).map(function(a){return a.value}).join(",");return[{k:a,v:b,access:"member"}]}b.renderEmails=function(a,b){var c="uk-checkbox uk-margin-small-right perm-"+a+"-email",e="permission.onChanged('email', '"+a+"', this.checked)";return JSX("ul",null,b.map(function(a){return JSX("li",null,JSX("label",null,a.matched?JSX("input",{class:c,type:"checkbox",
value:a.domain,checked:"checked",onchange:e}):JSX("input",{class:c,type:"checkbox",value:a.domain,onchange:e}),"Using email address ",a.domain))}))};b.readPermissions=function(){var a=[];a.push.apply(a,$jscomp.arrayFromIterable(e("team")));a.push.apply(a,$jscomp.arrayFromIterable(e("sprint")));a.push.apply(a,$jscomp.arrayFromIterable(e("github")));a.push.apply(a,$jscomp.arrayFromIterable(e("google")));a.push.apply(a,$jscomp.arrayFromIterable(e("slack")));a.push.apply(a,$jscomp.arrayFromIterable(e("facebook")));
a.push.apply(a,$jscomp.arrayFromIterable(e("amazon")));a.push.apply(a,$jscomp.arrayFromIterable(e("microsoft")));return a};b.applyPermissions=function(a){system.cache.permissions=collection.groupBy(a,function(a){return a.k});dom.setDisplay("#public-link-container",null===a||0===a.length);dom.setDisplay("#private-link-container",null!==a&&0<a.length)}})(permission||(permission={}));
(function(b){b.renderReports=function(e){if(0===e.length)return JSX("div",null,JSX("button",{class:"uk-button uk-button-default",onclick:"events.openModal('add-report');",type:"button"},"Add Report"));e=b.getReportDates(e);return JSX("ul",{class:"uk-list"},e.map(function(a){return JSX("li",{id:"report-date-"+a.d},JSX("h5",null,JSX("div",{class:"right uk-article-meta"},date.dow(date.dateFromYMD(a.d).getDay())),date.toDateString(date.dateFromYMD(a.d))),JSX("ul",null,a.reports.map(function(a){var b=
system.cache.getProfile();b=JSX("div",{id:"report-"+a.id,class:"report-detail uk-border-rounded section",onclick:"events.openModal('report', '"+a.id+"');"},JSX("a",{class:b.linkColor+"-fg section-link"},system.getMemberName(a.authorID)),JSX("div",{class:"report-content"},"loading..."));0<a.html.length&&(dom.setHTML(dom.req(".report-content",b),a.html).style.display="block");return JSX("li",null,b)})))}))}})(report||(report={}));
(function(b){b.renderSprintDates=function(b,a){function c(a,b){return JSX("span",null,a," ",JSX("span",{class:"sprint-date",onclick:"events.openModal('session');"},b?date.toDateString(b):""))}var d=c("starts",b),e=c("ends",a);return b?a?JSX("span",null,d,", ",e):d:a?e:JSX("span",null,"Sprint")};b.renderSprintLink=function(b){var a=system.cache.getProfile();return JSX("span",null,JSX("a",{class:a.linkColor+"-fg",href:"/sprint/"+b.slug},b.title),"\u00a0")};b.renderSprintSelect=function(b,a){return JSX("select",
{class:"uk-select",onchange:"permission.setModelPerms('sprint')"},JSX("option",{value:""},"- no sprint -"),b.map(function(b){return b.id===a?JSX("option",{selected:"selected",value:b.id},b.title):JSX("option",{value:b.id},b.title)}))}})(sprint||(sprint={}));
(function(b){b.renderStories=function(b){return 0===b.length?JSX("div",{id:"story-list"},JSX("button",{class:"uk-button uk-button-default",onclick:"events.openModal('add-story');",type:"button"},"Add Story")):JSX("ul",{id:"story-list",class:"uk-list uk-list-divider"},b.map(function(a){var b=system.cache.getProfile();return JSX("li",{id:"story-"+a.id,class:"section",onclick:"events.openModal('story', '"+a.id+"');"},JSX("div",{class:"right uk-article-meta story-status"},a.status),JSX("div",{class:b.linkColor+
"-fg section-link"},a.title))}))};b.renderStatus=function(b){switch(b){case "pending":return JSX("span",null,b);case "active":return JSX("span",null,b);default:return JSX("span",{class:"vote-badge uk-border-rounded"},b)}};b.renderTotal=function(b){return JSX("li",{id:"story-total"},JSX("div",{class:"right uk-article-meta"},JSX("span",{class:"vote-badge uk-border-rounded"},b))," Total")}})(story||(story={}));
(function(b){b.renderTeamLink=function(b){var a=system.cache.getProfile();return JSX("span",null," in ",JSX("a",{class:a.linkColor+"-fg",href:"/team/"+b.slug},b.title))};b.renderTeamSelect=function(b,a){return JSX("select",{class:"uk-select",onchange:"permission.setModelPerms('team')"},JSX("option",{value:""},"- no team -"),b.map(function(b){return b.id===a?JSX("option",{selected:"selected",value:b.id},b.title):JSX("option",{value:b.id},b.title)}))}})(team||(team={}));
(function(b){function e(a,b){return JSX("div",{class:"vote-member",title:a.name+" has "+(b?"voted":"not voted")},JSX("div",null,JSX("span",{"data-uk-icon":"icon: "+(b?"check":"minus")+"; ratio: 1.6"})),a.name)}function a(a,b){return b?JSX("div",{class:"vote-result"},JSX("div",null,JSX("span",{class:"uk-border-circle"},b))," ",a.name):JSX("div",{class:"vote-result"},JSX("div",null,JSX("span",{class:"uk-border-circle"},JSX("span",{"data-uk-icon":"icon: minus; ratio: 1.6"})))," ",a.name)}b.renderVoteMembers=
function(a,b){return JSX("div",{class:"uk-flex uk-flex-wrap uk-flex-around"},a.map(function(a){return e(a,0<b.filter(function(b){return b.userID===a.userID}).length)}))};b.renderVoteChoices=function(a,b){return JSX("div",{class:"uk-flex uk-flex-wrap uk-flex-center"},a.map(function(a){return JSX("div",{class:"vote-choice uk-border-circle uk-box-shadow-hover-medium"+(a===b?" active "+system.cache.getProfile().linkColor+"-border":""),onclick:"vote.onSubmitVote('"+a+"');"},a)}))};b.renderVoteResults=
function(b,d){return JSX("div",{class:"uk-flex uk-flex-wrap uk-flex-around"},b.map(function(b){var c=d.filter(function(a){return a.userID===b.userID});return a(b,0<c.length?c[0].choice:void 0)}))};b.renderVoteSummary=function(a){function c(a){return a.toString().substr(0,4)}var e=b.getVoteResults(a);return JSX("div",{class:"uk-flex uk-flex-wrap uk-flex-center result-container"},JSX("div",{class:"result"},JSX("div",{class:"secondary uk-border-circle"},c(e.count)," / ",c(a.length))," ",JSX("div",null,
"votes counted")),JSX("div",{class:"result"},JSX("div",{class:"secondary uk-border-circle"},c(e.min),"-",c(e.max))," ",JSX("div",null,"vote range")),JSX("div",{class:"result mean-result"},JSX("div",{class:"mean uk-border-circle "+system.cache.getProfile().linkColor+"-border"},c(e.mean))," ",JSX("div",null,"average")),JSX("div",{class:"result"},JSX("div",{class:"secondary uk-border-circle"},c(e.median))," ",JSX("div",null,"median")),JSX("div",{class:"result"},JSX("div",{class:"secondary uk-border-circle"},
c(e.mode))," ",JSX("div",null,"mode")))}})(vote||(vote={}));
