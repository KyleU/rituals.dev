var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,d){a.raw=d;return a};$jscomp.arrayIteratorImpl=function(a){var d=0;return function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var d="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var d,c=[];!(d=a.next()).done;)c.push(d.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var d=0;d<a.length;++d){var c=a[d];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},d=Object.create(new $jscomp.global.Proxy(a,{get:function(c,b,e){return c==a&&"q"==b&&e==d}}));return!0===d.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,c){a!=Array.prototype&&a!=Object.prototype&&(a[d]=c.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,d){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+d++,c)}var d=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};
$jscomp.polyfill=function(a,d,c,b){if(d){c=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var e=a[b];e in c||(c[e]={});c=c[e]}a=a[a.length-1];b=c[a];d=d(b);d!=b&&null!=d&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("WeakMap",function(a){function d(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),e=new a([[b,2],[c,3]]);if(2!=e.get(b)||3!=e.get(c))return!1;e.delete(b);e.set(c,4);return!e.has(b)&&4==e.get(c)}catch(l){return!1}}function c(){}function b(b){var a=typeof b;return"object"===a&&null!==b||"function"===a}function e(b){if(!$jscomp.owns(b,g)){var a=new c;$jscomp.defineProperty(b,g,{value:a})}}function f(b){var a=Object[b];a&&(Object[b]=function(b){if(b instanceof
c)return b;e(b);return a(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(d())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0,k=function(b){this.id_=(h+=Math.random()+1).toString();if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};k.prototype.set=function(a,c){if(!b(a))throw Error("Invalid WeakMap key");e(a);if(!$jscomp.owns(a,g))throw Error("WeakMap key fail: "+
a);a[g][this.id_]=c;return this};k.prototype.get=function(a){return b(a)&&$jscomp.owns(a,g)?a[g][this.id_]:void 0};k.prototype.has=function(a){return b(a)&&$jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)};k.prototype.delete=function(a){return b(a)&&$jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)?delete a[g][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function d(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var e=c.entries(),d=e.next();if(d.done||d.value[0]!=b||"s"!=d.value[1])return!1;d=e.next();return d.done||4!=d.value[0].x||"t"!=d.value[1]||!e.next().done?!1:!0}catch(l){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(d())return a;$jscomp.initSymbolIterator();var c=new WeakMap,b=function(b){this.data_={};this.head_=g();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};b.prototype.set=function(b,a){b=0===b?0:b;var c=e(this,b);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=a:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,
value:a},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};b.prototype.delete=function(b){b=e(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};b.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};b.prototype.has=function(b){return!!e(this,b).entry};
b.prototype.get=function(b){return(b=e(this,b).entry)&&b.value};b.prototype.entries=function(){return f(this,function(b){return[b.key,b.value]})};b.prototype.keys=function(){return f(this,function(b){return b.key})};b.prototype.values=function(){return f(this,function(b){return b.value})};b.prototype.forEach=function(b,a){for(var c=this.entries(),e;!(e=c.next()).done;)e=e.value,b.call(a,e[1],e[0],this)};b.prototype[Symbol.iterator]=b.prototype.entries;var e=function(b,a){var e=a&&typeof a;"object"==
e||"function"==e?c.has(a)?e=c.get(a):(e=""+ ++h,c.set(a,e)):e="p_"+a;var d=b.data_[e];if(d&&$jscomp.owns(b.data_,e))for(b=0;b<d.length;b++){var f=d[b];if(a!==a&&f.key!==f.key||a===f.key)return{id:e,list:d,index:b,entry:f}}return{id:e,list:d,index:-1,entry:void 0}},f=function(b,a){var c=b.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=b.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:a(c)};c=null}return{done:!0,value:void 0}})},g=function(){var b={};return b.previous=
b.next=b.head=b},h=0;return b},"es6","es3");$jscomp.findInternal=function(a,d,c){a instanceof String&&(a=String(a));for(var b=a.length,e=0;e<b;e++){var f=a[e];if(d.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
$jscomp.checkStringArgs=function(a,d,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}},"es6","es3");var rituals;
(function(a){a.onError=function(a,c){console.error(a.key+": "+c);var b=c.lastIndexOf(":");-1<b&&(c=c.substr(b+1));notify.notify(a.key+" error: "+c,!1)};a.init=function(a,c){window.onbeforeunload=function(){socket.setAppUnloading()};socket.socketConnect(services.fromKey(a),c)}})(rituals||(rituals={}));var action;
(function(a){a.loadActions=function(){socket.send({svc:services.system.key,cmd:command.client.getActions,param:null})};a.viewActions=function(d){dom.setContent("#action-list",a.renderActions(d))}})(action||(action={}));
(function(a){a.renderActions=function(a){return 0===a.length?JSX("div",null,"No actions available"):JSX("table",{class:"uk-table uk-table-divider uk-text-left"},JSX("thead",null,JSX("tr",null,JSX("th",null,"User"),JSX("th",null,"Act"),JSX("th",null,"Content"),JSX("th",null,"Note"),JSX("th",null,"Created"))),JSX("tbody",null,a.map(function(a){var b=JSON.stringify(a.content,null,2);return JSX("tr",null,JSX("td",null,member.renderTitle(member.getMember(a.userID))),JSX("td",null,a.act),JSX("td",null,
"null"===b?"":JSX("pre",null,b)),JSX("td",null,a.note),JSX("td",{class:"uk-table-shrink uk-text-nowrap"},date.toDateTimeString(new Date(a.created))))})))}})(action||(action={}));var auth;(function(a){a.allProviders=[{key:"github",title:"GitHub"},{key:"google",title:"Google"},{key:"slack",title:"Slack"},{key:"facebook",title:"Facebook"},{key:"amazon",title:"Amazon"},{key:"microsoft",title:"Microsoft"}];var d=[];a.applyAuths=function(a){d=a};a.active=function(){return d?d:[]}})(auth||(auth={}));var comment;
(function(a){function d(b,a){b&&"modal"!==b||(b=g,a||(a=h));"root"===b&&(b="");return a?f.filter(function(c){return c.targetType===b&&c.targetID==a}):f.filter(function(a){return a.targetType===b})}function c(b,c){b&&"modal"!==b||(b=g,c||(c=h));if(b){if(g=b,h=c,c=d(b,c),"root"!==b&&(b="modal"),dom.setContent("#drop-comment-"+b+" .uk-card-body",a.renderComments(c,system.cache.getProfile())),b=dom.opt("#drop-comment-"+b+" .uk-comment-list"))b.scrollTop=b.scrollHeight}else console.warn("invalid comment type ["+
b+"]")}function b(){var b=dom.els(".comment-count-container"),a=!1,c=dom.opt("#comment-count-modal");b.forEach(function(b){var f=b.dataset.commentType,h=b.dataset.commentId;if(!f)throw"invalid comment type ["+f+"] with id ["+h+"]";h=d(f,h);e(f,h,b);g===f&&c&&(e(f,h,c),a=!0)});!a&&c&&e("modal",[],c,!0)}function e(b,a,c,e){dom.setText(dom.req(".text",c),a.length.toString());"root"!==b&&"modal"!==b&&0!==b.length&&dom.setDisplay(c,0!==a.length||!0===e)}var f=[],g,h;a.applyComments=function(b){f=b};a.setActive=
function(b,a){g=b;h=a};a.show=function(b){modal.open("comment",b)};a.add=function(b){b=dom.req("#comment-add-content-"+b);var a=b.value.trim();0===a.length?notify.notify("enter some content",!0):(b.value="",socket.send({svc:services.system.key,cmd:command.client.addComment,param:{targetType:g,targetID:h,content:a}}))};a.onCommentUpdate=function(a){f.push(a);b();c()};a.load=c;a.setCounts=b;a.closeDrop=function(){"story"===g?modal.openSoon("story"):"report"===g?modal.openSoon("report"):"feedback"===
g&&modal.openSoon("feedback");g=void 0};a.remove=function(b){confirm("remove this comment?")&&socket.send({svc:services.system.key,cmd:command.client.removeComment,param:b});return!1};a.onCommentRemoved=function(a){f=f.filter(function(b){return b.id!==a});b();c()}})(comment||(comment={}));
(function(a){a.renderComments=function(a,c){return 0===a.length?JSX("p",{class:"uk-margin-bottom"},"No comments yet, why not add one?"):JSX("ul",{class:"uk-comment-list"},a.map(function(b){var a=b.userID===c.userID?JSX("div",{class:"right"},JSX("a",{class:c.linkColor+"-fg uk-margin-small-right","data-uk-icon":"close",href:"",onclick:"return comment.remove('"+b.id+"');",title:"remove your comment"})):JSX("span",null);return JSX("li",null,JSX("article",{class:"uk-comment uk-visible-toggle uk-transition-toggle",
tabindex:"-1"},member.renderHeader(member.getMember(b.userID),b.created,a),JSX("div",{class:"uk-comment-body"},JSX("div",{dangerouslySetInnerHTML:{__html:b.html}})),JSX("hr",null)))}))};a.renderCount=function(a,c){var b=system.cache.getProfile();return JSX("div",{class:"comment-count-container uk-margin-small-left left hidden","data-comment-type":a,"data-comment-id":c},JSX("a",{class:b.linkColor+"-fg",title:"view comments"},JSX("div",{class:"comment-count"},JSX("span",{class:"uk-icon","data-uk-icon":"comment"}),
JSX("span",{class:"text"}))))}})(comment||(comment={}));var contents;(function(a){a.onContentDisplay=function(a,c,b,e){dom.setDisplay("#modal-"+a+" .content-edit",c);dom.setDisplay("#modal-"+a+" .buttons-edit",c);var f=dom.setDisplay("#modal-"+a+" .content-view",!c);dom.setHTML(f,c?"":e);dom.setDisplay("#modal-"+a+" .buttons-view",!c);a=dom.req("#"+a+"-edit-content");dom.setValue(a,c?b:"");c&&dom.wireTextarea(a)}})(contents||(contents={}));
(function(a){function d(a,b){return b.map(function(b){return{svc:a,session:b}})}a.renderContents=function(a,b,e){e=d(b,e);e.sort(function(b,a){return b.session.created>a.session.created?-1:1});return 0===e.length?JSX("div",null,"No "+b.plural+" in this "+a.key):JSX("table",{class:"uk-table uk-table-divider uk-text-left"},JSX("tbody",null,e.map(function(b){var a=b.svc;b=b.session;var c=system.cache.getProfile();return JSX("tr",null,JSX("td",null,JSX("a",{class:c.linkColor+"-fg",href:"/"+a.key+"/"+
b.slug},b.title)),JSX("td",{class:"uk-table-shrink uk-text-nowrap"},date.toDateTimeString(new Date(b.created))))})))}})(contents||(contents={}));var dom;
(function(a){function d(b,a){return UIkit.util.$$(b,a)}function c(b,a){a=d(b,a);switch(a.length){case 0:break;case 1:return a[0];default:console.warn("found ["+a.length+"] elements with selector ["+b+"], wanted zero or one")}}function b(b,a){(a=c(b,a))||console.warn("no element found for selector ["+b+"]");return a}function e(a,c){"string"===typeof a&&(a=b(a));a.innerHTML=c;return a}a.initDom=function(b,a){try{style.themeLinks(a),style.setTheme(b)}catch(h){console.warn("error setting style",h)}try{modal.wire()}catch(h){console.warn("error wiring modals",
h)}try{drop.wire()}catch(h){console.warn("error wiring drops",h)}try{tags.wire()}catch(h){console.warn("error wiring tag editors",h)}};a.els=d;a.opt=c;a.req=b;a.setHTML=e;a.setDisplay=function(a,c,e){e=void 0===e?"block":e;"string"===typeof a&&(a=b(a));a.style.display=c?e:"none";return a};a.setContent=function(c,e){"string"===typeof c&&(c=b(c));a.clear(c);c.appendChild(e);return c};a.setText=function(a,c){"string"===typeof a&&(a=b(a));a.innerText=c;return a};a.clear=function(b){return e(b,"")}})(dom||
(dom={}));
(function(a){a.setValue=function(d,c){"string"===typeof d&&(d=a.req(d));d.value=c;return d};a.wireTextarea=function(a){function c(){a.style.height="auto";a.style.height=(64>a.scrollHeight?64:a.scrollHeight+6)+"px"}function b(){window.setTimeout(c,0)}a.dataset.autoresize||(a.dataset.autoresize="true",a.addEventListener("change",c,!1),a.addEventListener("cut",b,!1),a.addEventListener("paste",b,!1),a.addEventListener("drop",b,!1),a.addEventListener("keydown",b,!1),a.focus(),a.select());c()};a.setOptions=
function(d,c){"string"===typeof d&&(d=a.req(d));a.clear(d);c.forEach(function(b){var c=document.createElement("option");c.value=b;a.setText(c,b);d.appendChild(c)})};a.setSelectOption=function(d,c){"string"===typeof d&&(d=a.req(d));for(var b=0;b<d.children.length;b++){var e=d.children.item(b);e.selected=e.value===c}};a.insertAtCaret=function(a,c){if(a.selectionStart||0===a.selectionStart){var b=a.selectionStart,e=a.selectionEnd;a.value=a.value.substring(0,b)+c+a.value.substring(e,a.value.length);a.selectionStart=
b+c.length;a.selectionEnd=b+c.length}else a.value+=c}})(dom||(dom={}));
function JSX(a,d){var c=document.createElement(a),b;for(b in d)if(b&&d.hasOwnProperty(b)){var e=d[b];"dangerouslySetInnerHTML"===b?dom.setHTML(c,e.__html):!0===e?c.setAttribute(b,b):!1!==e&&null!==e&&void 0!==e&&c.setAttribute(b,e.toString())}for(b=2;b<arguments.length;b++)if(e=arguments[b],Array.isArray(e))e.forEach(function(a){c.appendChild(a)});else{if(void 0===e||null===e)throw"child for tag ["+a+"] is "+e;e.nodeType||(e=document.createTextNode(e.toString()));c.appendChild(e)}return c}var style;
(function(a){function d(a){c(a);var b=dom.els(".uk-card");switch(a){case "auto":a="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(a="dark");d(a);fetch("/profile/theme/"+a).then(function(a){return a.text()}).then(function(){});break;case "light":document.documentElement.classList.remove("uk-light");document.body.classList.remove("uk-light");document.documentElement.classList.add("uk-dark");document.body.classList.add("uk-dark");b.forEach(function(a){a.classList.add("uk-card-default");
a.classList.remove("uk-card-secondary")});break;case "dark":document.documentElement.classList.add("uk-light");document.body.classList.add("uk-light");document.documentElement.classList.remove("uk-dark");document.body.classList.remove("uk-dark");b.forEach(function(a){a.classList.remove("uk-card-default");a.classList.add("uk-card-secondary")});break;default:console.warn("invalid theme")}}function c(a){if("undefined"===typeof EmojiButton)dom.els(".picker-toggle").forEach(function(a){return dom.setDisplay(a,
!1)});else{var b={position:"bottom-end",theme:a,zIndex:1021};dom.els(".textarea-emoji").forEach(function(a){var c=dom.req(".picker-toggle",a);c.addEventListener("click",function(){var e=dom.req(".uk-textarea",a),d=new EmojiButton(b);d.on("emoji",function(a){drop.onEmojiPicked();dom.insertAtCaret(e,a)});d.togglePicker(c)},!1)})}}a.setTheme=d;a.themeLinks=function(a){dom.els(".theme").forEach(function(b){b.classList.add(a+"-fg")})}})(style||(style={}));var estimate;
(function(a){function d(b){a.cache.detail=b;var c=b.choices.join(", ");dom.setValue("#model-choices-input",c);dom.setContent("#session-view-section .choices",tags.renderTagsView(b.choices));story.viewActiveStory();session.setDetail(b)}function c(b){var c=e(b.id);c.push(b);c.sort(function(a){return a.idx});b.id===a.cache.activeStory&&dom.setText("#story-title",b.title);story.setStories(c)}function b(b){var c=e(b);story.setStories(c);b===a.cache.activeStory&&modal.hide("story");notify.notify("story has been deleted",
!0)}function e(b){return a.cache.stories.filter(function(a){return a.id!==b})}var f=function(){this.stories=[];this.votes=[]};f.prototype.activeVotes=function(){var a=this;return this.activeStory?this.votes.filter(function(b){return b.storyID===a.activeStory}):[]};a.cache=new f;a.onEstimateMessage=function(e,f){switch(e){case command.server.error:rituals.onError(services.estimate,f);break;case command.server.sessionJoined:session.onSessionJoin(f);d(f.session);story.setStories(f.stories);vote.setVotes(f.votes);
session.showWelcomeMessage(f.members.length);break;case command.server.sessionUpdate:d(f);break;case command.server.sessionRemove:system.onSessionRemove(services.estimate);break;case command.server.permissionsUpdate:system.setPermissions(f);break;case command.server.teamUpdate:a.cache.detail&&(a.cache.detail.teamID=null===f||void 0===f?void 0:f.id);session.setTeam(f);break;case command.server.sprintUpdate:a.cache.detail&&(a.cache.detail.sprintID=null===f||void 0===f?void 0:f.id);session.setSprint(f);
break;case command.server.storyUpdate:c(f);break;case command.server.storyRemove:b(f);break;case command.server.storyStatusChange:story.onStoryStatusChange(f);break;case command.server.voteUpdate:vote.onVoteUpdate(f);break;default:console.warn("unhandled command ["+e+"] for estimate")}};a.onSubmitEstimateSession=function(){var a=dom.req("#model-title-input").value,b=dom.req("#model-choices-input").value,c=dom.req("#model-team-select select").value,e=dom.req("#model-sprint-select select").value,f=
permission.readPermissions();socket.send({svc:services.estimate.key,cmd:command.client.updateSession,param:{title:a,choices:b,teamID:c,sprintID:e,permissions:f}})};a.onStoryUpdate=c;a.onStoryRemove=b})(estimate||(estimate={}));var drop;
(function(a){function d(a){if(a.target){var b=a.target;a=b.dataset.key||"";b=b.dataset.t||"";var c=events.getOpenEvent(a);c?c(b):console.warn("no drop open handler registered for ["+a+"]")}}function c(a){if(a.target){var b=a.target;b.classList.contains("uk-open")&&(a=b.dataset.t||"",(b=events.getCloseEvent(b.dataset.key||""))&&b(a))}}function b(a){e&&a.preventDefault()}a.wire=function(){UIkit.util.on(".drop","show",d);UIkit.util.on(".drop","beforehide",b);UIkit.util.on(".drop","hide",c);events.register("comment",
comment.load,comment.closeDrop);events.register("export")};var e=!1;a.onEmojiPicked=function(){e=!0;setTimeout(function(){return e=!1},200)}})(drop||(drop={}));var events;(function(a){var d=new Map,c=new Map;a.register=function(a,e,f){e||(e=function(){});d.set(a,e);f&&c.set(a,f)};a.getOpenEvent=function(a){return d.get(a)};a.getCloseEvent=function(a){return c.get(a)}})(events||(events={}));var modal;
(function(a){function d(a,b){e=b;(b=UIkit.modal("#modal-"+a))||console.warn("no modal available with key ["+a+"]");b.show();return!1}function c(a){if(a.target&&(a=a.target,0===a.id.indexOf("modal"))){a=a.id.substr(6);var b=events.getOpenEvent(a);b?b(e):console.warn("no modal open handler registered for ["+a+"]");e=void 0}}function b(a){a.target&&(a=a.target,a.classList.contains("uk-open")&&(a=a.id.substr(6),(a=events.getCloseEvent(a))&&a(e),e=void 0))}var e;a.wire=function(){UIkit.util.on(".modal",
"show",c);UIkit.util.on(".modal","hide",b);events.register("welcome");events.register("session",session.onModalOpen);events.register("action",action.loadActions);events.register("self",member.viewSelf);events.register("invitation");events.register("member",member.viewActiveMember);events.register("add-story",story.viewAddStory);events.register("story",story.viewActiveStory);events.register("add-report",report.viewAddReport);events.register("report",report.viewReport);events.register("add-feedback",
feedback.viewAddFeedback);events.register("feedback",feedback.viewFeedback)};a.open=d;a.openSoon=function(a){setTimeout(function(){return d(a)},0)};a.hide=function(a){a=UIkit.modal("#modal-"+a);a.$el.classList.contains("uk-open")&&a.hide()}})(modal||(modal={}));var tags;
(function(a){function d(c){var e=dom.req(".value",c),d=dom.req(".editor",c);dom.setDisplay(e,!1);dom.setDisplay(d,!0);var h=a.renderInput(e.innerText);h.onblur=function(){e.innerText=h.value;dom.setDisplay(e,!0);dom.setDisplay(d,!1);b(c.parentElement)};h.onkeypress=function(a){return"Enter"===a.key?(h.blur(),!1):!0};dom.setContent(d,h);h.focus()}function c(a){a.target?b(a.target):console.warn("no event target")}function b(a){var b=a.dataset.key||"",c=events.getOpenEvent(b);c?c():console.warn("no tag open handler registered for ["+
b+"]");a=dom.els(".item",a).map(function(a){return a.innerText});dom.setValue("#model-"+b+"-input",a.join(","))}a.wire=function(){UIkit.util.on(".tag-editor","moved",c);UIkit.util.on(".tag-editor","added",c);UIkit.util.on(".tag-editor","removed",c);events.register("choices");events.register("categories")};a.removeTag=function(a){a=a.parentElement;var c=a.parentElement;a.remove();b(c)};a.addTag=function(b){if(b=b.parentElement){var c=a.renderItem();b.insertBefore(c,dom.req(".add-item",b));d(c)}};a.editTag=
d})(tags||(tags={}));
(function(a){a.renderInput=function(a){return JSX("input",{type:"text",class:"uk-input",value:a})};a.renderItem=function(){return JSX("span",{class:"item"},JSX("span",{class:"value",onclick:"tags.editTag(this.parentElement);"}),JSX("span",{class:"editor"}),JSX("span",{class:"close","data-uk-icon":"icon: close; ratio: 0.6;",onclick:"tags.removeTag(this);"}))};a.renderTagsView=function(a){return JSX("div",{class:"tag-view"},a.map(function(a){return JSX("span",{class:"item"},a)}),JSX("div",{class:"clear"}))}})(tags||
(tags={}));var feedback;
(function(a){function d(){if(retro.cache.activeFeedback){var a=retro.cache.feedback.filter(function(a){return a.id===retro.cache.activeFeedback}).shift();a||console.warn("cannot load active Feedback ["+retro.cache.activeFeedback+"]");return a}}function c(a){return retro.cache.feedback.filter(function(b){return b.id!==a})}function b(a,b){feedback.setFeedback(a);b===retro.cache.activeFeedback&&modal.hide("feedback")}a.setFeedback=function(b){retro.cache.feedback=b;dom.setContent("#feedback-detail",a.renderFeedbackArray(b));
comment.setCounts();modal.hide("add-feedback")};a.onSubmitFeedback=function(){var a=dom.req("#feedback-category").value,b=dom.req("#feedback-content").value;socket.send({svc:services.retro.key,cmd:command.client.addFeedback,param:{category:a,content:b}});return!1};a.onEditFeedback=function(){var a=retro.cache.activeFeedback,b=dom.req("#feedback-edit-category").value,c=dom.req("#feedback-edit-content").value;socket.send({svc:services.retro.key,cmd:command.client.updateFeedback,param:{id:a,category:b,
content:c}});return!1};a.onRemoveFeedback=function(){var a=retro.cache.activeFeedback;a&&UIkit.modal.confirm("Delete this feedback?").then(function(){socket.send({svc:services.retro.key,cmd:command.client.removeFeedback,param:a});modal.hide("feedback")});return!1};a.getActiveFeedback=d;a.viewActiveFeedback=function(a){var b,c=system.cache.getProfile();a&&(retro.cache.activeFeedback=a);(a=d())?(c=a.userID===c.userID,dom.setText("#feedback-title",a.category+" / "+(null===(b=member.getMember(a.userID))||
void 0===b?void 0:b.name)),dom.setSelectOption("#feedback-edit-category",c?a.category:void 0),contents.onContentDisplay("feedback",c,a.content,a.html),comment.setActive("feedback",a.id),comment.setCounts()):console.warn("no active feedback")};a.onFeedbackUpdate=function(a){var e=c(a.id);e.push(a);b(e,a.id)};a.onFeedbackRemoved=function(a){var e=c(a);b(e,a);notify.notify("feedback has been deleted",!0)};a.getFeedbackCategories=function(a,b){var c=b.map(function(b){var c=a.filter(function(a){return a.category===
b}).sort(function(a,b){return a.created>b.created?-1:1});return{category:b,feedback:c}}),e=a.filter(function(a){return!b.find(function(b){return b===a.category})});0<e.length&&c.push({category:"unknown",feedback:e});return c};a.viewAddFeedback=function(a){dom.setSelectOption("#feedback-category",a);var b=dom.setValue("#feedback-content","");dom.wireTextarea(b);setTimeout(function(){return b.focus()},250)};a.viewFeedback=function(a){feedback.viewActiveFeedback(a);var b=dom.req("#feedback-edit-content");
setTimeout(function(){dom.wireTextarea(b);b.focus()},250)}})(feedback||(feedback={}));
(function(a){a.renderFeedbackArray=function(d){var c;if(0===d.length)return JSX("div",null,JSX("button",{class:"uk-button uk-button-default",onclick:"modal.open('add-feedback');",type:"button"},"Add Feedback"));d=a.getFeedbackCategories(d,(null===(c=retro.cache.detail)||void 0===c?void 0:c.categories)||[]);var b=system.cache.getProfile();return JSX("div",{class:"uk-grid-small uk-grid-match uk-child-width-expand@m uk-grid-divider","data-uk-grid":!0},d.map(function(a){return JSX("div",{class:"feedback-list uk-transition-toggle"},
JSX("div",{class:"feedback-category-header"},JSX("span",{class:"right"},JSX("a",{class:b.linkColor+"-fg uk-icon-button uk-transition-fade","data-uk-icon":"plus",onclick:"modal.open('add-feedback', '"+a.category+"');",title:"add feedback"})),JSX("span",{class:"feedback-category-title",onclick:"modal.open('add-feedback', '"+a.category+"');"},a.category)),JSX("div",null,a.feedback.map(function(a){var b=system.cache.getProfile();b=JSX("div",{id:"feedback-"+a.id,class:"feedback-detail section",onclick:"modal.open('feedback', '"+
a.id+"');"},JSX("div",{class:"feedback-comments right"},comment.renderCount("feedback",a.id)),JSX("div",{class:"left"},JSX("a",{class:b.linkColor+"-fg section-link"},member.renderTitle(member.getMember(a.userID)))),JSX("div",{class:"clear"}),JSX("div",{class:"feedback-content"},"loading..."));0<a.html.length&&(dom.setHTML(dom.req(".feedback-content",b),a.html).style.display="block");return JSX("div",null,b)})))}))}})(feedback||(feedback={}));var member;
(function(a){a.memberUpdateDom=function(a){if(a)switch(system.cache.currentService){case services.estimate:estimate.cache.activeStory&&vote.viewVotes();break;case services.standup:dom.setContent("#report-detail",report.renderReports(standup.cache.reports));standup.cache.activeReport&&report.viewActiveReport();break;case services.retro:dom.setContent("#feedback-detail",feedback.renderFeedbackArray(retro.cache.feedback)),retro.cache.activeFeedback&&feedback.viewActiveFeedback()}};a.activeMemberDom=
function(d){var c=a.selfCanEdit();dom.setDisplay("#modal-member .owner-form",c);dom.setDisplay("#modal-member .member-form",!c);dom.setDisplay("#modal-member .owner-actions",c);dom.setDisplay("#modal-member .member-actions",!c);dom.setSelectOption("#member-modal-role-select",d.role);dom.setText("#member-modal-name",d.name);dom.setText("#member-modal-role",d.role)}})(member||(member={}));
(function(a){function d(){a.updateSelf(b.filter(a.isSelf).shift());var c=b.filter(function(b){return!a.isSelf(b)});dom.setContent("#member-detail",a.renderMembers(c));0<c.length&&modal.hide("welcome");a.renderOnline()}function c(){if(e){var a=b.filter(function(a){return a.userID===e}).shift();a||console.warn("cannot load active member ["+e+"]");return a}console.warn("no active member")}var b=[],e;a.getMember=function(a){return b.filter(function(b){return b.userID===a}).shift()};a.getMembers=function(){return b};
a.setMembers=d;a.onMemberUpdate=function(c){a.isSelf(c)?modal.hide("self"):modal.hide("member");var e=b,f=e.filter(function(a){return a.userID===c.userID}).shift();f=(null===f||void 0===f?void 0:f.name)!==c.name;e=e.filter(function(a){return a.userID!==c.userID});e.length===b.length&&notify.notify(c.name+" has joined",!0);e.push(c);e.sort(function(a,b){return a.name>b.name?1:-1});b=e;d();a.memberUpdateDom(f)};a.onMemberRemove=function(a){var c;a===system.cache.getProfile().userID?(notify.notify("you have left this "+
(null===(c=system.cache.currentService)||void 0===c?void 0:c.key),!0),document.location.href="/"):(modal.hide("member"),c=b.filter(function(b){return b.userID!==a}),c.sort(function(a,b){return a.name>b.name?1:-1}),b=c,d())};a.viewActiveMember=function(b){b&&(e=b);(b=c())&&a.activeMemberDom(b)};a.removeMember=function(a){(a=void 0===a?e:a)||console.warn("cannot load active member ["+e+"]");"self"===a&&(a=system.cache.getProfile().userID);var b=system.cache.currentService;confirm("Are you sure you wish to leave this "+
b.key+"?")&&socket.send({svc:b.key,cmd:command.client.removeMember,param:a})};a.saveRole=function(){var a=c();if(a){var b=a.role,e=dom.req("#member-modal-role-select").value;b===e?modal.hide("member"):socket.send({svc:system.cache.currentService.key,cmd:command.client.updateMember,param:{id:a.userID,role:e}})}else console.warn("no active member")};a.applyMembers=function(a){b=a}})(member||(member={}));
(function(a){function d(a){return a?a.picture&&0<a.picture.length&&"none"!=a.picture?JSX("div",null,JSX("div",{class:"profile-image"},JSX("img",{class:"uk-border-circle",src:a.picture,alt:a.name})),JSX("div",{class:"left"},a.name),JSX("div",{class:"clear"})):JSX("div",null,JSX("div",{class:"profile-image"},JSX("span",{class:"profile-icon","data-uk-icon":"user"})),JSX("div",{class:"left"},a.name)):JSX("span",null,"{former member}")}a.renderMembers=function(a){return 0===a.length?JSX("div",null,JSX("button",
{class:"uk-button uk-button-default",onclick:"modal.open('invitation');",type:"button"},"Invite Members")):JSX("ul",{class:"uk-list uk-list-divider"},a.map(function(a){var b={id:"member-"+a.userID},c=system.cache.getProfile();a=JSX("div",{class:"section",onclick:"modal.open('member', '"+a.userID+"');"},JSX("div",{title:"user is offline",class:"right uk-article-meta online-indicator"},"offline"),JSX("div",{class:c.linkColor+"-fg section-link"},d(a)));return JSX("li",b,a)}))};a.renderTitle=d;a.renderHeader=
function(a,b,e){return JSX("header",{class:"uk-comment-header uk-position-relative"},e?e:JSX("span",null),JSX("div",{class:"uk-grid-collapse uk-flex-middle","uk-grid":!0},JSX("div",{class:"uk-width-auto"},a&&a.picture&&0<a.picture.length?JSX("div",null,JSX("div",{class:"profile-image"},JSX("img",{class:"uk-border-circle",src:a.picture,alt:a.name}))):JSX("div",null,JSX("div",{class:"profile-image"},JSX("span",{class:"profile-icon","data-uk-icon":"user"})))),JSX("div",{class:"uk-width-expand"},JSX("h4",
{class:"uk-comment-title uk-margin-remove"},null===a||void 0===a?void 0:a.name),JSX("p",{class:"uk-comment-meta uk-margin-remove-top"},date.toDateTimeString(new Date(b))))))};a.viewSelf=function(){var a=dom.setValue("#self-name-input",dom.req("#member-self .member-name").innerText);setTimeout(function(){return a.focus()},250)};a.setPicture=function(a){return a&&0<a.length&&"none"!=a?JSX("div",{class:"model-icon profile-image"},JSX("img",{class:"uk-border-circle",src:a,alt:"your picture"})):JSX("span",
{class:"model-icon h3-icon",onclick:"modal.open('self');","data-uk-icon":"icon: user;"})}})(member||(member={}));
(function(a){function d(){a.getMembers().forEach(function(a){var b=dom.opt("#member-"+a.userID+" .online-indicator");b&&(c.find(function(b){return b===a.userID})?b.classList.remove("offline"):b.classList.add("offline"))})}var c=[];a.onOnlineUpdate=function(a){a.connected?c.find(function(b){return b===a.userID})||c.push(a.userID):c=c.filter(function(b){return b!==a.userID});d()};a.applyOnline=function(a){c=a};a.renderOnline=d})(member||(member={}));
(function(a){var d;a.isSelf=function(a){return a.userID===system.cache.getProfile().userID};a.selfCanEdit=function(){return void 0!==d&&"owner"==d.role};a.updateSelf=function(c){c&&(d=c,dom.setContent("#self-picture",a.setPicture(c.picture)),dom.setText("#member-self .member-name",c.name),dom.setValue("#self-name-input",c.name),dom.setText("#member-self .member-role",c.role),c="owner"==c.role,dom.setDisplay("#history-container",c),dom.setDisplay("#session-edit-section",c),dom.setDisplay("#session-view-section",
!c))};a.onSubmitSelf=function(){var a=dom.req("#self-name-input").value,b=dom.req("#self-name-choice-global").checked?"global":"local",e=dom.req("#self-picture-input").value;socket.send({svc:services.system.key,cmd:command.client.updateProfile,param:{name:a,choice:b,picture:e}})}})(member||(member={}));var command;
(function(a){a.client={ping:"ping",connect:"connect",getActions:"get-actions",getTeams:"get-teams",getSprints:"get-sprints",updateSession:"update-session",addComment:"add-comment",updateComment:"update-comment",removeComment:"remove-comment",updateProfile:"update-profile",updateMember:"update-member",removeMember:"remove-member",addStory:"add-story",updateStory:"update-story",removeStory:"remove-story",setStoryStatus:"set-story-status",submitVote:"submit-vote",addReport:"add-report",updateReport:"update-report",
removeReport:"remove-report",addFeedback:"add-feedback",updateFeedback:"update-feedback",removeFeedback:"remove-feedback"};a.server={error:"error",pong:"pong",sessionJoined:"session-joined",sessionUpdate:"session-update",sessionRemove:"session-remove",commentUpdate:"comment-update",commentRemove:"comment-remove",permissionsUpdate:"permissions-update",teamUpdate:"team-update",sprintUpdate:"sprint-update",contentUpdate:"content-update",actions:"actions",teams:"teams",sprints:"sprints",memberUpdate:"member-update",
memberRemove:"member-remove",onlineUpdate:"online-update",storyUpdate:"story-update",storyRemove:"story-remove",storyStatusChange:"story-status-change",voteUpdate:"vote-update",reportUpdate:"report-update",reportRemove:"report-remove",feedbackUpdate:"feedback-update",feedbackRemove:"feedback-remove"}})(command||(command={}));var services;
(function(a){a.system={key:"system",title:"System",plural:"systems",icon:"close"};a.team={key:"team",title:"Team",plural:"teams",icon:"users"};a.sprint={key:"sprint",title:"Sprint",plural:"sprints",icon:"git-fork"};a.estimate={key:"estimate",title:"Estimate Session",plural:"estimates",icon:"settings"};a.standup={key:"standup",title:"Daily Standup",plural:"standups",icon:"future"};a.retro={key:"retro",title:"Retrospective",plural:"retros",icon:"history"};var d=[a.system,a.team,a.sprint,a.estimate,
a.standup,a.retro];a.fromKey=function(a){var b=d.find(function(b){return b.key===a});if(!b)throw"invalid service ["+a+"]";return b}})(services||(services={}));var permission;
(function(a){function d(b){var c=dom.opt("#model-"+b+"-select select");if(c){var d=collection.findGroup(a.permissions,b),g=dom.opt("#perm-"+b+"-section");g&&(dom.req("#perm-"+b+"-checkbox").checked=0<d.length,dom.setDisplay(g,0!==c.value.length));collection.findGroup(a.permissions,b)}}function c(a){var b=dom.opt("#perm-"+a+"-checkbox");if(!b||!b.checked)return[];b=dom.els(".perm-"+a+"-email").filter(function(a){return a.checked}).map(function(a){return a.value}).join(",");return[{k:a,v:b,access:"member"}]}
a.permissions=[];a.applyPermissions=function(b){a.permissions=collection.groupBy(b,function(a){return a.k}).groups};a.setPerms=function(){var b=null===a.permissions||0===a.permissions.length;dom.setDisplay("#public-link-container",b);dom.setDisplay("#private-link-container",!b);a.updateView();["team","sprint"].forEach(d);auth.allProviders.forEach(a.setProviderPerms)};a.setModelPerms=d;a.readPermissions=function(){var a=[];a.push.apply(a,$jscomp.arrayFromIterable(c("team")));a.push.apply(a,$jscomp.arrayFromIterable(c("sprint")));
a.push.apply(a,$jscomp.arrayFromIterable(c("github")));a.push.apply(a,$jscomp.arrayFromIterable(c("google")));a.push.apply(a,$jscomp.arrayFromIterable(c("slack")));a.push.apply(a,$jscomp.arrayFromIterable(c("facebook")));a.push.apply(a,$jscomp.arrayFromIterable(c("amazon")));a.push.apply(a,$jscomp.arrayFromIterable(c("microsoft")));return a}})(permission||(permission={}));
(function(a){function d(a){switch(a.key){case services.team.key:return JSX("li",null,"Must be a member of this session's team");case services.sprint.key:return JSX("li",null,"Must be a member of this session's sprint");default:var b=collection.flatten(a.members.map(function(a){return a.k.split(",").map(function(a){return a.trim()}).filter(function(a){return 0<a.length})}));return 0===b.length?JSX("li",null,"Must sign in with ",a.key):JSX("li",null,"Must sign in with ",a.key," using an email address from ",
b.join(" or "))}}a.renderEmails=function(a,b){var c="uk-checkbox uk-margin-small-right perm-"+a+"-email",d="permission.onChanged('email', '"+a+"', this.checked)";return JSX("ul",null,b.map(function(a){return JSX("li",null,JSX("label",null,a.matched?JSX("input",{class:c,type:"checkbox",value:a.domain,checked:"checked",onchange:d}):JSX("input",{class:c,type:"checkbox",value:a.domain,onchange:d}),"Using email address ",a.domain))}))};a.renderView=function(a){return 0===a.length?JSX("div",null,"public"):
JSX("ul",null,a.map(function(a){return d(a)}))}})(permission||(permission={}));
(function(a){function d(a,b){dom.els(".perm-"+a+"-email").forEach(function(a){a.disabled=!b;b||(a.checked=!1)})}a.setProviderPerms=function(c){var b=collection.findGroup(a.permissions,c.key),e=auth.active().filter(function(a){return a.provider===c.key});if(dom.opt("#perm-"+c.key+"-section")){dom.req("#perm-"+c.key+"-checkbox").checked=0<b.length;var d=dom.req("#perm-"+c.key+"-email-container"),g=collection.flatten(b.map(function(a){return a.v.split(",").filter(function(a){return 0<a.length})})).map(function(a){return{matched:!0,
domain:a}});b=e.filter(function(a){return 0===g.filter(function(b){return a.email.endsWith(b.domain)}).length}).map(function(a){a=a.email;var b=a.lastIndexOf("@");a=-1===b?a:a.substr(b);return{matched:!1,domain:a}});g.push.apply(g,$jscomp.arrayFromIterable(b));g.sort();dom.setDisplay(d,0<g.length);dom.setContent(d,0===g.length?document.createElement("span"):a.renderEmails(c.key,g))}};a.onChanged=function(a,b,e){switch(a){case "email":(a=dom.opt("#perm-"+b+"-checkbox"))&&e&&!a.checked&&(a.checked=
!0);break;case "provider":return d(b,e)}}})(permission||(permission={}));(function(a){a.updateView=function(){var d=dom.req("#session-view-section .perms");dom.clear(d);d.appendChild(a.renderView(a.permissions))}})(permission||(permission={}));var report;
(function(a){function d(){if(standup.cache.activeReport){var a=standup.cache.reports.filter(function(a){return a.id===standup.cache.activeReport}).shift();a||console.warn("cannot load active report ["+standup.cache.activeReport+"]");return a}console.warn("no active report")}a.onSubmitReport=function(){var a=dom.req("#report-date").value,b=dom.req("#report-content").value;socket.send({svc:services.standup.key,cmd:command.client.addReport,param:{d:a,content:b}});return!1};a.onEditReport=function(){var a=
dom.req("#report-edit-date").value,b=dom.req("#report-edit-content").value;socket.send({svc:services.standup.key,cmd:command.client.updateReport,param:{id:standup.cache.activeReport,d:a,content:b}});return!1};a.onRemoveReport=function(){var a=standup.cache.activeReport;a&&UIkit.modal.confirm("Delete this report?").then(function(){socket.send({svc:services.standup.key,cmd:command.client.removeReport,param:a});modal.hide("report")});return!1};a.viewActiveReport=function(a){var b,c=system.cache.getProfile();
a&&(standup.cache.activeReport=a);(a=d())?(dom.setText("#report-title",date.toDateString(date.dateFromYMD(a.d))+" - "+(null===(b=member.getMember(a.userID))||void 0===b?void 0:b.name)),b=a.userID===c.userID,dom.setValue(dom.req("#report-edit-date"),b?a.d:""),contents.onContentDisplay("report",b,a.content,a.html),comment.setActive("report",a.id),comment.setCounts()):console.warn("no active report")};a.setReports=function(c){standup.cache.reports=c;dom.setContent("#report-detail",a.renderReports(c));
comment.setCounts();modal.hide("add-report")};a.getReportDates=function(a){return a.map(function(a){return a.d}).filter(function(a,c,d){return d.indexOf(a)===c}).sort().reverse().map(function(b){var c=a.filter(function(a){return a.d===b}).sort(function(a,b){return a.created>b.created?-1:1});return{d:b,reports:c}})};a.viewAddReport=function(){dom.setValue("#report-date",date.dateToYMD(new Date));var a=dom.setValue("#report-content","");dom.wireTextarea(a);setTimeout(function(){return a.focus()},250)};
a.viewReport=function(a){report.viewActiveReport(a);var b=dom.req("#report-edit-content");setTimeout(function(){dom.wireTextarea(b);b.focus()},250)}})(report||(report={}));
(function(a){a.renderReports=function(d){if(0===d.length)return JSX("div",null,JSX("button",{class:"uk-button uk-button-default",onclick:"modal.open('add-report');",type:"button"},"Add Report"));d=a.getReportDates(d);return JSX("ul",{class:"uk-list"},d.map(function(a){return JSX("li",{id:"report-date-"+a.d},JSX("h5",null,JSX("div",{class:"right uk-article-meta"},date.dow(date.dateFromYMD(a.d).getDay())),date.toDateString(date.dateFromYMD(a.d))),JSX("ul",null,a.reports.map(function(a){var b=system.cache.getProfile();
b=JSX("div",{id:"report-"+a.id,class:"report-detail section",onclick:"modal.open('report', '"+a.id+"');"},JSX("div",{class:"report-comments right"},comment.renderCount("report",a.id)),JSX("div",{class:"left"},JSX("a",{class:b.linkColor+"-fg section-link"},member.renderTitle(member.getMember(a.userID)))),JSX("div",{class:"clear"}),JSX("div",{class:"report-content"},"loading..."));0<a.html.length&&(dom.setHTML(dom.req(".report-content",b),a.html).style.display="block");return JSX("li",null,b)})))}))}})(report||
(report={}));var retro;
(function(a){function d(c){a.cache.detail=c;var b=c.categories.join(", ");dom.setValue("#model-categories-input",b);dom.setContent("#session-view-section .categories",tags.renderTagsView(c.categories));dom.setOptions("#feedback-category",c.categories);dom.setOptions("#feedback-edit-category",c.categories);feedback.setFeedback(a.cache.feedback);session.setDetail(c)}a.cache=new function(){this.feedback=[]};a.onRetroMessage=function(c,b){switch(c){case command.server.error:rituals.onError(services.retro,b);
break;case command.server.sessionJoined:session.onSessionJoin(b);d(b.session);feedback.setFeedback(b.feedback);session.showWelcomeMessage(b.members.length);break;case command.server.sessionUpdate:d(b);break;case command.server.sessionRemove:system.onSessionRemove(services.retro);break;case command.server.permissionsUpdate:system.setPermissions(b);break;case command.server.teamUpdate:a.cache.detail&&(a.cache.detail.teamID=null===b||void 0===b?void 0:b.id);session.setTeam(b);break;case command.server.sprintUpdate:a.cache.detail&&
(a.cache.detail.sprintID=null===b||void 0===b?void 0:b.id);session.setSprint(b);break;case command.server.feedbackUpdate:feedback.onFeedbackUpdate(b);break;case command.server.feedbackRemove:feedback.onFeedbackRemoved(b);break;default:console.warn("unhandled command ["+c+"] for retro")}};a.onSubmitRetroSession=function(){var a=dom.req("#model-title-input").value,b=dom.req("#model-categories-input").value,e=dom.req("#model-team-select select").value,d=dom.req("#model-sprint-select select").value,g=
permission.readPermissions();socket.send({svc:services.retro.key,cmd:command.client.updateSession,param:{title:a,categories:b,teamID:e,sprintID:d,permissions:g}})}})(retro||(retro={}));var session;
(function(a){a.setDetail=function(a){var c,b=(null===(c=system.cache.session)||void 0===c?void 0:c.slug)||"invalid";system.cache.session=a;document.title=a.title;dom.setText("#model-title",a.title);dom.setText("#session-view-section .uk-modal-title",a.title);dom.setValue("#model-title-input",a.title);c=dom.els("#navbar .uk-navbar-item");0<c.length&&dom.setText(c[c.length-1],a.title);b!==a.slug&&window.history.replaceState(null,"",document.location.href.replace(b,a.slug));member.selfCanEdit()&&modal.hide("session")};
a.onSessionJoin=function(a){system.cache.apply(a);permission.setPerms();member.setMembers();comment.setCounts()};a.showWelcomeMessage=function(a){1===a&&setTimeout(function(){return modal.open("welcome")},300)};a.setTeam=function(a){var c=dom.req("#team-link-container"),b=dom.req("#session-view-section .team");dom.clear(c);dom.setDisplay("#team-warning-container",void 0!==a);a?(c.appendChild(team.renderTeamLink(a)),dom.setContent(b,team.renderTeamLink(a,!0)),dom.setText("#team-warning-name",a.title)):
dom.setHTML(b,"-none-")};a.setSprint=function(a){var c=dom.req("#sprint-link-container"),b=dom.req("#session-view-section .sprint");dom.clear(c);dom.setDisplay("#sprint-warning-container",void 0!==a);a?(c.appendChild(sprint.renderSprintLink(a)),dom.setContent(b,sprint.renderSprintLink(a,!0)),dom.setText("#sprint-warning-name",a.title)):dom.setHTML(b,"-none-")};a.onModalOpen=function(a){var c=dom.setValue("#model-title-input",dom.req("#model-title").innerText);setTimeout(function(){return c.focus()},
250);team.refreshTeams();sprint.refreshSprints()}})(session||(session={}));var socket;
(function(a){function d(){var a=document.location,b="ws";"https:"===a.protocol&&(b="wss");return b+("://"+a.host+"/s")}function c(a,c){system.cache.currentService=a;system.cache.currentID=c;system.cache.connectTime=Date.now();g=new WebSocket(d());g.onopen=function(){b({svc:a.key,cmd:command.client.connect,param:c})};g.onmessage=function(a){a=JSON.parse(a.data);e(a)};g.onerror=function(a){rituals.onError(services.system,a.type)};g.onclose=function(){f()}}function b(a){debug&&console.debug("out",a);
g.send(JSON.stringify(a))}function e(a){debug&&console.debug("in",a);switch(a.svc){case services.system.key:system.onSystemMessage(a.cmd,a.param);break;case services.team.key:team.onTeamMessage(a.cmd,a.param);break;case services.sprint.key:sprint.onSprintMessage(a.cmd,a.param);break;case services.estimate.key:estimate.onEstimateMessage(a.cmd,a.param);break;case services.standup.key:standup.onStandupMessage(a.cmd,a.param);break;case services.retro.key:retro.onRetroMessage(a.cmd,a.param);break;default:console.warn("unhandled message for service ["+
a.svc+"]")}}function f(){function a(a){debug&&console.info("socket closed, reconnecting in "+a+" seconds");setTimeout(function(){c(system.cache.currentService,system.cache.currentID)},1E3*a)}h||a(10)}var g,h=!1;a.setAppUnloading=function(){h=!0};a.socketConnect=c;a.send=b;a.onSocketMessage=e})(socket||(socket={}));var sprint;
(function(a){function d(c){a.cache.detail=c;var b=c.startDate?date.utcDate(c.startDate):void 0,e=c.endDate?date.utcDate(c.endDate):void 0;dom.setContent("#sprint-date-display",a.renderSprintDates(b,e));dom.setValue("#sprint-start-date-input",b?date.dateToYMD(b):"");dom.setValue("#sprint-end-date-input",e?date.dateToYMD(e):"");session.setDetail(c)}a.cache=new function(){};a.onSprintMessage=function(c,b){switch(c){case command.server.error:rituals.onError(services.sprint,b);break;case command.server.sessionJoined:session.onSessionJoin(b);
d(b.session);dom.setContent("#sprint-estimate-list",contents.renderContents(services.sprint,services.estimate,b.estimates));dom.setContent("#sprint-standup-list",contents.renderContents(services.sprint,services.standup,b.standups));dom.setContent("#sprint-retro-list",contents.renderContents(services.sprint,services.retro,b.retros));session.showWelcomeMessage(b.members.length);break;case command.server.teamUpdate:a.cache.detail&&(a.cache.detail.teamID=null===b||void 0===b?void 0:b.id);session.setTeam(b);
break;case command.server.sessionUpdate:d(b);break;case command.server.sessionRemove:system.onSessionRemove(services.sprint);break;case command.server.permissionsUpdate:system.setPermissions(b);break;case command.server.contentUpdate:socket.socketConnect(system.cache.currentService,system.cache.currentID);break;default:console.warn("unhandled command ["+c+"] for sprint")}};a.onSubmitSprintSession=function(){var a,b,e=dom.req("#model-title-input").value,d=dom.req("#model-team-select select").value,
g=null===(a=dom.opt("#sprint-start-date-input"))||void 0===a?void 0:a.value;a=null===(b=dom.opt("#sprint-end-date-input"))||void 0===b?void 0:b.value;b=permission.readPermissions();socket.send({svc:services.sprint.key,cmd:command.client.updateSession,param:{title:e,startDate:g,endDate:a,teamID:d,permissions:b}})};a.refreshSprints=function(){dom.opt("#model-sprint-select")&&socket.send({svc:services.system.key,cmd:command.client.getSprints,param:null})};a.viewSprints=function(c){var b;dom.opt("#model-sprint-container")&&
(dom.setContent("#model-sprint-select",a.renderSprintSelect(c,null===(b=system.cache.session)||void 0===b?void 0:b.sprintID)),permission.setModelPerms("sprint"))}})(sprint||(sprint={}));
(function(a){a.renderSprintDates=function(a,c){function b(a,b){return JSX("span",null,a," ",JSX("span",{class:"sprint-date",onclick:"modal.open('session');"},b?date.toDateString(b):""))}var e=b("starts",a),d=b("ends",c);return a?c?JSX("span",null,e,", ",d):e:c?d:JSX("span",null,"Sprint")};a.renderSprintLink=function(a,c){var b=system.cache.getProfile();a=JSX("a",{class:b.linkColor+"-fg",href:"/sprint/"+a.slug},a.title);return c?a:JSX("span",null,a," ")};a.renderSprintSelect=function(a,c){return JSX("select",
{class:"uk-select",onchange:"permission.setModelPerms('sprint')"},JSX("option",{value:""},"- no sprint -"),a.map(function(a){return a.id===c?JSX("option",{selected:"selected",value:a.id},a.title):JSX("option",{value:a.id},a.title)}))}})(sprint||(sprint={}));var standup;
(function(a){function d(b){return a.cache.reports.filter(function(a){return a.id!==b})}function c(b,c){report.setReports(b);c===a.cache.activeReport&&modal.hide("report")}a.cache=new function(){this.reports=[]};a.onStandupMessage=function(b,e){switch(b){case command.server.error:rituals.onError(services.standup,e);break;case command.server.sessionJoined:session.onSessionJoin(e);b=e.session;a.cache.detail=b;session.setDetail(b);report.setReports(e.reports);session.showWelcomeMessage(e.members.length);
break;case command.server.sessionUpdate:a.cache.detail=e;session.setDetail(e);break;case command.server.sessionRemove:system.onSessionRemove(services.standup);break;case command.server.permissionsUpdate:system.setPermissions(e);break;case command.server.teamUpdate:a.cache.detail&&(a.cache.detail.teamID=null===e||void 0===e?void 0:e.id);session.setTeam(e);break;case command.server.sprintUpdate:a.cache.detail&&(a.cache.detail.sprintID=null===e||void 0===e?void 0:e.id);session.setSprint(e);break;case command.server.reportUpdate:b=
d(e.id);b.push(e);c(b,e.id);break;case command.server.reportRemove:b=d(e);c(b,e);notify.notify("report has been deleted",!0);break;default:console.warn("unhandled command ["+b+"] for standup")}};a.onSubmitStandupSession=function(){var a=dom.req("#model-title-input").value,c=dom.req("#model-team-select select").value,d=dom.req("#model-sprint-select select").value,g=permission.readPermissions();socket.send({svc:services.standup.key,cmd:command.client.updateSession,param:{title:a,teamID:c,sprintID:d,
permissions:g}})}})(standup||(standup={}));var story;
(function(a){function d(a){function b(a,b){a.id.substr(a.id.lastIndexOf("-")+1)===b?a.classList.add("active"):a.classList.remove("active")}dom.els(".story-status-body").forEach(function(c){b(c,a)});dom.els(".story-status-actions").forEach(function(c){b(c,a)});var c="";switch(a){case "pending":c="Story";break;case "active":c="Voting";break;case "complete":c="Results"}dom.setText("#story-status",c);vote.viewVotes()}function c(b,c,d,g){d&&"complete"===d.status&&0<d.finalVote.length&&(c=d.finalVote);
dom.setContent("#story-"+b+" .story-status",a.renderStatus(c));g&&a.showTotalIfNeeded()}a.viewStoryStatus=d;a.requestStoryStatus=function(b){var c=a.getActiveStory();c&&socket.send({svc:services.estimate.key,cmd:command.client.setStoryStatus,param:{storyID:c.id,status:b}})};a.setStoryStatus=c;a.onStoryStatusChange=function(a){var b=void 0;estimate.cache.stories.forEach(function(c){c.id===a.storyID&&(b=c,c.finalVote=a.finalVote,c.status=a.status)});c(a.storyID,a.status,b,!0);a.storyID===estimate.cache.activeStory&&
d(a.status)}})(story||(story={}));
(function(a){function d(){if(estimate.cache.activeStory){var a=estimate.cache.stories.filter(function(a){return a.id===estimate.cache.activeStory}).shift();a||console.warn("cannot load active story ["+estimate.cache.activeStory+"]");return a}}function c(){var b=0;estimate.cache.stories.filter(function(a){return"complete"===a.status}).map(function(a){return a.finalVote}).filter(function(a){return 0<a.length}).map(function(a){return parseFloat(a)}).filter(function(a){return!isNaN(a)}).forEach(function(a){return b+=a});
var c=dom.opt("#story-total"),d=dom.req("#story-list");void 0!==c&&d.removeChild(c);0<b&&d.appendChild(a.renderTotal(b))}a.setStories=function(b){estimate.cache.stories=b;dom.setContent("#story-detail",a.renderStories(b));b.forEach(function(b){return a.setStoryStatus(b.id,b.status,b,!1)});c();comment.setCounts();modal.hide("add-story")};a.onSubmitStory=function(){var a=dom.req("#story-title-input").value;socket.send({svc:services.estimate.key,cmd:command.client.addStory,param:{title:a}});return!1};
a.beginEditStory=function(){var a=d(),c=prompt("Edit your story",a.title);if(null===c)return!1;c&&c!==a.title&&socket.send({svc:services.estimate.key,cmd:command.client.updateStory,param:{storyID:a.id,title:c}});return!1};a.onRemoveStory=function(){var a=estimate.cache.activeStory;a&&UIkit.modal.confirm("Delete this story?").then(function(){socket.send({svc:services.estimate.key,cmd:command.client.removeStory,param:a});modal.hide("story")});return!1};a.getActiveStory=d;a.viewActiveStory=function(b){b&&
(estimate.cache.activeStory=b);if(b=d())dom.setText("#story-title",b.title),a.viewStoryStatus(b.status),comment.setActive("story",b.id),comment.setCounts()};a.showTotalIfNeeded=c})(story||(story={}));
(function(a){a.renderStories=function(a){return 0===a.length?JSX("div",{id:"story-list"},JSX("button",{class:"uk-button uk-button-default",onclick:"modal.open('add-story');",type:"button"},"Add Story")):JSX("table",{class:"uk-table uk-table-divider uk-table-small"},JSX("ul",{id:"story-list",class:"uk-list uk-list-divider"},a.map(function(a){var b=system.cache.getProfile();return JSX("li",{id:"story-"+a.id,class:"section",onclick:"modal.open('story', '"+a.id+"');"},JSX("div",{class:"right uk-article-meta story-status"},
a.status),JSX("div",{class:b.linkColor+"-fg section-link left"},a.title),JSX("div",{class:"left",style:"margin-top: 4px;"},comment.renderCount("story",a.id)))})))};a.renderStatus=function(a){switch(a){case "pending":return JSX("span",null,a);case "active":return JSX("span",null,a);default:return JSX("span",{class:"vote-badge"},a)}};a.renderTotal=function(a){return JSX("li",{id:"story-total"},JSX("div",{class:"right uk-article-meta"},JSX("span",{class:"vote-badge"},a))," ","Total")};a.viewAddStory=
function(){var a=dom.setValue("#story-title-input","");setTimeout(function(){return a.focus()},250)}})(story||(story={}));var debug=!0,system;
(function(a){var d=function(){this.currentID="";this.connectTime=0};d.prototype.getProfile=function(){if(!this.profile)throw"no active profile";return this.profile};d.prototype.apply=function(c){a.cache.session=c.session;a.cache.profile=c.profile;auth.applyAuths(c.auths);permission.applyPermissions(c.permissions);member.applyMembers(c.members);member.applyOnline(c.online);comment.applyComments(c.comments);void 0!==c.team&&session.setTeam(c.team);void 0!==c.sprint&&session.setSprint(c.sprint)};a.cache=
new d;a.setPermissions=function(a){permission.applyPermissions(a);permission.setPerms()};a.setAuths=function(a){auth.applyAuths(a);permission.setPerms()};a.onSystemMessage=function(a,b){switch(a){case command.server.error:rituals.onError(services.system,b);break;case command.server.actions:action.viewActions(b);break;case command.server.teams:team.viewTeams(b);break;case command.server.sprints:sprint.viewSprints(b);break;case command.server.memberUpdate:member.onMemberUpdate(b);break;case command.server.memberRemove:member.onMemberRemove(b);
break;case command.server.onlineUpdate:member.onOnlineUpdate(b);break;case command.server.commentUpdate:comment.onCommentUpdate(b);break;case command.server.commentRemove:comment.onCommentRemoved(b);break;default:console.warn("unhandled system message for command ["+a+"]")}};a.onSessionRemove=function(a){document.location.reload()}})(system||(system={}));var team;
(function(a){a.cache=new function(){};a.onTeamMessage=function(d,c){switch(d){case command.server.error:rituals.onError(services.team,c);break;case command.server.sessionJoined:session.onSessionJoin(c);d=c.session;a.cache.detail=d;session.setDetail(d);dom.setContent("#team-sprint-list",contents.renderContents(services.team,services.sprint,c.sprints));dom.setContent("#team-estimate-list",contents.renderContents(services.team,services.estimate,c.estimates));dom.setContent("#team-standup-list",contents.renderContents(services.team,
services.standup,c.standups));dom.setContent("#team-retro-list",contents.renderContents(services.team,services.retro,c.retros));session.showWelcomeMessage(c.members.length);break;case command.server.sessionUpdate:a.cache.detail=c;session.setDetail(c);break;case command.server.sessionRemove:system.onSessionRemove(services.team);break;case command.server.permissionsUpdate:system.setPermissions(c);break;case command.server.contentUpdate:socket.socketConnect(system.cache.currentService,system.cache.currentID);
break;default:console.warn("unhandled command ["+d+"] for team")}};a.onSubmitTeamSession=function(){var a=dom.req("#model-title-input").value,c=permission.readPermissions();socket.send({svc:services.team.key,cmd:command.client.updateSession,param:{title:a,permissions:c}})};a.refreshTeams=function(){dom.opt("#model-team-select")&&socket.send({svc:services.system.key,cmd:command.client.getTeams,param:null})};a.viewTeams=function(d){var c;dom.opt("#model-team-container")&&(dom.setContent("#model-team-select",
a.renderTeamSelect(d,null===(c=system.cache.session)||void 0===c?void 0:c.teamID)),permission.setModelPerms("team"))}})(team||(team={}));
(function(a){a.renderTeamLink=function(a,c){var b=system.cache.getProfile();a=JSX("a",{class:b.linkColor+"-fg",href:"/team/"+a.slug},a.title);return c?a:JSX("span",null,"in ",a)};a.renderTeamSelect=function(a,c){return JSX("select",{class:"uk-select",onchange:"permission.setModelPerms('team')"},JSX("option",{value:""},"- no team -"),a.map(function(a){return a.id===c?JSX("option",{selected:"selected",value:a.id},a.title):JSX("option",{value:a.id},a.title)}))}})(team||(team={}));var profile;
(function(a){a.setNavColor=function(a,c){dom.setValue("#nav-color",c);dom.req("#navbar").className=c+"-bg uk-navbar-container uk-navbar";document.querySelectorAll(".nav_swatch").forEach(function(a){a.classList.remove("active")});a.classList.add("active")};a.setLinkColor=function(a,c){dom.setValue("#link-color",c);dom.els(".profile-link").forEach(function(a){a.classList.forEach(function(b){-1<b.indexOf("-fg")&&a.classList.remove(b);a.classList.add(c+"-fg")})});document.querySelectorAll(".link_swatch").forEach(function(a){a.classList.remove("active")});
a.classList.add("active")};a.setPicture=function(a){dom.setValue("#self-picture-input",a);return!1}})(profile||(profile={}));var collection;
(function(a){var d=function(a){this.members=[];this.key=a};a.Group=d;var c=function(){this.groups=[]};c.prototype.findOrInsert=function(a){var b=this.groups.find(function(b){return b.key===a});if(b)return b;b=new d(a);this.groups.push(b);return b};a.GroupSet=c;a.groupBy=function(a,e){var b=new c;a&&a.forEach(function(a){b.findOrInsert(e(a)).members.push(a)});return b};a.findGroup=function(a,c){a.forEach(function(a){if(a.key===c)return a.members});return[]};a.flatten=function(a){var b=[];a.forEach(function(a){return b.push.apply(b,
$jscomp.arrayFromIterable(a))});return b}})(collection||(collection={}));var date;
(function(a){function d(a){return a.toLocaleDateString()}function c(a){return a.toLocaleTimeString().slice(0,8)}a.dateToYMD=function(a){var b=a.getDate(),c=a.getMonth()+1;return a.getFullYear()+"-"+(9>=c?"0"+c:c)+"-"+(9>=b?"0"+b:b)};a.dateFromYMD=function(a){a=new Date(a);return new Date(a.getTime()+6E4*a.getTimezoneOffset())};a.dow=function(a){switch(a){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return"???"}};
a.toDateString=d;a.toTimeString=c;a.toDateTimeString=function(a){return d(a)+" "+c(a)};var b=6E4*(new Date).getTimezoneOffset();a.utcDate=function(a){return new Date(Date.parse(a)+b)}})(date||(date={}));var notify;(function(a){a.notify=function(a,c){UIkit.notification(a,{status:c?"success":"danger",pos:"top-right"})}})(notify||(notify={}));var vote;
(function(a){function d(){var c=story.getActiveStory();if(c){var b=estimate.cache.activeVotes(),e=b.filter(function(a){return a.userID===system.cache.getProfile().userID}).pop();switch(c.status){case "pending":c=system.cache.getProfile().userID===c.userID;dom.setDisplay("#story-edit-section",c);dom.setDisplay("#story-view-section",!c);break;case "active":dom.setContent("#story-vote-members",a.renderVoteMembers(member.getMembers(),b));dom.setContent("#story-vote-choices",a.renderVoteChoices(estimate.cache.detail.choices,
null===e||void 0===e?void 0:e.choice));break;case "complete":dom.setContent("#story-vote-results",a.renderVoteResults(member.getMembers(),b));dom.setContent("#story-vote-summary",a.renderVoteSummary(b));break;default:console.warn("invalid story status ["+c.status+"]")}}}a.setVotes=function(a){estimate.cache.votes=a;d()};a.onVoteUpdate=function(a){var b=estimate.cache.votes;b=b.filter(function(b){return b.userID!==a.userID||b.storyID!==a.storyID});b.push(a);estimate.cache.votes=b;a.storyID===estimate.cache.activeStory&&
d()};a.viewVotes=d;a.onSubmitVote=function(a){socket.send({svc:services.estimate.key,cmd:command.client.submitVote,param:{storyID:estimate.cache.activeStory,choice:a}})};a.getVoteResults=function(a){a=a.map(function(a){a=parseFloat(a.choice);return isNaN(a)?-1:a}).filter(function(a){return-1!==a}).sort();var b=a.length,c=Math.min.apply(Math,$jscomp.arrayFromIterable(a)),d=Math.max.apply(Math,$jscomp.arrayFromIterable(a)),g=a.reduce(function(a,b){return a+b},0),h=a.reduce(function(a,b){var c=a.numMapping[b]=
(a.numMapping[b]||0)+1;c>a.greatestFreq&&(a.greatestFreq=c,a.mode=b);return a},{mode:null,greatestFreq:-Infinity,numMapping:{}}).mode;return{count:b,min:c,max:d,sum:g,mean:0===b?0:g/b,median:0===b?0:a[Math.floor(a.length/2)],mode:0===b?0:h}}})(vote||(vote={}));
(function(a){function d(a,c){return JSX("div",{class:"vote-member",title:a.name+" has "+(c?"voted":"not voted")},JSX("div",null,JSX("span",{"data-uk-icon":"icon: "+(c?"check":"minus")+"; ratio: 1.6"})),a.name)}function c(a,c){return c?JSX("div",{class:"vote-result"},JSX("div",null,JSX("span",{class:"uk-border-circle"},c))," ",a.name):JSX("div",{class:"vote-result"},JSX("div",null,JSX("span",{class:"uk-border-circle"},JSX("span",{"data-uk-icon":"icon: minus; ratio: 1.6"})))," ",a.name)}a.renderVoteMembers=
function(a,c){return JSX("div",{class:"uk-flex uk-flex-wrap uk-flex-around"},a.map(function(a){return d(a,0<c.filter(function(b){return b.userID===a.userID}).length)}))};a.renderVoteChoices=function(a,c){return JSX("div",{class:"uk-flex uk-flex-wrap uk-flex-center"},a.map(function(a){return JSX("div",{class:"vote-choice uk-border-circle uk-box-shadow-hover-medium"+(a===c?" active "+system.cache.getProfile().linkColor+"-border":""),onclick:"vote.onSubmitVote('"+a+"');"},a)}))};a.renderVoteResults=
function(a,d){return JSX("div",{class:"uk-flex uk-flex-wrap uk-flex-around"},a.map(function(a){var b=d.filter(function(b){return b.userID===a.userID});return c(a,0<b.length?b[0].choice:void 0)}))};a.renderVoteSummary=function(b){function c(a){return a.toString().substr(0,4)}var d=a.getVoteResults(b);return JSX("div",{class:"uk-flex uk-flex-wrap uk-flex-center result-container"},JSX("div",{class:"result"},JSX("div",{class:"secondary uk-border-circle"},c(d.count)," / ",c(b.length))," ",JSX("div",null,
"votes counted")),JSX("div",{class:"result"},JSX("div",{class:"secondary uk-border-circle"},c(d.min),"-",c(d.max))," ",JSX("div",null,"vote range")),JSX("div",{class:"result mean-result"},JSX("div",{class:"mean uk-border-circle "+system.cache.getProfile().linkColor+"-border"},c(d.mean))," ",JSX("div",null,"average")),JSX("div",{class:"result"},JSX("div",{class:"secondary uk-border-circle"},c(d.median))," ",JSX("div",null,"median")),JSX("div",{class:"result"},JSX("div",{class:"secondary uk-border-circle"},
c(d.mode))," ",JSX("div",null,"mode")))}})(vote||(vote={}));
