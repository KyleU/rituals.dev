var estimate;
(function(b){function d(a){b.cache.detail=a;util.setValue("#model-choices-input",a.choices.join(", "));rituals.setDetail(a)}function a(a){var c=b.cache.stories;c=c.filter(function(c){return c.id!==a.id});c.push(a);c=c.sort(function(c,a){return c.idx>a.idx?1:-1});story.setStories(c)}var f=function(){function a(){this.stories=[];this.votes=[]}a.prototype.activeVotes=function(){var c=this;return void 0===this.activeStory?[]:this.votes.filter(function(a){return a.storyID==c.activeStory})};return a}();
b.cache=new f;b.onEstimateMessage=function(e,c){switch(e){case command.server.error:rituals.onError(services.estimate,c);break;case command.server.sessionJoined:rituals.onSessionJoin(c);d(c.session);story.setStories(c.stories);vote.setVotes(c.votes);break;case command.server.sessionUpdate:d(c);break;case command.server.storyUpdate:a(c);break;case command.server.storyStatusChange:story.onStoryStatusChange(c);break;case command.server.voteUpdate:vote.onVoteUpdate(c);break;default:console.warn("unhandled command ["+
e+"] for estimate")}};b.onSubmitEstimateSession=function(){var a=util.req("#model-title-input").value,c=util.req("#model-choices-input").value;socket.send({svc:services.estimate,cmd:command.client.updateSession,param:{title:a,choices:c}})}})(estimate||(estimate={}));var events;
(function(b){b.openModal=function(d,a){switch(d){case "session":var f=util.setValue("#model-title-input",util.req("#model-title").innerText);setTimeout(function(){return f.focus()},250);break;case "self":var e=util.setValue("#self-name-input",util.req("#member-self .member-name").innerText);setTimeout(function(){return e.focus()},250);break;case "invite":break;case "member":system.cache.activeMember=a;member.viewActiveMember();break;case "add-story":var c=util.setValue("#story-title-input","");setTimeout(function(){return c.focus()},
250);break;case "story":estimate.cache.activeStory=a;story.viewActiveStory();break;case "add-report":util.setValue("#standup-report-date",util.dateToYMD(new Date));var b=util.setValue("#standup-report-content","");util.wireTextarea(b);setTimeout(function(){return b.focus()},250);break;case "report":standup.cache.activeReport=a;report.viewActiveReport();var g=util.req("#standup-report-edit-content");setTimeout(function(){util.wireTextarea(g);g.focus()},250);break;case "add-feedback":util.setValue("#retro-feedback-category",
"");var k=util.setValue("#retro-feedback-content","");util.wireTextarea(k);setTimeout(function(){return k.focus()},250);break;case "feedback":retro.cache.activeFeedback=a;feedback.viewActiveFeedback();util.req("#retro-feedback-edit-content");setTimeout(function(){util.wireTextarea(g);g.focus()},250);break;default:console.debug("unhandled modal ["+d+"]")}UIkit.modal("#modal-"+d).show();return!1}})(events||(events={}));var feedback;
(function(b){function d(){if(void 0!==retro.cache.activeFeedback){var a=retro.cache.feedback.filter(function(a){return a.id===retro.cache.activeFeedback});if(1!==a.length)console.warn("cannot load active Feedback ["+retro.cache.activeFeedback+"]");else return a[0]}}b.setFeedback=function(a){retro.cache.feedback=a;util.setContent("#feedback-detail",b.renderFeedbackArray(a));UIkit.modal("#modal-add-feedback").hide()};b.onSubmitFeedback=function(){var a=util.req("#feedback-content-input").value;socket.send({svc:services.retro,
cmd:command.client.addFeedback,param:{title:a}});return!1};b.getActiveFeedback=d;b.viewActiveFeedback=function(){var a=system.cache.getProfile(),b=d();if(void 0===b)console.warn("no active feedback");else{util.setText("#feedback-title",b.category+" / "+member.getMemberName(b.authorID));var e=util.req("#modal-feedback .content-edit"),c=util.req("#retro-feedback-edit-category",e),h=util.req("#retro-feedback-edit-content",e),g=util.req("#modal-feedback .content-view"),k=util.req("#modal-feedback .buttons-edit"),
l=util.req("#modal-feedback .buttons-view");b.authorID===a.userID?(e.style.display="block",util.setValue(c,b.category),util.setValue(h,b.content),util.wireTextarea(h),g.style.display="none",util.setHTML(g,""),k.style.display="block",l.style.display="none"):(e.style.display="none",util.setValue(c,""),util.setValue(h,""),g.style.display="block",util.setHTML(g,b.html),k.style.display="none",l.style.display="block")}};b.getFeedbackCategories=function(a,b){var d=b.map(function(c){var b=a.filter(function(a){return a.category===
c}).sort(function(c,a){return c.created>a.created?-1:1});return{category:c,feedback:b}}),c=a.filter(function(c){return-1==b.indexOf(c.category)});0<c.length&&d.push({category:"unknown",feedback:c});return d}})(feedback||(feedback={}));var system;
(function(b){var d=function(){function a(){this.currentID=this.currentService="";this.connectTime=0;this.members=[];this.online=[]}a.prototype.getProfile=function(){if(void 0===this.profile)throw"no active profile";return this.profile};return a}();b.cache=new d})(system||(system={}));var services;(function(b){b.system="system";b.estimate="estimate";b.standup="standup";b.retro="retro"})(services||(services={}));var command;
(function(b){b.client={error:"error",ping:"ping",connect:"connect",updateProfile:"update-profile",updateSession:"update-session",addStory:"add-story",updateStory:"update-story",setStoryStatus:"set-story-status",submitVote:"submit-vote",addReport:"add-report",editReport:"edit-report",addFeedback:"add-feedback",editFeedback:"edit-feedback"};b.server={error:"error",pong:"pong",sessionJoined:"session-joined",sessionUpdate:"session-update",memberUpdate:"member-update",onlineUpdate:"online-update",storyUpdate:"story-update",
storyStatusChange:"story-status-change",voteUpdate:"vote-update",reportUpdate:"report-update"}})(command||(command={}));
function JSX(b,d){var a=document.createElement(b),f;for(f in d)if(f&&d.hasOwnProperty(f)){var e=d[f];!0===e?a.setAttribute(f,f):!1!==e&&null!==e&&void 0!==e&&a.setAttribute(f,e.toString())}for(f=2;f<arguments.length;f++)if(e=arguments[f],Array.isArray(e))e.forEach(function(c){a.appendChild(c)});else{if(null===e.nodeType||void 0===e.nodeType)e=document.createTextNode(e.toString());a.appendChild(e)}return a}var member;
(function(b){function d(c){return void 0===system.cache.profile?!1:c.userID===system.cache.profile.userID}function a(){var c=system.cache.members.filter(d);1===c.length?(util.setText("#member-self .member-name",c[0].name),util.setValue("#self-name-input",c[0].name),util.setText("#member-self .member-role",c[0].role.key)):0===c.length?console.warn("self not found among members"):console.warn("multiple self entries found among members");c=system.cache.members.filter(function(c){return!d(c)});util.setContent("#member-detail",
b.renderMembers(c));f()}function f(){for(var c=0,a=system.cache.members;c<a.length;c++){var b=a[c],d=util.els("#member-"+b.userID+" .online-indicator");1===d.length&&(-1===system.cache.online.indexOf(b.userID)?d[0].classList.add("offline"):d[0].classList.remove("offline"))}}function e(){if(void 0===system.cache.activeMember)console.warn("no active member");else{var c=system.cache.members.filter(function(c){return c.userID===system.cache.activeMember});if(1!==c.length)console.log("cannot load active member ["+
system.cache.activeMember+"]");else return c[0]}}b.setMembers=a;b.onMemberUpdate=function(c){d(c)&&UIkit.modal("#modal-self").hide();var b=system.cache.members,e=b.filter(function(a){return a.userID===c.userID});e=1==e.length&&e[0].name!=c.name;b=b.filter(function(a){return a.userID!==c.userID});b.length===system.cache.members.length&&UIkit.notification(c.name+" has joined",{status:"success",pos:"top-right"});b.push(c);b=b.sort(function(c,a){return c.name>a.name?1:-1});system.cache.members=b;a();
e&&(system.cache.currentService==services.estimate&&estimate.cache.activeStory&&vote.viewVotes(),system.cache.currentService==services.standup&&(util.setContent("#report-detail",report.renderReports(standup.cache.reports)),standup.cache.activeReport&&report.viewActiveReport()),system.cache.currentService==services.retro&&(util.setContent("#report-detail",feedback.renderFeedbackArray(retro.cache.feedback)),retro.cache.activeFeedback&&feedback.viewActiveFeedback()))};b.onOnlineUpdate=function(c){c.connected?
-1===system.cache.online.indexOf(c.userID)&&system.cache.online.push(c.userID):system.cache.online=system.cache.online.filter(function(a){return a!==c.userID});f()};b.onSubmitSelf=function(){var c=util.req("#self-name-input").value,a=util.req("#self-name-choice-global").checked?"global":"local";socket.send({svc:services.system,cmd:command.client.updateProfile,param:{name:c,choice:a}})};b.viewActiveMember=function(){var c=e();void 0!==c&&(util.setText("#member-modal-name",c.name),util.setText("#member-modal-role",
c.role.key))}})(member||(member={}));var report;
(function(b){function d(){if(void 0===standup.cache.activeReport)console.warn("no active report");else{var a=standup.cache.reports.filter(function(a){return a.id===standup.cache.activeReport});if(1!==a.length)console.log("cannot load active report ["+standup.cache.activeReport+"]");else return a[0]}}b.onSubmitReport=function(){var a=util.req("#standup-report-date").value,b=util.req("#standup-report-content").value;socket.send({svc:services.standup,cmd:command.client.addReport,param:{d:a,content:b}});
return!1};b.onEditReport=function(){var a=util.req("#standup-report-edit-date").value,b=util.req("#standup-report-edit-content").value;socket.send({svc:services.standup,cmd:command.client.editReport,param:{id:standup.cache.activeReport,d:a,content:b}});return!1};b.viewActiveReport=function(){var a=system.cache.getProfile(),b=d();if(void 0===b)console.warn("no active report");else{util.setText("#report-title",b.d+" / "+member.getMemberName(b.authorID));var e=util.req("#modal-report .content-edit"),
c=util.req("#standup-report-edit-date",e),h=util.req("#standup-report-edit-content",e),g=util.req("#modal-report .content-view"),k=util.req("#modal-report .buttons-edit"),l=util.req("#modal-report .buttons-view");b.authorID===a.userID?(e.style.display="block",util.setValue(c,b.d),util.setValue(h,b.content),util.wireTextarea(h),g.style.display="none",util.setHTML(g,""),k.style.display="block",l.style.display="none"):(e.style.display="none",util.setValue(c,""),util.setValue(h,""),g.style.display="block",
util.setHTML(g,b.html),k.style.display="none",l.style.display="block")}};b.setReports=function(a){standup.cache.reports=a;util.setContent("#report-detail",b.renderReports(a));UIkit.modal("#modal-add-report").hide()};b.getReportDates=function(a){return a.map(function(a){return a.d}).filter(function(a,b,c){return c.indexOf(a)===b}).sort().reverse().map(function(b){return{d:b,reports:a.filter(function(a){return a.d===b}).sort(function(a,c){return a.created>c.created?-1:1})}})}})(report||(report={}));
var retro;
(function(b){function d(a){b.cache.detail=a;util.setValue("#model-categories-input",a.categories.join(", "));rituals.setDetail(a)}var a=function(){return function(){this.feedback=[]}}();b.cache=new a;b.onRetroMessage=function(a,b){switch(a){case command.server.error:rituals.onError(services.retro,b);break;case command.server.sessionJoined:rituals.onSessionJoin(b);d(b.session);feedback.setFeedback(b.feedback);break;case command.server.sessionUpdate:d(b);break;default:console.warn("unhandled command ["+a+
"] for retro")}};b.onSubmitRetroSession=function(){var a=util.req("#model-title-input").value,b=util.req("#model-categories-input").value;socket.send({svc:services.retro,cmd:command.client.updateSession,param:{title:a,categories:b}})}})(retro||(retro={}));var rituals;
(function(b){function d(a,b){console.warn(a+": "+b);var d=b.lastIndexOf(":");-1<d&&(b=b.substr(d+1));UIkit.notification(a+" error: "+b,{status:"danger",pos:"top-right"})}b.onSocketMessage=function(a){console.log("message received");console.log(a);switch(a.svc){case services.system:var b=a.cmd;a=a.param;switch(b){case command.server.error:d("system",a);break;case command.server.memberUpdate:member.onMemberUpdate(a);break;case command.server.onlineUpdate:member.onOnlineUpdate(a);break;default:console.warn("unhandled system message for command ["+
b+"]")}break;case services.estimate:estimate.onEstimateMessage(a.cmd,a.param);break;case services.standup:standup.onStandupMessage(a.cmd,a.param);break;case services.retro:retro.onRetroMessage(a.cmd,a.param);break;default:console.warn("unhandled message for service ["+a.svc+"]")}};b.setDetail=function(a){system.cache.session=a;util.setText("#model-title",a.title);util.setValue("#model-title-input",a.title);var b=util.els("#navbar .uk-navbar-item");0<b.length&&(b[b.length-1].innerText=a.title);UIkit.modal("#modal-session").hide()};
b.onError=d;b.onSessionJoin=function(a){system.cache.session=a.session;system.cache.profile=a.profile;system.cache.members=a.members;system.cache.online=a.online;member.setMembers()};b.init=function(a,b){window.onbeforeunload=function(){socket.setAppUnloading()};socket.socketConnect(a,b)}})(rituals||(rituals={}));var socket;
(function(b){function d(){var a=document.location,b="ws";"https:"===a.protocol&&(b="wss");return b+"://"+a.host+"/s"}function a(a,b){system.cache.currentService=a;system.cache.currentID=b;system.cache.connectTime=Date.now();c=new WebSocket(d());c.onopen=function(){console.debug("socket connected");f({svc:a,cmd:command.client.connect,param:b})};c.onmessage=function(a){a=JSON.parse(a.data);rituals.onSocketMessage(a)};c.onerror=function(a){rituals.onError("socket",a.type)};c.onclose=function(){e()}}
function f(a){console.log("sending message");console.log(a);c.send(JSON.stringify(a))}function e(){function b(b){1===b?console.warn("socket closed, reconnecting in a second"):console.warn("socket closed, reconnecting in "+b+" seconds");setTimeout(function(){a(system.cache.currentService,system.cache.currentID)},1E3*b)}h||(2E3>Date.now()-system.cache.connectTime?b(6):b(1))}var c,h=!1;b.setAppUnloading=function(){h=!0};b.socketConnect=a;b.send=f})(socket||(socket={}));var standup;
(function(b){function d(a){b.cache.detail=a;util.setValue("#model-categories-input",a.categories.join(", "));rituals.setDetail(a)}function a(a){var c=b.cache.reports;c=c.filter(function(b){return b.id!==a.id});c.push(a);report.setReports(c);a.id===b.cache.activeReport&&UIkit.modal("#modal-report").hide()}var f=function(){return function(){this.reports=[]}}();b.cache=new f;b.onStandupMessage=function(b,c){switch(b){case command.server.error:rituals.onError(services.standup,c);break;case command.server.sessionJoined:rituals.onSessionJoin(c);
d(c.session);report.setReports(c.reports);break;case command.server.sessionUpdate:d(c);break;case command.server.reportUpdate:a(c);break;default:console.warn("unhandled command ["+b+"] for standup")}};b.onSubmitStandupSession=function(){var a=util.req("#model-title-input").value;socket.send({svc:services.standup,cmd:command.client.updateSession,param:{title:a}})}})(standup||(standup={}));var story;
(function(b){function d(){if(void 0!==estimate.cache.activeStory){var a=estimate.cache.stories.filter(function(a){return a.id===estimate.cache.activeStory});if(1!==a.length)console.warn("cannot load active story ["+estimate.cache.activeStory+"]");else return a[0]}}function a(a){function b(a,b){a.id.substr(a.id.lastIndexOf("-")+1)===b?a.classList.add("active"):a.classList.remove("active")}for(var c=0,d=util.els(".story-status-body");c<d.length;c++){var e=d[c];b(e,a)}c=0;for(d=util.els(".story-status-actions");c<
d.length;c++)e=d[c],b(e,a);e="";switch(a){case "pending":e="Story";break;case "active":e="Voting";break;case "complete":e="Results"}util.setText("#story-status",e);vote.viewVotes()}function f(a,d,f,k){null!==f&&"complete"==f.status.key&&0<f.finalVote.length&&(d=f.finalVote);util.setContent("#story-"+a+" .story-status",b.renderStatus(d));k&&e()}function e(){var a=0;estimate.cache.stories.filter(function(a){return"complete"===a.status.key}).map(function(a){return a.finalVote}).filter(function(a){return 0<
a.length}).map(function(a){return parseFloat(a)}).filter(function(a){return!isNaN(a)}).forEach(function(b){return a+=b});var d=util.opt("#story-total"),e=util.req("#story-list");null!==d&&e.removeChild(d);0<a&&e.appendChild(b.renderTotal(a))}b.setStories=function(a){estimate.cache.stories=a;util.setContent("#story-detail",b.renderStories(a));a.forEach(function(a){return f(a.id,a.status.key,a,!1)});e();UIkit.modal("#modal-add-story").hide()};b.onSubmitStory=function(){var a=util.req("#story-title-input").value;
socket.send({svc:services.estimate,cmd:command.client.addStory,param:{title:a}});return!1};b.getActiveStory=d;b.viewActiveStory=function(){var b=d();void 0===b?console.warn("no active story"):(util.setText("#story-title",b.title),a(b.status.key))};b.requestStoryStatus=function(a){var b=d();void 0===b?console.warn("no active story"):socket.send({svc:services.estimate,cmd:command.client.setStoryStatus,param:{storyID:b.id,status:a}})};b.onStoryStatusChange=function(b){var c=null;estimate.cache.stories.forEach(function(a){a.id==
b.storyID&&(c=a,a.finalVote=b.finalVote,a.status=b.status)});f(b.storyID,b.status.key,c,!0);b.storyID===estimate.cache.activeStory&&a(b.status.key)}})(story||(story={}));var util;
(function(b){b.els=function(b,a){return UIkit.util.$$(b,a)};b.opt=function(d,a){d=b.els(d,a);return 0===d.length?null:d[0]};b.req=function(d,a){a=b.opt(d,a);null===a&&console.error("no element found for selector ["+d+"]");return a};b.setHTML=function(d,a){"string"===typeof d&&(d=b.req(d));d.innerHTML=a;return d};b.setContent=function(d,a){"string"===typeof d&&(d=b.req(d));d.innerHTML="";d.appendChild(a);return d};b.setText=function(d,a){"string"===typeof d&&(d=b.req(d));d.innerText=a;return d};b.setValue=
function(d,a){"string"===typeof d&&(d=b.req(d));d.value=a;return d};b.wireTextarea=function(b){function a(){b.style.height="auto";b.style.height=(64>b.scrollHeight?64:b.scrollHeight+6)+"px"}function d(){window.setTimeout(a,0)}void 0===b.dataset.autoresize&&(b.dataset.autoresize="true",b.addEventListener("change",a,!1),b.addEventListener("cut",d,!1),b.addEventListener("paste",d,!1),b.addEventListener("drop",d,!1),b.addEventListener("keydown",d,!1),b.focus(),b.select());a()};b.dateToYMD=function(b){var a=
b.getDate(),d=b.getMonth()+1;return""+b.getFullYear()+"-"+(9>=d?"0"+d:d)+"-"+(9>=a?"0"+a:a)};b.dateFromYMD=function(b){b=new Date(b);return b=new Date(b.getTime()+6E4*b.getTimezoneOffset())};b.dow=function(b){switch(b){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return"???"}}})(util||(util={}));var vote;
(function(b){function d(){var b=story.getActiveStory();if(void 0!==b){var c=estimate.cache.activeVotes(),d=c.filter(function(a){return a.userID===system.cache.getProfile().userID}).pop();"active"==b.status.key&&a(c,d);"complete"==b.status.key&&f(c)}}function a(a,c){util.setContent("#story-vote-members",b.renderVoteMembers(system.cache.members,a));util.setContent("#story-vote-choices",b.renderVoteChoices(estimate.cache.detail.choices,null===c||void 0===c?void 0:c.choice))}function f(a){util.setContent("#story-vote-results",
b.renderVoteResults(system.cache.members,a));util.setContent("#story-vote-summary",b.renderVoteSummary(a))}b.setVotes=function(a){estimate.cache.votes=a;d()};b.onVoteUpdate=function(a){var b=estimate.cache.votes;b=b.filter(function(a){return a.userID!=a.userID||a.storyID!=a.storyID});b.push(a);estimate.cache.votes=b;a.storyID===estimate.cache.activeStory&&d()};b.viewVotes=d;b.onSubmitVote=function(a){socket.send({svc:services.estimate,cmd:command.client.submitVote,param:{storyID:estimate.cache.activeStory,
choice:a}})};b.getVoteResults=function(a){a=a.map(function(a){a=parseFloat(a.choice);return isNaN(a)?-1:a}).filter(function(a){return-1!==a}).sort();var b=a.length,d=Math.min.apply(Math,a),e=Math.max.apply(Math,a),f=a.reduce(function(a,b){return a+b},0),l=a.reduce(function(a,b){var c=a.numMapping[b]=(a.numMapping[b]||0)+1;c>a.greatestFreq&&(a.greatestFreq=c,a.mode=b);return a},{mode:null,greatestFreq:-Infinity,numMapping:{}}).mode;return{count:b,min:d,max:e,sum:f,mean:0==b?0:f/b,median:0==b?0:a[Math.floor(a.length/
2)],mode:0==b?0:l}}})(vote||(vote={}));
(function(b){b.renderFeedbackArray=function(d){var a;if(0===d.length)return JSX("div",null,JSX("button",{"class":"uk-button uk-button-default",onclick:"events.openModal('add-feedback');",type:"button"},"Add Feedback"));var f=b.getFeedbackCategories(d,(null===(a=retro.cache.detail)||void 0===a?void 0:a.categories)||[]);console.error(f);return JSX("ul",{"class":"uk-list"},d.map(function(a){var b=system.cache.getProfile();b=JSX("div",{id:"feedback-"+a.id,"class":"feedback-detail uk-border-rounded section",onclick:"events.openModal('feedback', '"+
a.id+"');"},JSX("a",{"class":b.linkColor+"-fg section-link"},member.getMemberName(a.authorID)),JSX("div",{"class":"feedback-content"},"loading..."));0<a.html.length&&(util.setHTML(util.req(".feedback-content",b),a.html).style.display="block");return JSX("li",null,b)}))}})(feedback||(feedback={}));
(function(b){b.renderMembers=function(b){return 0===b.length?JSX("div",null,JSX("button",{"class":"uk-button uk-button-default",onclick:"events.openModal('invite');",type:"button"},"Invite Members")):JSX("ul",{"class":"uk-list uk-list-divider"},b.map(function(a){var b={id:"member-"+a.userID},d=system.cache.getProfile();a=JSX("div",{"class":"section",onclick:"events.openModal('member', '"+a.userID+"');"},JSX("div",{title:"user is offline","class":"right uk-article-meta online-indicator"},"offline"),
JSX("div",{"class":d.linkColor+"-fg section-link"},a.name));return JSX("li",b,a)}))};b.getMemberName=function(b){var a=system.cache.members.filter(function(a){return a.userID===b});return 0===a.length?b:a[0].name}})(member||(member={}));
(function(b){b.renderReports=function(d){if(0===d.length)return JSX("div",null,JSX("button",{"class":"uk-button uk-button-default",onclick:"events.openModal('add-report');",type:"button"},"Add Report"));d=b.getReportDates(d);return JSX("ul",{"class":"uk-list"},d.map(function(a){return JSX("li",{id:"report-date-"+a.d},JSX("h5",null,JSX("div",{"class":"right uk-article-meta"},util.dow(util.dateFromYMD(a.d).getDay())),util.dateFromYMD(a.d).toLocaleDateString()),JSX("ul",null,a.reports.map(function(a){var b=
system.cache.getProfile();b=JSX("div",{id:"report-"+a.id,"class":"report-detail uk-border-rounded section",onclick:"events.openModal('report', '"+a.id+"');"},JSX("a",{"class":b.linkColor+"-fg section-link"},member.getMemberName(a.authorID)),JSX("div",{"class":"report-content"},"loading..."));0<a.html.length&&(util.setHTML(util.req(".report-content",b),a.html).style.display="block");return JSX("li",null,b)})))}))}})(report||(report={}));
(function(b){b.renderStories=function(b){return 0===b.length?JSX("div",null,JSX("button",{"class":"uk-button uk-button-default",onclick:"events.openModal('add-story');",type:"button"},"Add Story")):JSX("ul",{id:"story-list","class":"uk-list uk-list-divider"},b.map(function(a){var b=system.cache.getProfile();return JSX("li",{id:"story-"+a.id,"class":"section",onclick:"events.openModal('story', '"+a.id+"');"},JSX("div",{"class":"right uk-article-meta story-status"},a.status.key),JSX("div",{"class":b.linkColor+
"-fg section-link"},a.title))}))};b.renderStatus=function(b){switch(b){case "pending":return JSX("span",null,b);case "active":return JSX("span",null,b);default:return JSX("span",{"class":"vote-badge uk-border-rounded"},b)}};b.renderTotal=function(b){return JSX("li",{id:"story-total"},JSX("div",{"class":"right uk-article-meta"},JSX("span",{"class":"vote-badge uk-border-rounded"},b))," Total")}})(story||(story={}));
(function(b){function d(a,b){return JSX("div",{"class":"vote-member",title:a.name+" has "+(b?"voted":"not voted")},JSX("div",null,JSX("span",{"data-uk-icon":"icon: "+(b?"check":"minus")+"; ratio: 1.6"})),a.name)}function a(a,b){return void 0===b?JSX("div",{"class":"vote-result"},JSX("div",null,JSX("span",{"class":"uk-border-circle"},JSX("span",{"data-uk-icon":"icon: minus; ratio: 1.6"})))," ",a.name):JSX("div",{"class":"vote-result"},JSX("div",null,JSX("span",{"class":"uk-border-circle"},b))," ",
a.name)}b.renderVoteMembers=function(a,b){return JSX("div",{"class":"uk-flex uk-flex-wrap uk-flex-around"},a.map(function(a){return d(a,0<b.filter(function(b){return b.userID==a.userID}).length)}))};b.renderVoteChoices=function(a,b){return JSX("div",{"class":"uk-flex uk-flex-wrap uk-flex-center"},a.map(function(a){return JSX("div",{"class":"vote-choice uk-border-circle uk-box-shadow-hover-medium"+(a===b?" active "+system.cache.getProfile().linkColor+"-border":""),onclick:"vote.onSubmitVote('"+a+"');"},
a)}))};b.renderVoteResults=function(b,d){return JSX("div",{"class":"uk-flex uk-flex-wrap uk-flex-around"},b.map(function(b){var c=d.filter(function(a){return a.userID==b.userID});return a(b,0<length?c[0].choice:void 0)}))};b.renderVoteSummary=function(a){function d(a){return a.toString().substr(0,4)}var c=b.getVoteResults(a);return JSX("div",{"class":"uk-flex uk-flex-wrap uk-flex-center result-container"},JSX("div",{"class":"result"},JSX("div",{"class":"secondary uk-border-circle"},d(c.count)," / ",
d(a.length))," ",JSX("div",null,"votes counted")),JSX("div",{"class":"result"},JSX("div",{"class":"secondary uk-border-circle"},d(c.min),"-",d(c.max))," ",JSX("div",null,"vote range")),JSX("div",{"class":"result mean-result"},JSX("div",{"class":"mean uk-border-circle "+system.cache.getProfile().linkColor+"-border"},d(c.mean))," ",JSX("div",null,"average")),JSX("div",{"class":"result"},JSX("div",{"class":"secondary uk-border-circle"},d(c.median))," ",JSX("div",null,"median")),JSX("div",{"class":"result"},
JSX("div",{"class":"secondary uk-border-circle"},d(c.mode))," ",JSX("div",null,"mode")))}})(vote||(vote={}));
