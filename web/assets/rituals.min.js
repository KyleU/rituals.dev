var action;(function(a){a.loadActions=function(){socket.send({svc:services.system.key,cmd:command.client.getActions,param:null})};a.viewActions=function(d){util.setContent("#action-list",a.renderActions(d))}})(action||(action={}));var estimate;
(function(a){function d(e){a.cache.detail=e;util.setValue("#model-choices-input",e.choices.join(", "));story.viewActiveStory();rituals.setDetail(e)}function c(b){var c=e(b.id);c.push(b);b.id===a.cache.activeStory&&util.setText("#story-title",b.title);story.setStories(c)}function b(b){var c=e(b);story.setStories(c);b===a.cache.activeStory&&UIkit.modal("#modal-story").hide();UIkit.notification("story has been deleted",{status:"success",pos:"top-right"})}function e(b){return a.cache.stories.filter(function(e){return e.id!==
b})}var f=function(){function b(){this.stories=[];this.votes=[]}b.prototype.activeVotes=function(){var b=this;return void 0===this.activeStory?[]:this.votes.filter(function(e){return e.storyID==b.activeStory})};return b}();a.cache=new f;a.onEstimateMessage=function(e,a){switch(e){case command.server.error:rituals.onError(services.estimate.key,a);break;case command.server.sessionJoined:rituals.onSessionJoin(a);d(a.session);story.setStories(a.stories);vote.setVotes(a.votes);break;case command.server.sessionUpdate:d(a);
break;case command.server.storyUpdate:c(a);break;case command.server.storyRemove:b(a);break;case command.server.storyStatusChange:story.onStoryStatusChange(a);break;case command.server.voteUpdate:vote.onVoteUpdate(a);break;default:console.warn("unhandled command ["+e+"] for estimate")}};a.onSubmitEstimateSession=function(){var b=util.req("#model-title-input").value,e=util.req("#model-choices-input").value;socket.send({svc:services.estimate.key,cmd:command.client.updateSession,param:{title:b,choices:e}})};
a.onStoryUpdate=c;a.onStoryRemove=b})(estimate||(estimate={}));var events;
(function(a){a.openModal=function(a,c){switch(a){case "session":var b=util.setValue("#model-title-input",util.req("#model-title").innerText);setTimeout(function(){return b.focus()},250);break;case "self":var e=util.setValue("#self-name-input",util.req("#member-self .member-name").innerText);setTimeout(function(){return e.focus()},250);break;case "invitation":break;case "member":system.cache.activeMember=c;member.viewActiveMember();break;case "actions":action.loadActions();break;case "add-story":var f=
util.setValue("#story-title-input","");setTimeout(function(){return f.focus()},250);break;case "story":estimate.cache.activeStory=c;story.viewActiveStory();break;case "add-report":util.setValue("#standup-report-date",util.dateToYMD(new Date));var d=util.setValue("#standup-report-content","");util.wireTextarea(d);setTimeout(function(){return d.focus()},250);break;case "report":standup.cache.activeReport=c;report.viewActiveReport();var g=util.req("#standup-report-edit-content");setTimeout(function(){util.wireTextarea(g);
g.focus()},250);break;case "add-feedback":util.setSelectOption(util.req("#retro-feedback-category"),c);var l=util.setValue("#retro-feedback-content","");util.wireTextarea(l);setTimeout(function(){return l.focus()},250);break;case "feedback":retro.cache.activeFeedback=c;feedback.viewActiveFeedback();var h=util.req("#retro-feedback-edit-content");setTimeout(function(){util.wireTextarea(h);h.focus()},250);break;default:console.warn("unhandled modal ["+a+"]")}UIkit.modal("#modal-"+a).show();return!1}})(events||
(events={}));var feedback;
(function(a){function d(){if(void 0!==retro.cache.activeFeedback){var b=retro.cache.feedback.filter(function(b){return b.id===retro.cache.activeFeedback});if(1!==b.length)console.warn("cannot load active Feedback ["+retro.cache.activeFeedback+"]");else return b[0]}}function c(b){return retro.cache.feedback.filter(function(e){return e.id!==b})}function b(b,a){feedback.setFeedback(b);a===retro.cache.activeFeedback&&UIkit.modal("#modal-feedback").hide()}a.setFeedback=function(b){retro.cache.feedback=b;
util.setContent("#feedback-detail",a.renderFeedbackArray(b));UIkit.modal("#modal-add-feedback").hide()};a.onSubmitFeedback=function(){var b=util.req("#retro-feedback-category").value,a=util.req("#retro-feedback-content").value;socket.send({svc:services.retro.key,cmd:command.client.addFeedback,param:{category:b,content:a}});return!1};a.onEditFeedback=function(){var b=retro.cache.activeFeedback,a=util.req("#retro-feedback-edit-category").value,c=util.req("#retro-feedback-edit-content").value;socket.send({svc:services.retro.key,
cmd:command.client.updateFeedback,param:{id:b,category:a,content:c}});return!1};a.onRemoveFeedback=function(){var b=retro.cache.activeFeedback;b&&confirm("Delete this feedback?")&&(socket.send({svc:services.retro.key,cmd:command.client.removeFeedback,param:b}),UIkit.modal("#modal-feedback").hide());return!1};a.getActiveFeedback=d;a.viewActiveFeedback=function(){var b=system.cache.getProfile(),a=d();if(void 0===a)console.warn("no active feedback");else{util.setText("#feedback-title",a.category+" / "+
system.getMemberName(a.authorID));var c=util.req("#modal-feedback .content-edit"),g=util.req("#retro-feedback-edit-category",c),l=util.req("#retro-feedback-edit-content",c),h=util.req("#modal-feedback .content-view"),m=util.req("#modal-feedback .buttons-edit"),n=util.req("#modal-feedback .buttons-view");a.authorID===b.userID?(c.style.display="block",util.setSelectOption(g,a.category),util.setValue(l,a.content),util.wireTextarea(l),h.style.display="none",util.setHTML(h,""),m.style.display="block",
n.style.display="none"):(c.style.display="none",util.setSelectOption(g,void 0),util.setValue(l,""),h.style.display="block",util.setHTML(h,a.html),m.style.display="none",n.style.display="block")}};a.onFeedbackUpdate=function(a){var e=c(a.id);e.push(a);b(e,a.id)};a.onFeedbackRemoved=function(a){var e=c(a);b(e,a);UIkit.notification("feedback has been deleted",{status:"success",pos:"top-right"})};a.getFeedbackCategories=function(b,a){var e=a.map(function(a){var e=b.filter(function(b){return b.category===
a}).sort(function(b,a){return b.created>a.created?-1:1});return{category:a,feedback:e}}),c=b.filter(function(b){return-1==a.indexOf(b.category)});0<c.length&&e.push({category:"unknown",feedback:c});return e}})(feedback||(feedback={}));var debug=!0,system;
(function(a){var d=function(){function a(){this.currentID=this.currentService="";this.connectTime=0;this.members=[];this.online=[]}a.prototype.getProfile=function(){if(void 0===this.profile)throw"no active profile";return this.profile};return a}();a.getMemberName=function(c){var b=a.cache.members.filter(function(b){return b.userID===c});return 0===b.length?c:b[0].name};a.cache=new d})(system||(system={}));var services;
(function(a){a.system={key:"system",title:"System",plural:"systems",icon:"close"};a.sprint={key:"sprint",title:"Sprint",plural:"sprints",icon:"git-fork"};a.estimate={key:"estimate",title:"Estimate",plural:"estimates",icon:"settings"};a.standup={key:"standup",title:"Standup",plural:"standups",icon:"future"};a.retro={key:"retro",title:"Retrospective",plural:"retros",icon:"history"}})(services||(services={}));var command;
(function(a){a.client={error:"error",ping:"ping",connect:"connect",getActions:"get-actions",updateProfile:"update-profile",updateSession:"update-session",addStory:"add-story",updateStory:"update-story",removeStory:"remove-story",setStoryStatus:"set-story-status",submitVote:"submit-vote",addReport:"add-report",updateReport:"update-report",removeReport:"remove-report",addFeedback:"add-feedback",updateFeedback:"update-feedback",removeFeedback:"remove-feedback"};a.server={error:"error",pong:"pong",actions:"actions",
sessionJoined:"session-joined",sessionUpdate:"session-update",memberUpdate:"member-update",onlineUpdate:"online-update",storyUpdate:"story-update",storyRemove:"story-remove",storyStatusChange:"story-status-change",voteUpdate:"vote-update",reportUpdate:"report-update",reportRemove:"report-remove",feedbackUpdate:"feedback-update",feedbackRemove:"feedback-remove"}})(command||(command={}));
function JSX(a,d){var c=document.createElement(a),b;for(b in d)if(b&&d.hasOwnProperty(b)){var e=d[b];!0===e?c.setAttribute(b,b):!1!==e&&null!==e&&void 0!==e&&c.setAttribute(b,e.toString())}for(b=2;b<arguments.length;b++)if(e=arguments[b],Array.isArray(e))e.forEach(function(b){c.appendChild(b)});else{if(null===e.nodeType||void 0===e.nodeType)e=document.createTextNode(e.toString());c.appendChild(e)}return c}var member;
(function(a){function d(b){return void 0===system.cache.profile?!1:b.userID===system.cache.profile.userID}function c(){var e=system.cache.members.filter(d);1===e.length?(util.setText("#member-self .member-name",e[0].name),util.setValue("#self-name-input",e[0].name),util.setText("#member-self .member-role",e[0].role)):0===e.length?console.warn("self not found among members"):console.warn("multiple self entries found among members");e=system.cache.members.filter(function(b){return!d(b)});util.setContent("#member-detail",
a.renderMembers(e));b()}function b(){for(var b=0,a=system.cache.members;b<a.length;b++){var e=a[b],c=util.els("#member-"+e.userID+" .online-indicator");1===c.length&&(-1===system.cache.online.indexOf(e.userID)?c[0].classList.add("offline"):c[0].classList.remove("offline"))}}function e(){if(void 0===system.cache.activeMember)console.warn("no active member");else{var b=system.cache.members.filter(function(b){return b.userID===system.cache.activeMember});if(1!==b.length)console.warn("cannot load active member ["+
system.cache.activeMember+"]");else return b[0]}}a.setMembers=c;a.onMemberUpdate=function(b){d(b)&&UIkit.modal("#modal-self").hide();var a=system.cache.members,e=a.filter(function(a){return a.userID===b.userID});e=1==e.length&&e[0].name!=b.name;a=a.filter(function(a){return a.userID!==b.userID});a.length===system.cache.members.length&&UIkit.notification(b.name+" has joined",{status:"success",pos:"top-right"});a.push(b);a=a.sort(function(b,a){return b.name>a.name?1:-1});system.cache.members=a;c();
if(e)switch(system.cache.currentService){case services.estimate.key:estimate.cache.activeStory&&vote.viewVotes();break;case services.standup.key:util.setContent("#report-detail",report.renderReports(standup.cache.reports));standup.cache.activeReport&&report.viewActiveReport();break;case services.retro.key:util.setContent("#feedback-detail",feedback.renderFeedbackArray(retro.cache.feedback)),retro.cache.activeFeedback&&feedback.viewActiveFeedback()}};a.onOnlineUpdate=function(a){a.connected?-1===system.cache.online.indexOf(a.userID)&&
system.cache.online.push(a.userID):system.cache.online=system.cache.online.filter(function(b){return b!==a.userID});b()};a.onSubmitSelf=function(){var b=util.req("#self-name-input").value,a=util.req("#self-name-choice-global").checked?"global":"local";socket.send({svc:services.system.key,cmd:command.client.updateProfile,param:{name:b,choice:a}})};a.viewActiveMember=function(){var b=e();void 0!==b&&(util.setText("#member-modal-name",b.name),util.setText("#member-modal-role",b.role))}})(member||(member=
{}));var profile;
(function(a){a.setNavColor=function(a,c){util.setValue("#navbar-color",c);util.req("#navbar").className=c+"-bg uk-navbar-container uk-navbar";document.querySelectorAll(".navbar_swatch").forEach(function(b){b.classList.remove("active")});a.classList.add("active")};a.setLinkColor=function(a,c){util.setValue("#link-color",c);util.els(".profile-link").forEach(function(b){b.classList.forEach(function(a){-1<a.indexOf("-fg")&&b.classList.remove(a);b.classList.add(c+"-fg")})});document.querySelectorAll(".link_swatch").forEach(function(b){b.classList.remove("active")});a.classList.add("active")};
a.selectTheme=function(a){var c=util.els(".uk-card");switch(a){case "light":document.documentElement.classList.remove("uk-light");document.body.classList.remove("uk-light");document.documentElement.classList.add("uk-dark");document.body.classList.add("uk-dark");c.forEach(function(b){b.classList.add("uk-card-default");b.classList.remove("uk-card-secondary")});break;case "dark":document.documentElement.classList.add("uk-light");document.body.classList.add("uk-light");document.documentElement.classList.remove("uk-dark");
document.body.classList.remove("uk-dark");c.forEach(function(b){b.classList.remove("uk-card-default");b.classList.add("uk-card-secondary")});break;default:console.warn("invalid theme")}}})(profile||(profile={}));var report;
(function(a){function d(){if(void 0===standup.cache.activeReport)console.warn("no active report");else{var a=standup.cache.reports.filter(function(b){return b.id===standup.cache.activeReport});if(1!==a.length)console.warn("cannot load active report ["+standup.cache.activeReport+"]");else return a[0]}}a.onSubmitReport=function(){var a=util.req("#standup-report-date").value,b=util.req("#standup-report-content").value;socket.send({svc:services.standup.key,cmd:command.client.addReport,param:{d:a,content:b}});
return!1};a.onEditReport=function(){var a=util.req("#standup-report-edit-date").value,b=util.req("#standup-report-edit-content").value;socket.send({svc:services.standup.key,cmd:command.client.updateReport,param:{id:standup.cache.activeReport,d:a,content:b}});return!1};a.onRemoveReport=function(){var a=standup.cache.activeReport;a&&confirm("Delete this report?")&&(socket.send({svc:services.standup.key,cmd:command.client.removeReport,param:a}),UIkit.modal("#modal-report").hide());return!1};a.viewActiveReport=
function(){var a=system.cache.getProfile(),b=d();if(void 0===b)console.warn("no active report");else{util.setText("#report-title",b.d+" / "+system.getMemberName(b.authorID));var e=util.req("#modal-report .content-edit"),f=util.req("#standup-report-edit-date",e),k=util.req("#standup-report-edit-content",e),g=util.req("#modal-report .content-view"),l=util.req("#modal-report .buttons-edit"),h=util.req("#modal-report .buttons-view");b.authorID===a.userID?(e.style.display="block",util.setValue(f,b.d),
util.setValue(k,b.content),util.wireTextarea(k),g.style.display="none",util.setHTML(g,""),l.style.display="block",h.style.display="none"):(e.style.display="none",util.setValue(f,""),util.setValue(k,""),g.style.display="block",util.setHTML(g,b.html),l.style.display="none",h.style.display="block")}};a.setReports=function(c){standup.cache.reports=c;util.setContent("#report-detail",a.renderReports(c));UIkit.modal("#modal-add-report").hide()};a.getReportDates=function(a){return a.map(function(b){return b.d}).filter(function(b,
a,c){return c.indexOf(b)===a}).sort().reverse().map(function(b){return{d:b,reports:a.filter(function(a){return a.d===b}).sort(function(b,a){return b.created>a.created?-1:1})}})}})(report||(report={}));var retro;
(function(a){function d(b){a.cache.detail=b;util.setValue("#model-categories-input",b.categories.join(", "));util.setOptions(util.req("#retro-feedback-category"),b.categories);util.setOptions(util.req("#retro-feedback-edit-category"),b.categories);feedback.setFeedback(a.cache.feedback);rituals.setDetail(b)}var c=function(){return function(){this.feedback=[]}}();a.cache=new c;a.onRetroMessage=function(b,a){switch(b){case command.server.error:rituals.onError(services.retro.key,a);break;case command.server.sessionJoined:rituals.onSessionJoin(a);
d(a.session);feedback.setFeedback(a.feedback);break;case command.server.sessionUpdate:d(a);break;case command.server.feedbackUpdate:feedback.onFeedbackUpdate(a);break;case command.server.feedbackRemove:feedback.onFeedbackRemoved(a);break;default:console.warn("unhandled command ["+b+"] for retro")}};a.onSubmitRetroSession=function(){var a=util.req("#model-title-input").value,e=util.req("#model-categories-input").value;socket.send({svc:services.retro.key,cmd:command.client.updateSession,param:{title:a,
categories:e}})}})(retro||(retro={}));var rituals;
(function(a){function d(a,b){console.warn(a+": "+b);var e=b.lastIndexOf(":");-1<e&&(b=b.substr(e+1));UIkit.notification(a+" error: "+b,{status:"danger",pos:"top-right"})}a.onSocketMessage=function(a){debug&&(console.debug("message received"),console.debug(a));switch(a.svc){case services.system.key:var b=a.cmd;a=a.param;switch(b){case command.server.error:d("system",a);break;case command.server.actions:action.viewActions(a);break;case command.server.memberUpdate:member.onMemberUpdate(a);break;case command.server.onlineUpdate:member.onOnlineUpdate(a);
break;default:console.warn("unhandled system message for command ["+b+"]")}break;case services.sprint.key:sprint.onSprintMessage(a.cmd,a.param);break;case services.estimate.key:estimate.onEstimateMessage(a.cmd,a.param);break;case services.standup.key:standup.onStandupMessage(a.cmd,a.param);break;case services.retro.key:retro.onRetroMessage(a.cmd,a.param);break;default:console.warn("unhandled message for service ["+a.svc+"]")}};a.setDetail=function(a){system.cache.session=a;util.setText("#model-title",
a.title);util.setValue("#model-title-input",a.title);var b=util.els("#navbar .uk-navbar-item");0<b.length&&(b[b.length-1].innerText=a.title);UIkit.modal("#modal-session").hide()};a.onError=d;a.onSessionJoin=function(a){system.cache.session=a.session;system.cache.profile=a.profile;system.cache.members=a.members;system.cache.online=a.online;member.setMembers()};a.init=function(a,b){window.onbeforeunload=function(){socket.setAppUnloading()};socket.socketConnect(a,b)}})(rituals||(rituals={}));var socket;
(function(a){function d(){var a=document.location,b="ws";"https:"===a.protocol&&(b="wss");return b+"://"+a.host+"/s"}function c(a,c){system.cache.currentService=a;system.cache.currentID=c;system.cache.connectTime=Date.now();f=new WebSocket(d());f.onopen=function(){debug&&console.debug("socket connected");b({svc:a,cmd:command.client.connect,param:c})};f.onmessage=function(a){a=JSON.parse(a.data);rituals.onSocketMessage(a)};f.onerror=function(a){rituals.onError("socket",a.type)};f.onclose=function(){e()}}
function b(a){debug&&(console.debug("sending message"),console.debug(a));f.send(JSON.stringify(a))}function e(){function a(a){debug&&(1===a?console.info("socket closed, reconnecting in a second"):console.info("socket closed, reconnecting in "+a+" seconds"));setTimeout(function(){c(system.cache.currentService,system.cache.currentID)},1E3*a)}k||(2E3>Date.now()-system.cache.connectTime?a(6):a(1))}var f,k=!1;a.setAppUnloading=function(){k=!0};a.socketConnect=c;a.send=b})(socket||(socket={}));var sprint;
(function(a){var d=function(){return function(){this.estimates=[];this.standups=[];this.retros=[]}}();a.cache=new d;a.onSprintMessage=function(c,b){switch(c){case command.server.error:rituals.onError(services.sprint.key,b);break;case command.server.sessionJoined:rituals.onSessionJoin(b);c=b.session;a.cache.detail=c;rituals.setDetail(c);a.cache.estimates=b.estimates;util.setContent("#sprint-estimate-list",a.renderContents(services.estimate,a.cache.estimates));a.cache.standups=b.standups;util.setContent("#sprint-standup-list",
a.renderContents(services.standup,a.cache.standups));a.cache.retros=b.retros;util.setContent("#sprint-retro-list",a.renderContents(services.retro,a.cache.retros));break;case command.server.sessionUpdate:a.cache.detail=b;rituals.setDetail(b);break;default:console.warn("unhandled command ["+c+"] for sprint")}};a.onSubmitSprintSession=function(){var a=util.req("#model-title-input").value;socket.send({svc:services.sprint.key,cmd:command.client.updateSession,param:{title:a}})}})(sprint||(sprint={}));var standup;
(function(a){function d(b){return a.cache.reports.filter(function(a){return a.id!==b})}function c(b,c){report.setReports(b);c===a.cache.activeReport&&UIkit.modal("#modal-report").hide()}var b=function(){return function(){this.reports=[]}}();a.cache=new b;a.onStandupMessage=function(b,f){switch(b){case command.server.error:rituals.onError(services.standup.key,f);break;case command.server.sessionJoined:rituals.onSessionJoin(f);b=f.session;a.cache.detail=b;rituals.setDetail(b);report.setReports(f.reports);
break;case command.server.sessionUpdate:a.cache.detail=f;rituals.setDetail(f);break;case command.server.reportUpdate:b=d(f.id);b.push(f);c(b,f.id);break;case command.server.reportRemove:b=d(f);c(b,f);UIkit.notification("report has been deleted",{status:"success",pos:"top-right"});break;default:console.warn("unhandled command ["+b+"] for standup")}};a.onSubmitStandupSession=function(){var a=util.req("#model-title-input").value;socket.send({svc:services.standup.key,cmd:command.client.updateSession,
param:{title:a}})}})(standup||(standup={}));var story;
(function(a){function d(a){function b(a,b){a.id.substr(a.id.lastIndexOf("-")+1)===b?a.classList.add("active"):a.classList.remove("active")}for(var c=0,d=util.els(".story-status-body");c<d.length;c++){var g=d[c];b(g,a)}c=0;for(d=util.els(".story-status-actions");c<d.length;c++)g=d[c],b(g,a);g="";switch(a){case "pending":g="Story";break;case "active":g="Voting";break;case "complete":g="Results"}util.setText("#story-status",g);vote.viewVotes()}function c(b,e,c,d){null!==c&&"complete"==c.status&&0<c.finalVote.length&&
(e=c.finalVote);util.setContent("#story-"+b+" .story-status",a.renderStatus(e));d&&a.showTotalIfNeeded()}a.viewStoryStatus=d;a.requestStoryStatus=function(b){var e=a.getActiveStory();void 0!==e&&socket.send({svc:services.estimate.key,cmd:command.client.setStoryStatus,param:{storyID:e.id,status:b}})};a.setStoryStatus=c;a.onStoryStatusChange=function(a){var b=null;estimate.cache.stories.forEach(function(e){e.id==a.storyID&&(b=e,e.finalVote=a.finalVote,e.status=a.status)});c(a.storyID,a.status,b,!0);
a.storyID===estimate.cache.activeStory&&d(a.status)}})(story||(story={}));
(function(a){function d(){if(void 0!==estimate.cache.activeStory){var a=estimate.cache.stories.filter(function(a){return a.id===estimate.cache.activeStory});if(1!==a.length)console.warn("cannot load active story ["+estimate.cache.activeStory+"]");else return a[0]}}function c(){var b=0;estimate.cache.stories.filter(function(a){return"complete"===a.status}).map(function(a){return a.finalVote}).filter(function(a){return 0<a.length}).map(function(a){return parseFloat(a)}).filter(function(a){return!isNaN(a)}).forEach(function(a){return b+=a});
var e=util.opt("#story-total"),c=util.req("#story-list");null!==e&&c.removeChild(e);0<b&&c.appendChild(a.renderTotal(b))}a.setStories=function(b){estimate.cache.stories=b;util.setContent("#story-detail",a.renderStories(b));b.forEach(function(b){return a.setStoryStatus(b.id,b.status,b,!1)});c();UIkit.modal("#modal-add-story").hide()};a.onSubmitStory=function(){var a=util.req("#story-title-input").value;socket.send({svc:services.estimate.key,cmd:command.client.addStory,param:{title:a}});return!1};a.beginEditStory=
function(){var a=d(),e=prompt("Edit your story",a.title);null!==e&&e!==a.title&&socket.send({svc:services.estimate.key,cmd:command.client.updateStory,param:{id:a.id,title:e}});return!1};a.onRemoveStory=function(){var a=estimate.cache.activeStory;a&&confirm("Delete this story?")&&(socket.send({svc:services.estimate.key,cmd:command.client.removeStory,param:a}),UIkit.modal("#modal-story").hide());return!1};a.getActiveStory=d;a.viewActiveStory=function(){var b=d();void 0!==b&&(util.setText("#story-title",
b.title),a.viewStoryStatus(b.status))};a.showTotalIfNeeded=c})(story||(story={}));var util;
(function(a){a.els=function(a,c){return UIkit.util.$$(a,c)};a.opt=function(d,c){d=a.els(d,c);return 0===d.length?null:d[0]};a.req=function(d,c){c=a.opt(d,c);null===c&&console.warn("no element found for selector ["+d+"]");return c};a.setHTML=function(d,c){"string"===typeof d&&(d=a.req(d));d.innerHTML=c;return d};a.setContent=function(d,c){"string"===typeof d&&(d=a.req(d));d.innerHTML="";d.appendChild(c);return d};a.setText=function(d,c){"string"===typeof d&&(d=a.req(d));d.innerText=c;return d};a.setValue=
function(d,c){"string"===typeof d&&(d=a.req(d));d.value=c;return d};a.wireTextarea=function(a){function c(){a.style.height="auto";a.style.height=(64>a.scrollHeight?64:a.scrollHeight+6)+"px"}function b(){window.setTimeout(c,0)}void 0===a.dataset.autoresize&&(a.dataset.autoresize="true",a.addEventListener("change",c,!1),a.addEventListener("cut",b,!1),a.addEventListener("paste",b,!1),a.addEventListener("drop",b,!1),a.addEventListener("keydown",b,!1),a.focus(),a.select());c()};a.dateToYMD=function(a){var c=
a.getDate(),b=a.getMonth()+1;return""+a.getFullYear()+"-"+(9>=b?"0"+b:b)+"-"+(9>=c?"0"+c:c)};a.dateFromYMD=function(a){a=new Date(a);return a=new Date(a.getTime()+6E4*a.getTimezoneOffset())};a.dow=function(a){switch(a){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return"???"}};a.setOptions=function(a,c){a.innerHTML="";for(var b=0;b<c.length;b++){var e=c[b],d=document.createElement("option");d.value=e;d.innerText=
e;a.appendChild(d)}};a.setSelectOption=function(a,c){for(var b=0;b<a.children.length;b++){var e=a.children.item(b);e.selected=e.value===c}}})(util||(util={}));var vote;
(function(a){function d(){var a=story.getActiveStory();if(void 0!==a){var d=estimate.cache.activeVotes(),k=d.filter(function(a){return a.userID===system.cache.getProfile().userID}).pop();switch(a.status){case "pending":d=system.cache.getProfile().userID;k=util.req("#story-edit-section");var g=util.req("#story-view-section");d===a.authorID?(k.style.display="block",g.style.display="none"):(k.style.display="none",g.style.display="block");break;case "active":c(d,k);break;case "complete":b(d);break;default:console.warn("invalid story status ["+
a.status+"]")}}}function c(b,c){util.setContent("#story-vote-members",a.renderVoteMembers(system.cache.members,b));util.setContent("#story-vote-choices",a.renderVoteChoices(estimate.cache.detail.choices,null===c||void 0===c?void 0:c.choice))}function b(b){util.setContent("#story-vote-results",a.renderVoteResults(system.cache.members,b));util.setContent("#story-vote-summary",a.renderVoteSummary(b))}a.setVotes=function(a){estimate.cache.votes=a;d()};a.onVoteUpdate=function(a){var b=estimate.cache.votes;
b=b.filter(function(a){return a.userID!=a.userID||a.storyID!=a.storyID});b.push(a);estimate.cache.votes=b;a.storyID===estimate.cache.activeStory&&d()};a.viewVotes=d;a.onSubmitVote=function(a){socket.send({svc:services.estimate.key,cmd:command.client.submitVote,param:{storyID:estimate.cache.activeStory,choice:a}})};a.getVoteResults=function(a){a=a.map(function(a){a=parseFloat(a.choice);return isNaN(a)?-1:a}).filter(function(a){return-1!==a}).sort();var b=a.length,c=Math.min.apply(Math,a),e=Math.max.apply(Math,
a),d=a.reduce(function(a,b){return a+b},0),h=a.reduce(function(a,b){var c=a.numMapping[b]=(a.numMapping[b]||0)+1;c>a.greatestFreq&&(a.greatestFreq=c,a.mode=b);return a},{mode:null,greatestFreq:-Infinity,numMapping:{}}).mode;return{count:b,min:c,max:e,sum:d,mean:0==b?0:d/b,median:0==b?0:a[Math.floor(a.length/2)],mode:0==b?0:h}}})(vote||(vote={}));
(function(a){a.renderActions=function(a){return 0===a.length?JSX("div",null,"No actions available"):JSX("table",{"class":"uk-table uk-table-divider uk-text-left"},JSX("thead",null,JSX("tr",null,JSX("th",null,"Author"),JSX("th",null,"Act"),JSX("th",null,"Content"),JSX("th",null,"Note"),JSX("th",null,"Occurred"))),JSX("tbody",null,a.map(function(a){var b=JSON.stringify(a.content,null,2);return JSX("tr",null,JSX("td",null,system.getMemberName(a.authorID)),JSX("td",null,a.act),JSX("td",null,"null"===
b?"":JSX("pre",null,b)),JSX("td",null,a.note),JSX("td",null,(new Date(a.occurred)).toLocaleDateString()," ",(new Date(a.occurred)).toLocaleTimeString().slice(0,8)))})))}})(action||(action={}));
(function(a){a.renderFeedbackArray=function(d){var c;if(0===d.length)return JSX("div",null,JSX("button",{"class":"uk-button uk-button-default",onclick:"events.openModal('add-feedback');",type:"button"},"Add Feedback"));d=a.getFeedbackCategories(d,(null===(c=retro.cache.detail)||void 0===c?void 0:c.categories)||[]);var b=system.cache.getProfile();return JSX("div",{"class":"uk-grid-small uk-grid-match uk-child-width-expand@m uk-grid-divider","uk-grid":""},d.map(function(a){return JSX("div",{"class":"feedback-list uk-transition-toggle"},
JSX("div",{"class":"feedback-category-header"},JSX("span",{"class":"right"},JSX("a",{"class":b.linkColor+"-fg uk-icon-button uk-transition-fade","data-uk-icon":"plus",onclick:"events.openModal('add-feedback', '"+a.category+"');",title:"edit session"})),JSX("span",{"class":"feedback-category-title",onclick:"events.openModal('add-feedback', '"+a.category+"');"},a.category)),JSX("div",null,a.feedback.map(function(a){var b=system.cache.getProfile();b=JSX("div",{id:"feedback-"+a.id,"class":"feedback-detail uk-border-rounded section",
onclick:"events.openModal('feedback', '"+a.id+"');"},JSX("a",{"class":b.linkColor+"-fg section-link"},system.getMemberName(a.authorID)),JSX("div",{"class":"feedback-content"},"loading..."));0<a.html.length&&(util.setHTML(util.req(".feedback-content",b),a.html).style.display="block");return JSX("div",null,b)})))}))}})(feedback||(feedback={}));
(function(a){a.renderMembers=function(a){return 0===a.length?JSX("div",null,JSX("button",{"class":"uk-button uk-button-default",onclick:"events.openModal('invitation');",type:"button"},"Invite Members")):JSX("ul",{"class":"uk-list uk-list-divider"},a.map(function(a){var b={id:"member-"+a.userID},c=system.cache.getProfile();a=JSX("div",{"class":"section",onclick:"events.openModal('member', '"+a.userID+"');"},JSX("div",{title:"user is offline","class":"right uk-article-meta online-indicator"},"offline"),
JSX("div",{"class":c.linkColor+"-fg section-link"},a.name));return JSX("li",b,a)}))}})(member||(member={}));
(function(a){a.renderReports=function(d){if(0===d.length)return JSX("div",null,JSX("button",{"class":"uk-button uk-button-default",onclick:"events.openModal('add-report');",type:"button"},"Add Report"));d=a.getReportDates(d);return JSX("ul",{"class":"uk-list"},d.map(function(a){return JSX("li",{id:"report-date-"+a.d},JSX("h5",null,JSX("div",{"class":"right uk-article-meta"},util.dow(util.dateFromYMD(a.d).getDay())),util.dateFromYMD(a.d).toLocaleDateString()),JSX("ul",null,a.reports.map(function(a){var b=
system.cache.getProfile();b=JSX("div",{id:"report-"+a.id,"class":"report-detail uk-border-rounded section",onclick:"events.openModal('report', '"+a.id+"');"},JSX("a",{"class":b.linkColor+"-fg section-link"},system.getMemberName(a.authorID)),JSX("div",{"class":"report-content"},"loading..."));0<a.html.length&&(util.setHTML(util.req(".report-content",b),a.html).style.display="block");return JSX("li",null,b)})))}))}})(report||(report={}));
(function(a){function d(a,b){return b.map(function(b){return{svc:a,session:b}})}a.renderContents=function(a,b){b=d(a,b);b.sort(function(a,b){return a.session.created>b.session.created?-1:1});return 0===b.length?JSX("div",null,"No "+a.plural+" in this sprint"):JSX("table",{"class":"uk-table uk-table-divider uk-text-left"},JSX("tbody",null,b.map(function(a){var b=a.svc;a=a.session;var c=system.cache.getProfile();return JSX("tr",null,JSX("td",null,JSX("a",{"class":c.linkColor+"-fg",href:"/"+b.key+"/"+
a.slug},a.title)),JSX("td",{"class":"uk-table-shrink uk-text-nowrap"},system.getMemberName(a.owner)),JSX("td",{"class":"uk-table-shrink uk-text-nowrap"},(new Date(a.created)).toLocaleDateString()," ",(new Date(a.created)).toLocaleTimeString().slice(0,8)))})))}})(sprint||(sprint={}));
(function(a){a.renderStories=function(a){return 0===a.length?JSX("div",{id:"story-list"},JSX("button",{"class":"uk-button uk-button-default",onclick:"events.openModal('add-story');",type:"button"},"Add Story")):JSX("ul",{id:"story-list","class":"uk-list uk-list-divider"},a.map(function(a){var b=system.cache.getProfile();return JSX("li",{id:"story-"+a.id,"class":"section",onclick:"events.openModal('story', '"+a.id+"');"},JSX("div",{"class":"right uk-article-meta story-status"},a.status),JSX("div",
{"class":b.linkColor+"-fg section-link"},a.title))}))};a.renderStatus=function(a){switch(a){case "pending":return JSX("span",null,a);case "active":return JSX("span",null,a);default:return JSX("span",{"class":"vote-badge uk-border-rounded"},a)}};a.renderTotal=function(a){return JSX("li",{id:"story-total"},JSX("div",{"class":"right uk-article-meta"},JSX("span",{"class":"vote-badge uk-border-rounded"},a))," Total")}})(story||(story={}));
(function(a){function d(a,c){return JSX("div",{"class":"vote-member",title:a.name+" has "+(c?"voted":"not voted")},JSX("div",null,JSX("span",{"data-uk-icon":"icon: "+(c?"check":"minus")+"; ratio: 1.6"})),a.name)}function c(a,c){return void 0===c?JSX("div",{"class":"vote-result"},JSX("div",null,JSX("span",{"class":"uk-border-circle"},JSX("span",{"data-uk-icon":"icon: minus; ratio: 1.6"})))," ",a.name):JSX("div",{"class":"vote-result"},JSX("div",null,JSX("span",{"class":"uk-border-circle"},c))," ",
a.name)}a.renderVoteMembers=function(a,c){return JSX("div",{"class":"uk-flex uk-flex-wrap uk-flex-around"},a.map(function(a){return d(a,0<c.filter(function(b){return b.userID==a.userID}).length)}))};a.renderVoteChoices=function(a,c){return JSX("div",{"class":"uk-flex uk-flex-wrap uk-flex-center"},a.map(function(a){return JSX("div",{"class":"vote-choice uk-border-circle uk-box-shadow-hover-medium"+(a===c?" active "+system.cache.getProfile().linkColor+"-border":""),onclick:"vote.onSubmitVote('"+a+"');"},
a)}))};a.renderVoteResults=function(a,d){return JSX("div",{"class":"uk-flex uk-flex-wrap uk-flex-around"},a.map(function(a){var b=d.filter(function(b){return b.userID==a.userID});return c(a,0<length?b[0].choice:void 0)}))};a.renderVoteSummary=function(b){function c(a){return a.toString().substr(0,4)}var d=a.getVoteResults(b);return JSX("div",{"class":"uk-flex uk-flex-wrap uk-flex-center result-container"},JSX("div",{"class":"result"},JSX("div",{"class":"secondary uk-border-circle"},c(d.count)," / ",
c(b.length))," ",JSX("div",null,"votes counted")),JSX("div",{"class":"result"},JSX("div",{"class":"secondary uk-border-circle"},c(d.min),"-",c(d.max))," ",JSX("div",null,"vote range")),JSX("div",{"class":"result mean-result"},JSX("div",{"class":"mean uk-border-circle "+system.cache.getProfile().linkColor+"-border"},c(d.mean))," ",JSX("div",null,"average")),JSX("div",{"class":"result"},JSX("div",{"class":"secondary uk-border-circle"},c(d.median))," ",JSX("div",null,"median")),JSX("div",{"class":"result"},
JSX("div",{"class":"secondary uk-border-circle"},c(d.mode))," ",JSX("div",null,"mode")))}})(vote||(vote={}));
