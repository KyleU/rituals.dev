// Code generated by qtc from "EstimateWorkspaceStoryPanels.html". DO NOT EDIT.
// See https://github.com/valyala/quicktemplate for details.

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:1
package vwestimate

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:1
import (
	"github.com/kyleu/rituals/app/action"
	"github.com/kyleu/rituals/app/controller/cutil"
	"github.com/kyleu/rituals/app/enum"
	"github.com/kyleu/rituals/app/estimate/story"
	"github.com/kyleu/rituals/app/estimate/story/vote"
	"github.com/kyleu/rituals/app/workspace"
	"github.com/kyleu/rituals/views/components"
)

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:11
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:11
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:11
func StreamEstimateWorkspaceStoryPanelNew(qw422016 *qt422016.Writer, w *workspace.FullEstimate, s *story.Story, ps *cutil.PageState) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:11
	qw422016.N().S(`
  <div class="mt status-new" `)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:12
	if s != nil && s.Status != enum.SessionStatusNew {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:12
		qw422016.N().S(` style="display: none;"`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:12
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:12
	qw422016.N().S(`>
    <form class="status-new-form-next" action="" method="post">
      <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:14
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:14
		qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:14
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:14
	qw422016.N().S(`" />
      <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:15
	qw422016.E().S(string(action.ActChildStatus))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:15
	qw422016.N().S(`" />
      <input type="hidden" name="status" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:16
	qw422016.E().S(enum.SessionStatusActive.Key)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:16
	qw422016.N().S(`" />
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:17
	if s == nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:17
		qw422016.N().S(`        <div class="owned">Your story is available to <a class="link-edit" href="" data-id="">edit</a> and ready to <button type="submit" class="button-link">start voting</button></div>
        <div class="unowned">This story is ready to start voting</div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:20
	} else {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:21
		if ps.Profile.ID == s.UserID {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:21
			qw422016.N().S(`        <div>Your story is available to <a class="link-edit" href="#modal-story-`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:22
			qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:22
			qw422016.N().S(`-edit" data-id="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:22
			qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:22
			qw422016.N().S(`">edit</a> and ready to <button type="submit" class="button-link">start voting</button></div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:23
		} else {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:24
			if mem := w.Members.Get(s.EstimateID, s.UserID); mem == nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:24
				qw422016.N().S(`          <div>This story is ready to start voting</div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:26
			} else {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:26
				qw422016.N().S(`          <div>This story was created by <a href="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:27
				qw422016.E().S(mem.PublicWebPath(w.Estimate.Slug))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:27
				qw422016.N().S(`">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:27
				qw422016.E().S(mem.Name)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:27
				qw422016.N().S(`</a> and is ready to <button type="submit" class="button-link">start voting</button></div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:28
			}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:29
		}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:30
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:30
	qw422016.N().S(`    </form>
    <hr />
    <div class="mt">
      <form class="status-new-form-next" action="" method="post">
        <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:35
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:35
		qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:35
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:35
	qw422016.N().S(`" />
        <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:36
	qw422016.E().S(string(action.ActChildStatus))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:36
	qw422016.N().S(`" />
        <input type="hidden" name="status" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:37
	qw422016.E().S(enum.SessionStatusActive.Key)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:37
	qw422016.N().S(`" />
        <div class="right"><button type="submit">Start Voting</button></div>
      </form>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:40
	if s == nil || ps.Profile.ID == s.UserID {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:40
		qw422016.N().S(`      <form class="status-new-form-delete" action="" method="post" onsubmit="return confirm('Are you sure you want to delete this story?')">
        <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:42
		if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:42
			qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:42
		}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:42
		qw422016.N().S(`" />
        <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:43
		qw422016.E().S(string(action.ActChildRemove))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:43
		qw422016.N().S(`" />
        <div><button type="submit">Delete Story</button></div>
      </form>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:46
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:46
	qw422016.N().S(`    </div>
  </div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
func WriteEstimateWorkspaceStoryPanelNew(qq422016 qtio422016.Writer, w *workspace.FullEstimate, s *story.Story, ps *cutil.PageState) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
	StreamEstimateWorkspaceStoryPanelNew(qw422016, w, s, ps)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
	qt422016.ReleaseWriter(qw422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
func EstimateWorkspaceStoryPanelNew(w *workspace.FullEstimate, s *story.Story, ps *cutil.PageState) string {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
	WriteEstimateWorkspaceStoryPanelNew(qb422016, w, s, ps)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
	qs422016 := string(qb422016.B)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
	return qs422016
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:49
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:51
func StreamEstimateWorkspaceStoryPanelActive(qw422016 *qt422016.Writer, w *workspace.FullEstimate, s *story.Story, ps *cutil.PageState) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:51
	qw422016.N().S(`
  <div class="mt status-active" `)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:52
	if s == nil || s.Status != enum.SessionStatusActive {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:52
		qw422016.N().S(` style="display: none;"`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:52
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:52
	qw422016.N().S(`>
    <h4>Members</h4>
    <div class="story-members">
      `)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:55
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:55
		qw422016.N().S(`
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:56
		for _, m := range w.Members {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:57
			v := w.Votes.Get(s.ID, m.UserID)

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:57
			qw422016.N().S(`      <div class="member" data-member="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:58
			qw422016.E().S(m.UserID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:58
			qw422016.N().S(`">
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:59
			if v == nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:59
				qw422016.N().S(`        <div class="choice">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:60
				components.StreamSVGRef(qw422016, "minus", 18, 18, "", ps)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:60
				qw422016.N().S(`</div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:61
			} else {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:61
				qw422016.N().S(`        <div class="choice">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:62
				components.StreamSVGRef(qw422016, "check", 18, 18, "", ps)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:62
				qw422016.N().S(`</div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:63
			}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:63
			qw422016.N().S(`        <div class="name member-`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:64
			qw422016.E().S(m.UserID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:64
			qw422016.N().S(`-name">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:64
			qw422016.E().S(m.Name)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:64
			qw422016.N().S(`</div>
      </div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:66
		}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:67
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:67
	qw422016.N().S(`    </div>
    <hr />
    <h4>Choices</h4>
    <form class="status-active-form-vote" action="" method="post">
      <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:72
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:72
		qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:72
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:72
	qw422016.N().S(`" />
      <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:73
	qw422016.E().S(string(action.ActVote))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:73
	qw422016.N().S(`" />
      <div class="story-vote-options">
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:75
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:76
		selfVote := w.Votes.Get(s.ID, ps.Profile.ID)

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:77
		for _, c := range w.Estimate.Choices {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:77
			qw422016.N().S(`        <div class="vote-option" data-choice="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:78
			qw422016.E().S(c)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:78
			qw422016.N().S(`">
          <label>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:80
			if selfVote != nil && selfVote.Choice == c {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:80
				qw422016.N().S(`            <input type="radio" name="vote" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:81
				qw422016.E().S(c)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:81
				qw422016.N().S(`" checked="checked" />
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:82
			} else {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:82
				qw422016.N().S(`            <input type="radio" name="vote" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:83
				qw422016.E().S(c)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:83
				qw422016.N().S(`" />
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:84
			}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:84
			qw422016.N().S(`            <div class="vote-choice">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:85
			qw422016.E().S(c)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:85
			qw422016.N().S(`</div>
          </label>
        </div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:88
		}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:89
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:89
	qw422016.N().S(`      </div>
      <div class="mt vote-submit-button">
        <div class="right"><button type="submit">Submit vote</button></div>
      </div>
      <div class="clear"></div>
    </form>
    <hr />
    <div class="mt">
      <form class="status-active-form-next" action="" method="post">
        <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:99
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:99
		qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:99
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:99
	qw422016.N().S(`" />
        <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:100
	qw422016.E().S(string(action.ActChildStatus))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:100
	qw422016.N().S(`" />
        <input type="hidden" name="status" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:101
	qw422016.E().S(enum.SessionStatusComplete.Key)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:101
	qw422016.N().S(`" />
        <div class="right"><button type="submit">Finish Voting</button></div>
      </form>
      <form class="status-active-form-prev" action="" method="post">
        <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:105
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:105
		qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:105
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:105
	qw422016.N().S(`" />
        <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:106
	qw422016.E().S(string(action.ActChildStatus))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:106
	qw422016.N().S(`" />
        <input type="hidden" name="status" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:107
	qw422016.E().S(enum.SessionStatusNew.Key)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:107
	qw422016.N().S(`" />
        <div><button type="submit">Restart</button></div>
      </form>
    </div>
  </div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
func WriteEstimateWorkspaceStoryPanelActive(qq422016 qtio422016.Writer, w *workspace.FullEstimate, s *story.Story, ps *cutil.PageState) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
	StreamEstimateWorkspaceStoryPanelActive(qw422016, w, s, ps)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
	qt422016.ReleaseWriter(qw422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
func EstimateWorkspaceStoryPanelActive(w *workspace.FullEstimate, s *story.Story, ps *cutil.PageState) string {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
	WriteEstimateWorkspaceStoryPanelActive(qb422016, w, s, ps)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
	qs422016 := string(qb422016.B)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
	return qs422016
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:112
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:114
func StreamEstimateWorkspaceStoryPanelComplete(qw422016 *qt422016.Writer, w *workspace.FullEstimate, s *story.Story, ps *cutil.PageState) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:114
	qw422016.N().S(`
  <div class="mt status-complete" `)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:115
	if s == nil || s.Status != enum.SessionStatusComplete {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:115
		qw422016.N().S(` style="display: none;"`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:115
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:115
	qw422016.N().S(`>
    <div class="final-vote">
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:117
	if w == nil || s.FinalVote == "" {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:117
		qw422016.N().S(`      <div class="message">Choose one of the scores below to set the final score for this story</div>
      <div class="value" style="display: none;"></div>
      <div class="description" style="display: none;"><em>Final Score</em></div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:121
	} else {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:121
		qw422016.N().S(`      <div class="message" style="display: none;">Choose one of the scores below to set the final score for this story</div>
      <div class="value">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:123
		qw422016.E().S(s.FinalVote)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:123
		qw422016.N().S(`</div>
      <div class="description"><em>Final Score</em></div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:125
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:125
	qw422016.N().S(`    </div>
    <hr />
    <div class="mt story-results">
      <div class="vote-results">
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:130
	if w != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:131
		for _, m := range w.Members {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:131
			qw422016.N().S(`        <div class="vote-result">
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:133
			if s != nil && s.Status == enum.SessionStatusComplete {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:134
				if v := w.Votes.Get(s.ID, m.UserID); v == nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:134
					qw422016.N().S(`          <div class="number" title="user did not vote">-</div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:136
				} else {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:136
					qw422016.N().S(`          <form class="final-vote-form" action="" method="post">
            <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:138
					if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:138
						qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:138
					}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:138
					qw422016.N().S(`" />
            <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:139
					qw422016.E().S(string(action.ActVote))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:139
					qw422016.N().S(`" />
            <input type="hidden" name="typ" value="user" />
            <input type="hidden" name="value" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:141
					qw422016.E().S(v.Choice)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:141
					qw422016.N().S(`" />
            <button type="submit" class="number button-link">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:142
					qw422016.E().S(v.Choice)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:142
					qw422016.N().S(`</button>
          </form>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:144
				}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:145
			} else {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:145
				qw422016.N().S(`          <div class="number" title="in progress">-</div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:147
			}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:147
			qw422016.N().S(`          <div class="member-`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:148
			qw422016.E().S(m.UserID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:148
			qw422016.N().S(`-name">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:148
			qw422016.E().S(m.Name)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:148
			qw422016.N().S(`</div>
        </div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:150
		}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:151
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:151
	qw422016.N().S(`      </div>
    </div>
    <hr />
    <div class="mt">
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:156
	if s != nil && s.Status == enum.SessionStatusComplete {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:156
		qw422016.N().S(`      `)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:157
		StreamEstimateWorkspaceStoryResultCalculations(qw422016, s, w.Votes.GetByStoryIDs(s.ID))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:157
		qw422016.N().S(`
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:158
	} else {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:158
		qw422016.N().S(`      `)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:159
		StreamEstimateWorkspaceStoryCalculations(qw422016, s, 0, 0, 0, 0, 0, 0, "0")
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:159
		qw422016.N().S(`
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:160
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:160
	qw422016.N().S(`    </div>
    <hr />
    <div class="mt">
      <div class="right">
        <a href="#"><button type="button">Close</button></a>
      </div>
      <form class="status-complete-form-prev" action="" method="post">
        <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:168
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:168
		qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:168
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:168
	qw422016.N().S(`" />
        <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:169
	qw422016.E().S(string(action.ActChildStatus))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:169
	qw422016.N().S(`" />
        <input type="hidden" name="status" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:170
	qw422016.E().S(enum.SessionStatusActive.Key)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:170
	qw422016.N().S(`" />
        <div><button type="submit">Reopen</button></div>
      </form>
    </div>
  </div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
func WriteEstimateWorkspaceStoryPanelComplete(qq422016 qtio422016.Writer, w *workspace.FullEstimate, s *story.Story, ps *cutil.PageState) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
	StreamEstimateWorkspaceStoryPanelComplete(qw422016, w, s, ps)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
	qt422016.ReleaseWriter(qw422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
func EstimateWorkspaceStoryPanelComplete(w *workspace.FullEstimate, s *story.Story, ps *cutil.PageState) string {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
	WriteEstimateWorkspaceStoryPanelComplete(qb422016, w, s, ps)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
	qs422016 := string(qb422016.B)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
	return qs422016
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:175
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:177
func StreamEstimateWorkspaceStoryResultCalculations(qw422016 *qt422016.Writer, s *story.Story, v vote.Votes) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:177
	qw422016.N().S(`
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:178
	r := v.Results()

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:178
	qw422016.N().S(`  `)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:179
	StreamEstimateWorkspaceStoryCalculations(qw422016, s, len(v), r.Count, r.Min, r.Max, r.Mean, r.Median, r.ModeString)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:179
	qw422016.N().S(`
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
func WriteEstimateWorkspaceStoryResultCalculations(qq422016 qtio422016.Writer, s *story.Story, v vote.Votes) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
	StreamEstimateWorkspaceStoryResultCalculations(qw422016, s, v)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
	qt422016.ReleaseWriter(qw422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
func EstimateWorkspaceStoryResultCalculations(s *story.Story, v vote.Votes) string {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
	WriteEstimateWorkspaceStoryResultCalculations(qb422016, s, v)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
	qs422016 := string(qb422016.B)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
	return qs422016
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:180
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:182
func StreamEstimateWorkspaceStoryCalculations(qw422016 *qt422016.Writer, s *story.Story, votes int, counted int, min float64, max float64, mean float64, median float64, modeString string) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:182
	qw422016.N().S(`
  <div class="vote-calculations">
    <div class="vote-calculation calc-counted" title="portion of votes that were able to be parsed as numbers">
      <div class="value">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:185
	qw422016.N().D(counted)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:185
	qw422016.N().S(`/`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:185
	qw422016.N().D(votes)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:185
	qw422016.N().S(`</div>
      Counted
    </div>
    <div class="vote-calculation calc-range" title="the minimum and maximum vote recorded">
      <div class="value">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:189
	qw422016.N().F(min)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:189
	qw422016.N().S(`-`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:189
	qw422016.N().F(max)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:189
	qw422016.N().S(`</div>
      Range
    </div>
    <div class="vote-calculation calc-mean" title="mean average of all votes (click to set the final score)">
      <form class="final-vote-form" action="" method="post">
        <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:194
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:194
		qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:194
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:194
	qw422016.N().S(`" />
        <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:195
	qw422016.E().S(string(action.ActVote))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:195
	qw422016.N().S(`" />
        <input type="hidden" name="typ" value="mean" />
        <input type="hidden" name="value" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:197
	qw422016.N().F(mean)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:197
	qw422016.N().S(`" />
        <button type="submit" class="value button-link">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:198
	qw422016.N().F(mean)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:198
	qw422016.N().S(`</button>
      </form>
      <div>Average</div>
    </div>
    <div class="vote-calculation calc-median" title="median value from collected votes (click to set the final score)">
      <form class="final-vote-form" action="" method="post">
        <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:204
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:204
		qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:204
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:204
	qw422016.N().S(`" />
        <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:205
	qw422016.E().S(string(action.ActVote))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:205
	qw422016.N().S(`" />
        <input type="hidden" name="typ" value="median" />
        <input type="hidden" name="value" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:207
	qw422016.N().F(median)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:207
	qw422016.N().S(`" />
        <button type="submit" class="value button-link">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:208
	qw422016.N().F(median)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:208
	qw422016.N().S(`</button>
      </form>
      <div>Median</div>
    </div>
    <div class="vote-calculation calc-mode" title="mode value(s) from collected votes (click to set the final score)">
      <form class="final-vote-form" action="" method="post">
        <input type="hidden" name="storyID" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:214
	if s != nil {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:214
		qw422016.E().S(s.ID.String())
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:214
	}
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:214
	qw422016.N().S(`" />
        <input type="hidden" name="action" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:215
	qw422016.E().S(string(action.ActVote))
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:215
	qw422016.N().S(`" />
        <input type="hidden" name="typ" value="mode" />
        <input type="hidden" name="value" value="`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:217
	qw422016.E().S(modeString)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:217
	qw422016.N().S(`" />
        <button type="submit" class="value button-link">`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:218
	qw422016.E().S(modeString)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:218
	qw422016.N().S(`</button>
      </form>
      <div>Mode</div>
    </div>
  </div>
`)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
func WriteEstimateWorkspaceStoryCalculations(qq422016 qtio422016.Writer, s *story.Story, votes int, counted int, min float64, max float64, mean float64, median float64, modeString string) {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
	qw422016 := qt422016.AcquireWriter(qq422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
	StreamEstimateWorkspaceStoryCalculations(qw422016, s, votes, counted, min, max, mean, median, modeString)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
	qt422016.ReleaseWriter(qw422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
}

//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
func EstimateWorkspaceStoryCalculations(s *story.Story, votes int, counted int, min float64, max float64, mean float64, median float64, modeString string) string {
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
	qb422016 := qt422016.AcquireByteBuffer()
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
	WriteEstimateWorkspaceStoryCalculations(qb422016, s, votes, counted, min, max, mean, median, modeString)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
	qs422016 := string(qb422016.B)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
	qt422016.ReleaseByteBuffer(qb422016)
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
	return qs422016
//line views/vworkspace/vwestimate/EstimateWorkspaceStoryPanels.html:223
}
